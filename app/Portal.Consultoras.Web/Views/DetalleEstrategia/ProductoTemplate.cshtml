@using Portal.Consultoras.Common
<script id="ficha_producto_template" type="text/x-handlebars-template">
    <div data-OrigenPedidoWeb="{{OrigenUrl}}" data-OrigenPedidoWebAgregar="{{OrigenAgregar}}" data-OrigenPedidoEditar="{{CodigoUbigeoPortal}}">
        <div id="dvSeccionIzquierdo" class="ficha_producto">
            <div id="dvSeccionFoto">
                <div id="FichaImagenProducto" class="contenedor_imagen">                    
                    <img class="contenedor_img" src="{{ImgUrl FotoProducto01}}" alt="">                     
                </div>
                {{#iff CodigoVariante 'ContainsArray' '[@Constantes.TipoEstrategiaSet.IndividualConTonos,@Constantes.TipoEstrategiaSet.CompuestaVariable]'}}
                <hr class="clear">
                <div id="contenedor_foto_referencial" class="texto_referencial">
                    <span data-texto_referencial="">* Foto Referencial</span>
                </div>
                {{/iff}}
                <div>
                </div>

            </div>
            <!--compartir-->
            {{#if TieneCompartir}}
            <hr class="clear">
            <div id="Contenedor_redes_sociales" class="ficha_redes_sociales" style="overflow: hidden;">
                <div data-compartir-campos="" style="display:none;">
                    <input type="hidden" class="CUV" value="{{CUV2}}" />
                    <input type="hidden" class="rsFBMensaje" value="" />
                    <input type="hidden" class="rsWAMensaje" value="" />
                    <input type="hidden" class="rsFBRutaImagen" value="{{ImgUrl FotoProducto01}}" />
                    <input type="hidden" class="rsWARutaImagen" value="{{ImgUrl FotoProducto01}}" />
                    <input type="hidden" class="MarcaID" value="{{MarcaID}}" />
                    <input type="hidden" class="MarcaNombre" value="{{DescripcionMarca}}" />
                    <input type="hidden" class="Nombre" value="{{DescripcionCompleta}}" />
                    <input type="hidden" class="ProductoDescripcion" value="" />
                    <input type="hidden" class="Volumen" value="" />
                    <input type="hidden" class="Palanca" value="{{TipoPersonalizacion}}" />
                </div>
                <div class="texto_redes_sociales">Comparte este producto con tus clientes</div>
                <a class="btn_compartir_facebook" href="javascript:;" data-compartir="FB">
                    <img class="contenedor_img" src="/Content/Images/Esika/facebook.png">
                </a>
            </div>
            {{/if}}
            <!--fin compartir-->
        </div>
        <div id="dvSeccionDerecho" class="ficha_detalle">
            <div id="contenedor_ficha_etiquetas" class="contenedor_ficha_etiquetas contenedor_ficha_etiquetas_Confondo">
                {{#if TieneReloj}}
                <div id="EtiquetaOdd" class="contenedor_etiqueta_odd">
                    <div id="clock" class="clock_odd"></div>
                </div>
                {{/if}}
                <div id="EtiquetaPackNuevas" class="contenedor_etiqueta_nuevo">
                    <div class="etiqueta_nuevo">
                        {{#IsNullOrEmpty ImagenURL '!='}}
                        <img src="{{ImagenURL}}" alt="" />
                        {{/IsNullOrEmpty}}
                    </div>
                </div>
            </div>
            <hr class="clear">
            <div id="dvSeccionDetalle" class="ficha_detalle_cuerpo">

                <div class="contenedor_nombre_precio">
                    <div class="contenedor_izquierdo">
                        <div class="nombre_marca">
                            {{#if EsMultimarca}}
                            <span data-nombre_marca=""></span>
                            {{else}}
                            <span data-nombre_marca="">{{DescripcionMarca}}</span>
                            {{/if}}
                        </div>
                        <div class="descripcion" data-descripcion="">{{DescripcionCompleta}}</div>

                        {{#iff MostrarFichaEnriquecida '==' true }}
                        {{#iff this.Hermanos.length '==' 1}}
                        {{#each this.Hermanos as |componente|}}
                        <div class="descripcion_item">
                            {{componente.Cabecera.ContenidoNeto}}
                        </div>
                        <div class="descripcion_item">
                            {{componente.Cabecera.Dimensiones}}
                        </div>
                        <div class="descripcion_item">
                            {{componente.Cabecera.TallaMedidas}}
                        </div>
                        {{/each}}
                        {{/iff}}
                        {{/iff}}

                    </div>
                    <div class="contenedor_derecho">
                        {{#iff Precio '>' 0}}
                        <div class="precio_valorizado">Precio catálogo: <span data-precio_valorizado="">{{SimboloMoneda}} {{PrecioTachado}}</span></div>
                        {{/iff}}

                        <ul class="precio_venta_oferta_list">
                            <li>Precio para ti:</li>
                            <li>
                                <span data-precio_venta_oferta="">
                                    {{#IsNullOrEmpty this.ListaPrecioNiveles '!='}}1x {{/IsNullOrEmpty}}{{SimboloMoneda}} {{PrecioVenta}}
                                </span>
                                {{#each ListaPrecioNiveles as |itemNivel|}}
                                <span class="subprecio">{{itemNivel}}</span>
                                {{/each}}
                            </li>
                        </ul>

                        {{#iff Ganancia '>' 0}}
                        <div class="ganancia">
                            {{#iff CodigoVariante '!=' '@Constantes.TipoEstrategiaSet.CompuestaVariable'}}
                            GANA
                            {{/iff}}
                            {{#iff CodigoVariante '==' '@Constantes.TipoEstrategiaSet.CompuestaVariable'}}
                            GANA HASTA
                            {{/iff}}
                            <span data-ganancia="">{{SimboloMoneda}} {{GananciaString}}</span>
                        </div>
                        {{/iff}}
                    </div>
                </div>
                {{#IsNullOrEmpty this.ListaDescripcionDetalle '!='}}
                <div id="SloganLanzamientos">
                    <span class="nombre_detalle_producto_tono"><strong>{{this.TipoEstrategiaDetalle.Slogan}}</strong></span>
                    <ul class="descripcion_detalle_producto_tono">
                        {{#each this.ListaDescripcionDetalle}}
                        <li><span class="vineta">-</span><span class="txt-des">{{Trim this}}</span></li>
                        {{/each}}
                    </ul>
                </div>
                <hr class="clear">
                {{/IsNullOrEmpty}}

                <div id="componentes" data-codigovariante="{{CodigoVariante}}" style="overflow: hidden;">
                </div>

            </div>


            <!--Init panel cliente-->
            <input id="hfClienteId" type="hidden" />
            <input id="hfClienteNombre" type="hidden" />

            {{#if MostrarCliente}}
            <div class="AsignarCliente_bloque">
                <div class="col-xs-12">
                    <ul class="asignarCliente">
                        <li><h3>ASIGNADO A:</h3></li>

                    </ul>
                    <button id="btnShowCliente" class="boton_asignarCliente">
                        <span id="spClienteNombre"></span>
                        <span class="btn_cambiar_opciones cambiar_opcion cambiar_opcion_editarFicha">
                            Cambiar Cliente
                            <img src="/Content/Images/mobile/Esika/right-arrow.svg" alt="">
                        </span>
                    </button>
                </div>

            </div>
            <!--Init panel cliente-->
            {{/if}}

            <div id="dvContenedorAgregar" class="contenedor_agregar">

                <div data-selecciontono="tooltip" class="popover top tooltip_agregar_desabilitado" role="tooltip" id="" style="display: none;">
                    <div class="arrow" style="left: 20%;"></div>
                    <div class="popover-content">
                        <ul class="list-inline popover_texto">
                            <li><img class="icon_alerta" src="/Content/Images/Mobile/Esika/icono-alerta.svg" alt="" /></li>
                            <li>Debes elegir tus opciones para poder agregar la oferta.</li>
                        </ul>
                    </div>
                </div>
                <div data-limitepedido="tooltip" class="popover top tooltip_limite_pedidos" role="tooltip" id="" style="display: none;">
                    <div class="arrow"></div>
                    <div class="popover-content">
                        <ul class="list-inline popover_texto">
                            <li><img class="icon_alerta" src="/Content/Images/Mobile/Esika/icono-alerta.svg" alt="" /></li>
                            <li>Lo sentimos <img class="tooltop-emoji" src="/Content/Images/Mobile/Esika/1f615.png" /> Has llegado al límite de pedidos para esta oferta.</li>
                        </ul>
                    </div>
                </div>

                {{#if TieneStock}}
                <div class="contenedor_rangos {{#if esCampaniaSiguiente}} {{ClaseBloqueadaRangos}} {{/if}}" id="idcontenedor_rangos" data-cantidad-contenedor="">
                    <input class="txt_cantidad_pedido ValidaNumeral ValidaPasteNumeral"
                           {{#if esCampaniaSiguiente}} {{RangoInputEnabled}} {{/if}}
                           type="text"
                           value="{{Cantidad}}"
                           onkeyup="EstrategiaAgregarModule.ValidaCantidad(event);"
                           size="2"
                           maxlength="2"
                           id="txtCantidad"
                           data-input="cantidad"
                           data-cantidad-input="-">
                    <div>
                        <a class="txt_menos" data-cantidad-agregar="-" {{#if esCampaniaSiguiente}} data-bloqueada="{{ClaseBloqueada}} {{/if}}" onclick="javascript:EstrategiaAgregarModule.DisminuirCantidad(event)">
                            <div class="dibujar_linea dibujar_menos" {{#if esCampaniaSiguiente}} data-bloqueada="{{ClaseBloqueada}} {{/if}}"></div>
                        </a>
                        <a class="txt_mas" data-cantidad-agregar="+" {{#if esCampaniaSiguiente}} data-bloqueada="{{ClaseBloqueada}} {{/if}}" onclick="javascript:EstrategiaAgregarModule.AdicionarCantidad(event)">
                            <div class="dibujar_linea dibujar_mas" {{#if esCampaniaSiguiente}} data-bloqueada="{{ClaseBloqueada}} {{/if}}"></div>
                        </a>
                    </div>
                </div>
                <a id="btnAgregalo"
                   class="btn_agregalo {{#if esCampaniaSiguiente}} {{ClaseBloqueada}} {{/if}}"
                   {{#if esCampaniaSiguiente}} data-bloqueada="{{ClaseBloqueada}}" {{/if}}
                   onclick="javascript: EstrategiaAgregarModule.EstrategiaAgregar(event, false, 0, true, {{esEditable}}); ">
                    AGRÉGALO
                </a>
                {{else}}
                <a id="btnAgregalo"
                   class="boton_Agregalo_agotado btn_agregalo"
                   style="pointer-events: none;">AGOTADO</a>
                {{/if}}

                <hr class="clear">
                <div class="ficha_div_libre_agregado">
                    {{#iff TextoLibre '!=' ''}}
                    <div class="limit_pack"><span>!</span>{{TextoLibre}}</div>
                    {{/iff}}
                    <div id="ContenedorAgregado" class="ficha_agregado" style="display:none;">
                        <div class="txt_agregado" data-txt_agregado="">
                            <span class="span_agregado">AGREGADO</span>
                            <div class="check_agregado">
                                <div class="dibujar_linea dibujar_check_agregado"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</script>

