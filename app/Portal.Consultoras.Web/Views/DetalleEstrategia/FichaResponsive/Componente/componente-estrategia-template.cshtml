@using Portal.Consultoras.Common

<script id="componente-estrategia-template" type="text/x-handlebars-template">
    {{#iff CodigoVariante '==' '@Constantes.TipoEstrategiaSet.IndividualConTonos'}}
        {{#each this.Hermanos as |componente|}}
            <div class="tiposytonos_componentes" data-tono="" data-opciones-seleccionadas="0" data-tono-digitable="1">
                <button type="button" class="tono_select_opt" data-tono-change="1" btn-show-types-tones-modal data-component-cuv="{{componente.Cuv}}">
                    {{#iff componente.FactorCuadre '==' '1'}}
                        Elige 1 opción
                    {{else}}
                        Elige {{componente.FactorCuadre}} opciones
                    {{/iff}}
                </button>
                <div class="content_tonos_select" style="display:none;" data-tono-select-area="1">
                    {{#each componente.Hermanos as |variedad|}}
                        <div class="content_tono_elegido"
                             data-tono-change="2"
                             data-tono-cuv="{{variedad.Cuv}}"
                             data-tono-nombre="{{variedad.NombreBulk}}"
                             data-tono-descripcion="{{variedad.NombreComercial}}">
                            <div class="tono_seleccionado">
                                <img src="{{variedad.ImagenBulk}}" alt="" />
                            </div>
                            <div class="texto_tono_seleccionado">{{variedad.NombreBulk}}</div>
                        </div>
                    {{/each}}
                </div>
                <div id="resumen-opciones-{{componente.Cuv}}" class="tonos_seleccionados" style="display:none;"></div>
                {{#iff FactorCuadre '==' '1'}}
                    <div class="content_tonos_maquillaje" data-tono-div="{{componente.Cuv}}">
                        {{#each componente.Hermanos as |variedad|}}
                            <input type="hidden" name="nameMarcaID" id="Estrategia_hd_MarcaID" value="{{variedad.IdMarca}}" />
                            <input type="hidden" name="namePrecioCatalogo" id="Estrategia_hd_PrecioCatalogo" value="{{variedad.PrecioCatalogo}}" />

                            {{#if TieneStock}}
                                <div class="content_tono_detalle"
                                     data-tono-change="2"
                                     id="fav_tono_{{variedad.Cuv}}"
                                     data-tono-cuv="{{variedad.Cuv}}"
                                     data-tono-nombre="{{variedad.NombreBulk}}"
                                     data-tono-descripcion="{{variedad.NombreComercial}}"
                                     {{#unless ../esCampaniaSiguiente}}
                                        onclick="javascript: componentesPresenter.onPaletaSelectItemClick('{{variedad.Grupo}}','{{variedad.Cuv}}');"
                                     {{/unless}}>
                                    <img src="{{variedad.ImagenBulk}}" alt="" />
                                </div>
                            {{else}}
                                <div class="content_tono_detalle tono_agotado"
                                     data-tono-change="2"
                                     id="fav_tono_{{variedad.Cuv}}"
                                     data-tono-cuv="{{variedad.Cuv}}"
                                     data-tono-nombre="{{variedad.NombreBulk}}"
                                     data-tono-descripcion="{{variedad.NombreComercial}}">
                                    <img src="{{variedad.ImagenBulk}}" alt="" />
                                </div>
                            {{/if}}
                        {{/each}}
                    </div>
                {{/iff}}
            </div>
        {{/each}}
        @*<div style="display: none;" class="xmsg-tonos-agotados">
            <ul class="list-inline" style="padding-bottom:15px">
                <li><img class="icon_alerta" src="/Content/Images/Mobile/Esika/icono-alerta.svg" alt=""></li>
                <li>Uno o más productos están AGOTADOS.</li>
            </ul>
        </div>*@
    {{/iff}}

    {{#iff CodigoVariante 'ContainsArray' '[@Constantes.TipoEstrategiaSet.CompuestaFija,@Constantes.TipoEstrategiaSet.CompuestaVariable]'}}
        <h3 class="contenido_titulo">Contenido</h3>
        {{#each this.Hermanos as |componente|}}
            {{#ifVerificarMarcaLast componente.DescripcionMarca EsMultimarca}}
                <hr class="componentes_separador" />
            {{/ifVerificarMarcaLast}}
            <div class="tiposytonos_componentes"
                 data-opciones-seleccionadas="0"
                 data-tono-digitable="{{componente.Digitable}}"
                 data-componente-grupo="{{componente.Grupo}}">
                <input type="hidden" name="nameMarcaID" id="Estrategia_hd_MarcaID" value="{{componente.MarcaID}}" />
                <input type="hidden" name="namePrecioCatalogo" id="Estrategia_hd_PrecioCatalogo" value="{{componente.PrecioCatalogo}}" />
                {{#ifVerificarMarca componente.DescripcionMarca}}
                    <div class="nombre_marca">{{componente.DescripcionMarca}}</div>
                {{/ifVerificarMarca}}
                <ul class="detalle_producto_detalle">
                    <li>x {{Multiplicar componente.Cantidad componente.FactorCuadre}}</li>
                    <li>{{componente.NombreComercial}}</li>
                </ul>

                {{#iff ../MostrarFichaEnriquecida '==' true }}
                    {{#iff ../Hermanos.length '>' 1}}
                        {{#iff componente.TieneDetalleSeccion '==' true}}
                            <a id="btnVerDetalle" class="btn_texto" onclick="javascript:fichaEnriquecidaPresenter.showPopupFichaEnriquecida('{{componente.Grupo}}','{{componente.Cuv}}');">Ver detalle <img src="/Content/Images/mobile/Esika/right-arrow.svg" alt=""></a>
                        {{/iff}}
                    {{/iff}}
                {{/iff}}
                @*{{#iff componente.Hermanos.length '>' 0}}
                    <button type="button" class="tono_select_opt" data-tono-change="1" btn-show-types-tones-modal data-component-cuv="{{componente.Cuv}}">
                        {{componente.selectComponentText}}
                    </button>
                    <div id="resumen-opciones-{{componente.Cuv}}" class="tonos_seleccionados" style="display:none;"></div>
                {{/iff}}*@
                {{#iff componente.Digitable '==' '1'}}
                    <button type="button" class="tono_select_opt" data-tono-change="1" btn-show-types-tones-modal data-component-cuv="{{componente.Cuv}}">
                        {{componente.selectComponentText}}
                    </button>
                    <div id="resumen-opciones-{{componente.Cuv}}" class="tonos_seleccionados" style="display:none;"></div>
                {{else}}
                    <div data-tono="" data-tono-select="{{componente.Cuv}}" data-tono-digitable="{{componente.Digitable}}" style="display: none;">
                        <input type="hidden" name="nameMarcaID" id="Estrategia_hd_MarcaID" value="{{componente.IdMarca}}" />
                        <input type="hidden" name="namePrecioCatalogo" id="Estrategia_hd_PrecioCatalogo" value="{{componente.PrecioCatalogo}}" />
                        <input type="hidden" name="nameDigitable" id="Estrategia_hd_Digitable" value="{{componente.Digitable}}" />
                        <input type="hidden" name="nameGrupo" id="Estrategia_hd_Grupo" value="{{componente.Grupo}}" />
                    </div>
                {{/iff}}
            </div>
        {{/each}}
        @*<div style="display: none;" class="xmsg-tonos-agotados">
            <ul class="list-inline" style="padding-bottom:15px">
                <li><img class="icon_alerta" src="/Content/Images/Mobile/Esika/icono-alerta.svg" alt=""></li>
                <li>Uno o más productos están AGOTADOS.</li>
            </ul>
        </div>*@
    {{/iff}}
</script>