@using System.Web.Optimization
@using Portal.Consultoras.Common

<!DOCTYPE html>
<html lang="es" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Portal de consultoras" />
    <meta name="author" content="Belcorp" />

    <title>Belcorp | Portal Consultoras</title>

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManagerHeader.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_GoogleOptimize.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManager.cshtml")


    <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">


    @Styles.Render("~/Bundle/Css/Mixto/Bootstrap")
    @Styles.Render("~/Bundle/Css/Mixto/LayoutResponsive")
    @if (System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))
    {
        <link href="@Url.Content("~/Content/Images/Esika/favicon.ico")" rel="shortcut icon" type="image/x-icon" />
        @Styles.Render("~/Bundle/Css/Mixto/EsikaPageResponsive")
    }
    else
    {
        <link href="@Url.Content("~/Content/Images/icons/favicon_lbel.ico")" rel="shortcut icon" type="image/x-icon" />
        @Styles.Render("~/Bundle/Css/Mixto/LebelPageResponsive")
    }

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpVariablesGeneralesPortal.cshtml")
    <script type="text/javascript">
        var baseUrl = "@Url.Content("~")";
        var isEsika = '@(System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))' == "True";
        var trackingJetloreAccessToken = '@System.Configuration.ConfigurationManager.AppSettings.Get("TrackingJetloreAccessToken")';
        var tipoOfertaFinalCatalogoPersonalizado = '@Constantes.TipoOfertaFinalCatalogoPersonalizado.Jetlore';
        var esPaisTrackingJetlore = '@ViewBag.PaisesConTrackingJetlore';
        var indicadorEnviadoDescarga = '@ViewBag.IndicadorEnviado';
        var gTipoUsuario = '@ViewBag.TipoUsuario';
        var IsoPais = '@ViewBag.CodigoISODL';

        //Postulante
        var mostrarBannerPostulante = '@ViewBag.MostrarBannerPostulante';

        //GPR
        var estaRechazado = '@ViewBag.IndicadorGPRSB';
        var cerrarRechazado = '@ViewBag.CerrarRechazado';
        var mostrarBannerRechazo = '@ViewBag.MostrarBannerRechazo';

        //ODD
        var MostrarODD = '@ViewBag.MostrarODD';
        var tieneOfertaDelDia = '@ViewBag.TieneOfertaDelDia';
        var mostrarBannerSuperiorOdd = '@ViewBag.MostrarBannerSuperiorOdd';
        // New Chat
        var emt_client_type = '@ViewBag.TipoUsuario';
        var emt_country = '@ViewBag.CodigoISODL';
        var emt_email_address = '@ViewBag.CorreoC';
        var emt_first_name = '@ViewBag.NombreC';
        var emt_id = '@ViewBag.CodigoUsuario';
        var emt_type = '0';
        var emt_device = ' ';
        var emt_default_message = '@Html.Raw(ViewBag.MensajeChat)';
        // New Chat -->
        var mostrarBannerRechazo = '@ViewBag.MostrarBannerRechazo';
        var FechaActual = '@(DateTime.Now.ToString("dd/MM/yyyy"))';

        window.urlLogDynamo = '@System.Configuration.ConfigurationManager.AppSettings["UrlLogDynamo"]';
        window.urlLogElastic = '@System.Configuration.ConfigurationManager.AppSettings["UrlLogElastic"]';
        window.patternElastic = '@System.Configuration.ConfigurationManager.AppSettings["PatternElastic"]';

        @{
            var routeValues = HttpContext.Current.Request.RequestContext.RouteData.Values;
            string ctrl = routeValues.ContainsKey("controller") ? routeValues["controller"].ToString() : "CtrlNoRoute";
            string acti = routeValues.ContainsKey("action") ? routeValues["action"].ToString() : "ActiNoRoute";
        }
        window.controllerName = '@ctrl.ToLower()';
        window.actionName     = '@acti.ToLower()';

        var userData = {
            'aplicacion': '@(Constantes.LogDynamoDB.AplicacionPortalConsultoras)',
            'rol': '@(Constantes.LogDynamoDB.RolConsultora)',
            'campana': '@ViewBag.CampaniaCodigo',
            'region': '@ViewBag.RegionAnalytics',
            'zona': '@ViewBag.ZonaAnalytics',
            'seccion': '@ViewBag.SeccionAnalytics',
            'pais': '@ViewBag.PaisAnalytics',
            'codigoConsultora': '@ViewBag.CodigoConsultoraDL'
        };
        var usuarioNombre = '@ViewBag.UsuarioNombre';
        var controllerName = '@HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString().ToLower()';

        var revistaDigital = @Html.Raw(Json.Encode(ViewBag.revistaDigital));

    </script>
</head>
<body>
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManagerBody.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTrackingJetlore.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogSesionMainLayout.cshtml")

    <script type="text/javascript">
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function (searchString, position) {
                position = position || 0;
                return this.indexOf(searchString, position) === position;
            };
        }
    </script>

    <div class="layout-somos-belcorp container-fluid pl-0 pr-0">
        <header class="layout__header row flex-column flex-nowrap justify-content-between justify-content-lg-start justify-content-xl-start align-items-center ml-0 mr-0">
            <div class="row flex-row flex-nowrap justify-content-between justify-content-lg-start justify-content-xl-start align-items-center ml-0 mr-0 mx-auto layout__container">
                <section class="header__icono__menu mostrarEnMobile pl-0 pr-0">
                    <img class="w-100" src="@Url.Content("~/Content/images/mobile/icono-menu-mobile.svg")" alt="Abrir Menú">
                </section>
                <section class="header__marca__pais text-left">
                    @if (System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))
                    {
                        <picture class="d-block w-100">
                            <source media="(min-width: 992px)" srcset="@Url.Content("~/Content/images/Esika/logo_marca_pais_desktop.svg")">
                            <source media="(max-width: 991px)" srcset="@Url.Content("~/Content/images/Esika/logo_marca_pais_mobile.svg")">
                            <img class="logoPaginaResponsive pointer" src="@Url.Content("~/Content/images/Esika/logo_marca_pais_desktop.svg")" alt="Ésika">
                        </picture>
                    }
                    else
                    {
                        <picture class="d-block w-100">
                            <source media="(min-width: 992px)" srcset="@Url.Content("~/Content/images/Lbel/logo_marca_pais.svg")">
                            <img class="logoPaginaResponsive pointer" src="@Url.Content("~/Content/images/Lbel/logo_marca_pais.svg")">
                        </picture>
                    }


                </section>
                @Html.Partial("~/Views/Shared/_MenuPrincipalResponsive.cshtml")
                <section class="row flex-row justify-content-center align-items-center flex-grow-1 header__buscador__productos">
                    @if (ViewBag.MostrarBuscadorYFiltros)
                    {
                        @Html.Partial("~/Views/Shared/_BuscadorResponsive.cshtml")
                    }
                </section>
                @Html.Partial("~/Views/Shared/_MenuSecundarioResponsive.cshtml")
            </div>

            @Html.Partial("~/Areas/Mobile/Views/Shared/VistaParcialMobileMenu/_MenuContenedorOferta.cshtml")
        </header>

        @if (!string.IsNullOrEmpty(ViewBag.Title))
        {
            <section data-layout-content="breadcrumb" 
                     class="row flex-row ml-0 mr-0 layout__view__breadcrumbs__wrapper mostrarEnDesktop">
                <div class="col-12 pl-0 pr-0 mx-auto layout__view__breadcrumbs">
                    <ul class="row flex-row align-items-center ml-0 mr-0 layout__view__lista__breadcrumbs">
                        <li class="layout__view__breadcrumb">
                            <a href="@Url.Action("Index", "Bienvenida")" class="d-block" title="Home">Home</a>
                        </li>
                        <li class="layout__view__breadcrumb layout__view__breadcrumb--active__view">
                            <span class="d-block">@ViewBag.Title</span>
                        </li>
                    </ul>
                </div>
            </section>
        }
        <div data-layout-content="body">
            @RenderBody()
        </div>

        @Html.Partial("~/Views/Shared/_FooterResponsive.cshtml")
    </div>

    <div id="loadingScreen"></div>

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBuscadorResultado.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogMensajes.cshtml")
    @Html.Partial("~/Areas/Mobile/Views/Shared/VistaParcialMobileLayout/_vpLoadingMobile.cshtml")

    <input type="hidden" id="hdCampaniaCodigo" value="@ViewBag.CampaniaCodigo" />
    <input type="hidden" id="hdTipoOfertaFinal" value="@ViewBag.OfertaFinal" />
    <input type="hidden" id="hdTipoCatalogoPersonalizado" value="@ViewBag.CatalogoPersonalizado" />
    <input type="hidden" id="hdFlagOfertaWeb" value="0" />
    <input type="hidden" id="hdFlagOfertaLiquidacion" value="0" />
    <input type="hidden" id="hdFlagValidacion" value="0" />
    <input type="hidden" id="hdFlagValidacionReserva" value="0" />
    <input type="hidden" id="hdEsCatalogoPersonalizadoZonaValida" value="@Convert.ToString(ViewBag.EsCatalogoPersonalizadoZonaValida)" />
    <input type="hidden" id="hdCodigoEstrategia" value="@Util.Trim(ViewBag.CodigoEstrategia)" />

    @RenderSection("css", required: false)

    <script type="text/javascript">
        var formatDecimalPaisMain = '@ViewBag.FormatDecimalPais';
        var viewBagRol = '@ViewBag.Rol';
        var usuarioNombre = '@ViewBag.UsuarioNombre';
        var campaniaCodigo = '@ViewBag.CampaniaCodigo';
        var campaniaAnio = parseInt(parseInt(campaniaCodigo) / 100);
        var campaniaNro = parseInt(campaniaCodigo) - campaniaAnio * 100;
        var sesionEsShowRoom = '@Portal.Consultoras.Web.SessionManager.SessionManager.Instance.GetEsShowRoom().ToString().ToLower()' === 'true';
        var EfectoTutorialSalvavidas = '@ViewBag.Efecto_TutorialSalvavidas';
        var ViewBagEsMobile = '@ViewBag.EsMobile';
        var _ModificacionPedidoProl = '@ViewBag.ModificarPedidoProl';
        var gTipoUsuario = '@ViewBag.TipoUsuario';
        var tokenPedidoAutenticoOk = '@ViewBag.TokenPedidoAutenticoOk';
        var mostrarBannerPostulante = '@ViewBag.MostrarBannerPostulante';
        var MensajePedidoDesktop = '@ViewBag.MensajePedidoDesktop';
        var clock;
        var TipoOrigenPantallaODD = 1;
        var ViewIndicadorGPRSB = '@ViewBag.IndicadorGPRSB';
        var codigoAnclaOdd = '@Constantes.ConfiguracionPais.OfertaDelDia';
        var OrigenDesktopODD = 0;
        var habilitarChatEmtelco = '@ViewBag.HabilitarChatEmtelco';
        var CaracteresBuscador = '@ViewBag.CaracteresBuscador';
        var TotalCaracteresEnListaBuscador = '@ViewBag.CaracteresBuscadorMostrar';
        var TotalResultadosBuscador = '@ViewBag.TotalListadorBuscador';
        var CantidadVecesInicioSesionNovedad = '@ViewBag.CantidadVecesInicioSesionNovedad';
        var NovedadBuscadorVisitasUsuario = '@ViewBag.NovedadBuscador';
        var AplicarLogicaCantidadBotonVerTodos = '@ViewBag.AplicarLogicaCantidadBotonVerTodos'.toLowerCase();

        function ShowLoading() {
            $("#loading-spin").css('visibility', 'visible').fadeIn();
        }

        function CloseLoading() {
            $("#loading-spin").fadeOut("fast", function () {
                if ($.isFunction(LayoutHeader)) LayoutHeader();
            });
        }

    </script>

    @Scripts.Render("~/Bundle/Js/Desktop/JQuery3Js")

    @Scripts.Render("~/Bundle/Js/Mixto/PageResponsive")

    <script type='text/javascript'>
        (function () {
            var proto = document.location.protocol || 'http:';
            var trme = document.createElement('script');
            trme.type = 'text/javascript';
            trme.async = true;
            trme.src = proto + '//trackme-cls1-cgn-bct.i6.inconcertcc.com/inconcert/apps/trackme/js/tm.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(trme, s);
        })();

        function Buscador() {
            location.href = baseUrl + 'Mobile/Buscador';
        }
    </script>


    @RenderSection("scripts", required: false)

    @if (TempData.ContainsKey("PixelCodigoIso"))
    {
        @System.Web.Optimization.Scripts.Render("~/Bundle/Js/Mixto/Login-Header")
        <script>
            var pixelAnalytics = Analytics();
            pixelAnalytics.invocarEventoPixelById('@(TempData["PixelMarcacion"])', '@(TempData["PixelId"])');
        </script>
        @TempData.Remove("PixelCodigoIso");
    }

</body>
</html>