@using Portal.Consultoras.Common

@{
    var origenPedidoWeb = Portal.Consultoras.Common.Constantes.OrigenPedidoWeb.DesktopBuscador;
}

<!DOCTYPE html>
<html lang="es" class="no-js">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=10,chrome=1" />
    <meta name="description" content="Portal de consultoras" />
    <meta name="author" content="Belcorp" />

    <title>Belcorp | Portal Consultoras</title>

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManagerHeader.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_GoogleOptimize.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManager.cshtml")

    @System.Web.Optimization.Styles.Render("~/Bundle/Css/Desktop/Site-Contenedor")

    <link href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i,900" rel="stylesheet" type="text/css">
    @if (System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))
    {
        <link href="@Url.Content("~/Content/Images/Esika/favicon.ico")" rel="shortcut icon" type="image/x-icon" />
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Site-Esika-CssSB2")
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Site-Esika-Contenedor")
    }
    else
    {
        <link href="@Url.Content("~/Content/Images/icons/favicon_lbel.ico")" rel="shortcut icon" type="image/x-icon" />
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Site-Lbel-CssSB2")
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Lbel-Contenedor")
    }
    <link href="@Url.Content("~/Content/Css/Site/calc.css")" rel="stylesheet" type="text/css" />

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpVariablesGeneralesPortal.cshtml")
    <script type="text/javascript">
        var baseUrl = "@Url.Content("~")";
        var isEsika = '@(System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))' == "True";
        //var trackingJetloreAccessToken = '@System.Configuration.ConfigurationManager.AppSettings.Get("TrackingJetloreAccessToken")';
        var tipoOfertaFinalCatalogoPersonalizado = '@Constantes.TipoOfertaFinalCatalogoPersonalizado.Jetlore';
        //var esPaisTrackingJetlore = '@ViewBag.PaisesConTrackingJetlore';
        var indicadorEnviadoDescarga = '@ViewBag.IndicadorEnviado';
        var gTipoUsuario = '@ViewBag.TipoUsuario';
        var IsoPais = '@ViewBag.CodigoISODL';

        //Postulante
        var mostrarBannerPostulante = '@ViewBag.MostrarBannerPostulante';

        //GPR
        var estaRechazado = '@ViewBag.IndicadorGPRSB';
        var cerrarRechazado = '@ViewBag.CerrarRechazado';
        var mostrarBannerRechazo = '@ViewBag.MostrarBannerRechazo';

        //ODD
        var MostrarODD = '@ViewBag.MostrarODD';
        var tieneOfertaDelDia = '@ViewBag.TieneOfertaDelDia';
        // New Chat
        var emt_client_type = '@ViewBag.TipoUsuario';
        var emt_country = '@ViewBag.CodigoISODL';
        var emt_email_address = '@ViewBag.CorreoC';
        var emt_first_name = '@ViewBag.NombreC';
        var emt_id = '@ViewBag.CodigoUsuario';
        var emt_type = '0';
        var emt_device = ' ';
        var emt_default_message = '@Html.Raw(ViewBag.MensajeChat)';
        var habilitarChatEmtelco = '@ViewBag.HabilitarChatEmtelco';
        // New Chat -->
        var mostrarBannerRechazo = '@ViewBag.MostrarBannerRechazo';
        var FechaActual = '@(DateTime.Now.ToString("dd/MM/yyyy"))';

        window.urlLogDynamo = '@System.Configuration.ConfigurationManager.AppSettings["UrlLogDynamo"]';
        window.urlLogElastic = '@System.Configuration.ConfigurationManager.AppSettings["UrlLogElastic"]';
        window.patternElastic = '@System.Configuration.ConfigurationManager.AppSettings["PatternElastic"]';

        // Seteando Controlador y Accion
        @{
            var routeValues = HttpContext.Current.Request.RequestContext.RouteData.Values;
            string ctrl = routeValues.ContainsKey("controller") ? routeValues["controller"].ToString() : "CtrlNoRoute";
            string acti = routeValues.ContainsKey("action") ? routeValues["action"].ToString() : "ActiNoRoute";
        }
        window.controllerName = '@ctrl.ToLower()';
        window.actionName     = '@acti.ToLower()';

        var userData = {
            'aplicacion': '@(Constantes.LogDynamoDB.AplicacionPortalConsultoras)',
            'rol': '@(Constantes.LogDynamoDB.RolConsultora)',
            'campana': '@ViewBag.CampaniaCodigo',
            'region': '@ViewBag.RegionAnalytics',
            'zona': '@ViewBag.ZonaAnalytics',
            'seccion': '@ViewBag.SeccionAnalytics',
            'pais': '@ViewBag.PaisAnalytics',
            'codigoConsultora': '@ViewBag.CodigoConsultoraDL'
        };
        var usuarioNombre = '@ViewBag.UsuarioNombre';
        var controllerName = '@HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString().ToLower()';

        var revistaDigital = @Html.Raw(Json.Encode(ViewBag.revistaDigital));
    </script>
    <style id="styleRelojOdd"></style>
    @RenderSection("styles", required: false)

    @if (TempData.ContainsKey("PixelCodigoIso"))
    {
        <noscript id="noscript-pixel-image"></noscript>
    }
</head>
<body>
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManagerBody.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTrackingJetlore.cshtml")
    @*@if (ViewBag.PaisesConTrackingJetlore == "1")
    {
        <script type="text/javascript" src="https://assets.jetlore.com/js/jltracking.js"></script>
        <script type="text/javascript">
            JL.tracking({
                cid: trackingJetloreAccessToken,
                user_id: '@ViewBag.CodigoConsultoraDL',
                feed_id: 'Belcorp_' + '@ViewBag.CodigoISODL',
            });
        </script>
    }*@

    <script type="text/javascript">
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function (searchString, position) {
                position = position || 0;
                return this.indexOf(searchString, position) === position;
            };
        }
    </script>

    <header>
        @if (ViewBag.MostrarBannerPostulante == true)
        {
            @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBloqueMensajesPostulante.cshtml")
        }
        else if (ViewBag.MostrarBannerRechazo == true)
        {
            @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBloqueMensajesPedido.cshtml")
        }

        @Html.Partial("~/Views/Shared/VistaParcialMenu/_Menu.cshtml")
        @*<div class="clear"></div>
        <div class="wrapper_header wrapper_header_cincuenta_anios_belcorp">
            <div data-menu-header="parte1" class="wrapper_cincuenta_anios_belcorp_y_logo">
                <div class="cincuenta_anios_belcorp">
                    <img src="@Url.Content("~/Content/Images/cincuenta_anios_belcorp_cabecera.png")" alt="" />
                </div>
                <div class="logo_esika">
                    <a class="@ViewBag.ClaseLogoSB" href="@Url.Action("Index", "Bienvenida")"></a>
                </div>
            </div>
            <div data-menu-header="parte2" class="menu_new_esika">
                @Html.Partial("~/Views/Shared/VistaParcialMenu/_Menu.cshtml")
            </div>
            @if (ViewBag.MostrarBuscadorYFiltros)
            {
                <div class="buscador_productos displayBlock">
                    <input type="text" value="" id="CampoBuscadorProductos" class="campo_buscador_productos displayBlock" placeholder="¿Buscas ofertas?" />
                    <a class="enlace_busqueda_productos displayBlock" title="Buscar">
                        <img src="@Url.Content("~/Content/Images/icono_lupa.svg")" alt="Buscar" />
                    </a>
                    <a class="opcion_limpiar_campo_busqueda_productos displayBlock" title="Cerrar" style="display:none;">
                        <img src="@Url.Content("~/Content/Images/icono_limpiar_busqueda.svg")" alt="Cerrar" />
                    </a>
                    <div class="campo_busqueda_fondo_on_focus displayBlock">
                        <div class="franja_blanca"></div>
                    </div>
                    <div class="lista_resultados_busqueda_productos displayBlock text-center">
                        <div class="spinner">
                            <img src="@Url.Content("~/Content/Images/loading_spinner.gif")" alt="" />
                        </div>
                        <div class="busqueda_sin_resultados displayBlock text-center">
                            <div>
                                <div class="icono_busqueda_sin_resultados displayBlock">
                                    <img src="@Url.Content("~/Content/Images/icono_sin_resultados_busqueda.svg")" alt="" />
                                </div>
                                <div class="mensaje_busqueda_sin_resultados displayBlock">
                                    <p class="displayBlock text-bold">
                                        Ups… no tenemos ofertas con este nombre.
                                    </p>
                                    <p class="displayBlock">
                                        Vuelve a intentar.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="resultados_wrapper" id="ResultadoBuscador">
                        </div>
                    </div>
                </div>
            }
            @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpMenuB.cshtml")
            <div class="clear"></div>
        </div>
        <div class="clear"></div>*@
        @Html.Partial("~/Views/Shared/VistaParcialMenu/_MenuContenedorOferta.cshtml")
    </header>

    <div class="fondo_oscuro"></div>
    <style>
        .data-layaout-body {
            width: initial !important;
        }
    </style>
    @{
        string controllerAction = this.ViewContext.RouteData.Values["controller"].ToString() + this.ViewContext.RouteData.Values["action"].ToString();
        controllerAction = controllerAction.ToLower();
    }
    <div id="contentmain" class="content" data-content="" style="margin-top: 113px;">
        <div data-layout-body="" class="data-layaout-body">
            @if (!(controllerAction == "bienvenidaindex"
                    || controllerAction == "showroomindex"
                    || controllerAction == "showroomintriga"
                    || ("/" + controllerAction).Contains("revistadigital")
                    || ("/" + controllerAction).Contains("guianegocio")
                )
                && (@ViewBag.Title != "" && @ViewBag.Title != null))
            {
                <div class="SubHeader">
                    <div class="ubicacion_web">
                        <span><a href="@Url.Action("Index", "Bienvenida")">Home</a></span>
                        <span> | @ViewBag.Title</span>
                    </div>
                </div>
            }

            @RenderBody()

            @if (ViewBag.TerminoMostrar == 1)
            {
                <div class="footerTerminos">
                    <a id="linkTerminosCondicionesShowRoom" onclick="SetMarcaGoogleAnalyticsTermino();" target="_blank">T&eacute;rminos y condiciones</a>
                </div>
            }

            @if (ViewBag.BannerInferior != null)
            {
                @Html.Partial("~/Views/ShowRoom/_BannerInferior.cshtml", (Portal.Consultoras.Web.Models.Estrategia.ShowRoom.BannerInferiorConfiguracion)ViewBag.BannerInferior)
            }

            <hr class="clear" />
            <footer class="footer_e">
                @Html.Partial("~/Views/Shared/VistaParcialMenu/_Footer.cshtml")
            </footer>
        </div>
    </div>

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBuscadorResultado.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpFeDeErratas.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpRegistroComunidad.cshtml")
    
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpInputHiddenSoloDesktop.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpInputHidden.cshtml")
    @*<input type="hidden" id="hdFlagOfertaWeb" value="0" />
    <input type="hidden" id="hdFlagOfertaLiquidacion" value="0" />
    <input type="hidden" id="hdFlagValidacion" value="0" />
    <input type="hidden" id="hdFlagValidacionReserva" value="0" />

    <input type="hidden" id="hdCampaniaCodigo" value="@ViewBag.CampaniaCodigo" />
    <input type="hidden" id="hdTipoOfertaFinal" value="@ViewBag.OfertaFinal" />
    <input type="hidden" id="hdTipoCatalogoPersonalizado" value="@ViewBag.CatalogoPersonalizado" />
    <input type="hidden" id="hdEsCatalogoPersonalizadoZonaValida" value="@Convert.ToString(ViewBag.EsCatalogoPersonalizadoZonaValida)" />
    <input type="hidden" id="hdCodigoEstrategia" value="@Util.Trim(ViewBag.CodigoEstrategia)" />*@

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBannerLateralShowRoom.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogMensajes.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogErrorMainLayout.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogSesionMainLayout.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogMensajePostulante.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogPedidoReservado.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTemplateResumenCampania.cshtml")

    @Html.Partial("~/Views/OfertaDelDia/ofertadeldia-contenedor-template.cshtml")

    @Html.Partial("~/Views/Shared/_template-ofertadeldia-style.cshtml")

    @System.Web.Optimization.Scripts.Render("~/Bundle/Js/Desktop/JQueryJs")

    <script type="text/javascript">
        var formatDecimalPaisMain = '@ViewBag.FormatDecimalPais';
        //var esPaisTrackingJetlore = '@ViewBag.PaisesConTrackingJetlore';
        var viewBagRol = '@ViewBag.Rol';
        var usuarioNombre = '@ViewBag.UsuarioNombre';
        var campaniaCodigo = '@ViewBag.CampaniaCodigo';
        var campaniaAnio = parseInt(parseInt(campaniaCodigo) / 100);
        var campaniaNro = parseInt(campaniaCodigo) - campaniaAnio * 100;
        var sesionEsShowRoom = '@Portal.Consultoras.Web.SessionManager.SessionManager.Instance.GetEsShowRoom().ToString().ToLower()' === 'true';
        var EfectoTutorialSalvavidas = '@ViewBag.Efecto_TutorialSalvavidas';
        var ViewBagEsMobile = '@ViewBag.EsMobile';
        var _ModificacionPedidoProl = '@ViewBag.ModificarPedidoProl';
        var gTipoUsuario = '@ViewBag.TipoUsuario';
        var tokenPedidoAutenticoOk = '@ViewBag.TokenPedidoAutenticoOk';
        var mostrarBannerPostulante = '@ViewBag.MostrarBannerPostulante';
        var MensajePedidoDesktop = '@ViewBag.MensajePedidoDesktop';
        var clock;
        var TipoOrigenPantallaODD = 1;
        var ViewIndicadorGPRSB = '@ViewBag.IndicadorGPRSB';
        var OrigenDesktopODD = 0;
        var CaracteresBuscador = '@ViewBag.CaracteresBuscador';
        var TotalCaracteresEnListaBuscador = '@ViewBag.CaracteresBuscadorMostrar';
        var OrigenPedidoDesktopBuscador = @Constantes.OrigenPedidoWeb.DesktopBuscador;
        var TotalResultadosBuscador = '@ViewBag.TotalListadorBuscador';
    </script>
    @System.Web.Optimization.Scripts.Render("~/Bundle/Js/Desktop/SB2")
    <script type='text/javascript'>
        (function () {
            var proto = document.location.protocol || 'http:';
            var trme = document.createElement('script');
            trme.type = 'text/javascript';
            trme.async = true;
            trme.src = proto + '//trackme-cls1-cgn-bct.i6.inconcertcc.com/inconcert/apps/trackme/js/tm.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(trme, s);
        })();
    </script>

    @RenderSection("scripts", required: false)

    <link href="@Url.Content("~/emt_chat/css/style-client.css")" rel="stylesheet">
    <link rel="stylesheet" href="@Url.Content("~/emt_chat/css/font-awesome.min.css")">

    <div class="CMXD-containment-wrapper"></div>
    <div id="marca">
        <div class="CMXD-btn-help">
            <div id="btn_init" class="CMXD-help"></div>
            <div id="btn_open" class="CMXD-open" style="display: none"></div>
        </div>
        <div class="container-movil"></div>
        <div id="CMXD-container-chat" class="CMXD-container-chat" style="display: none">
            <div class="CMXD-header-chat">
                <i class="fa fa-comments-o" aria-hidden="true"></i>
                CHAT EN LÍNEA
                <div class="CMXD-icons">
                    <a class="display-a" id="btn_minimize" href="">
                        <i class="fa fa-minus" aria-hidden="true"></i>
                    </a>
                    <a class="display-a" id="btn_wClose" href="" style="display: none">
                        <i class="fa fa-times" aria-hidden="true"></i>
                    </a>
                </div>
                <hr class="CMXD-line">
            </div>
            <div id="chat">
                <div id="interaction" class="CMXD-container-welcome" style="display: none">
                    <div class='chat-wrapper'>
                        <div id="transcript" class='chat-message padding container-chat'></div>
                    </div>
                    <div id="slideDownTranscript" class="message-end CMXD-animate2">
                        <span class="fa fa-angle-double-down"></span>
                    </div>
                    <div class="container-txt">
                        <textarea class="txtarea" rows="2" id="Entry" placeholder="Escribe un Mensaje..."></textarea>
                        <a class="" href="">
                            <div class="send send2" id="btn_Send">
                                <i class="fa fa-paper-plane-o" aria-hidden="true"></i><br>Enviar
                            </div>
                        </a>
                    </div>
                </div>
                <div id="loading" class="pop-up">
                    <div class="CMXD-container-welcome">
                        <div class="CMXD-img-welcome">
                            <img id="loading_image" src="" alt="">
                        </div>
                        <div id="loading_title" class="CMXD-welcome"> Bienvenida a nuestro <br>chat en línea </div>
                        <div id="loading_description" class="CMXD-description"> En un momento uno de nuestros asesores estará contigo </div>
                    </div>
                </div>
                <div id="schedule" class="pop-up">
                    <div class="CMXD-container-welcome">
                        <div class="CMXD-img-welcome">
                            <img id="schedule_image" src="" alt="Imagen fuera de horario">
                        </div>
                        <div id="schedule_title" class="CMXD-welcome"> </div>
                        <div id="schedule_description" class="CMXD-description"> </div>
                    </div>
                </div>
                <div id="Error" class="pop-up">
                    <div class="CMXD-container-welcome">
                        <div class="CMXD-img-welcome">
                            <img id="Error_image" src="" alt="">
                        </div>
                        <div class="CMXD-welcome"> Error de conexión </div>
                        <div class="CMXD-description">
                            En estos momentos no es posible establecer conexión. Por favor intenta más tarde. <br /><br />
                            <a href="" class="btn-no display-a" id="btn_mclose"> OK</a>
                        </div>
                    </div>
                </div>
                <div id="alert" class="pop-up">
                    <div class="CMXD-container-welcome">
                        <div class="CMXD-img-welcome">
                            <img id="alert_image" src="" alt="">
                        </div>
                        <div class="CMXD-welcome"> ¿Desea cerrar la sesión de chat? </div>
                        <div class="CMXD-description">
                            <a href="" class="btn-yes display-a" id="btn_close"> Si</a>
                            <a href="" class="btn-no display-a" id="btn_nwClose"> No</a>
                        </div>
                    </div>
                </div>
            </div>
            <div id="poll" class="pop-up">
                <div class="CMXD-container-welcome">
                    <div id="poll_title" class="CMXD-welcome"> <br />Encuesta de Satisfacción </div>
                    <div id="poll_description" class="CMXD-description"> </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="@Url.Content("~/emt_chat/js/gen.js")?v1"></script>

    @if (TempData.ContainsKey("PixelCodigoIso"))
    {
        @System.Web.Optimization.Scripts.Render("~/Bundle/Js/Mixto/Login-Header")
        <script>
            var pixelAnalytics = Analytics();
            pixelAnalytics.invocarEventoPixelById('@(TempData["PixelMarcacion"])', '@(TempData["PixelId"])');
        </script>
        @TempData.Remove("PixelCodigoIso");
    }
</body>
</html>
