@using Portal.Consultoras.Common

<!DOCTYPE html>
<html lang="es" class="no-js">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=10,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Portal de consultoras" />
    <meta name="author" content="Belcorp" />

    <title>Belcorp | Portal Consultoras</title>

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManagerHeader.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_GoogleOptimize.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManager.cshtml")

    @System.Web.Optimization.Styles.Render("~/Bundle/Css/Desktop/Site-Contenedor")

    <link href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i,900" rel="stylesheet" type="text/css">
    @if (System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))
    {
        <link href="@Url.Content("~/Content/Images/Esika/favicon.ico")" rel="shortcut icon" type="image/x-icon" />
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Site-Esika-CssSB2")
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Site-Esika-Contenedor")
    }
    else
    {
        <link href="@Url.Content("~/Content/Images/icons/favicon_lbel.ico")" rel="shortcut icon" type="image/x-icon" />
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Site-Lbel-CssSB2")
        @System.Web.Optimization.Styles.Render("~/Bundle/Css/Mixto/Site-Lbel-Contenedor")
    }
    <link href="@Url.Content("~/Content/Css/Site/calc.css")" rel="stylesheet" type="text/css" />

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpVariablesGeneralesPortal.cshtml")
    <script type="text/javascript">
        var baseUrl = "@Url.Content("~")";
        var isEsika = '@(System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))' == "True";

        var tipoOfertaFinalCatalogoPersonalizado = '@Constantes.TipoOfertaFinalCatalogoPersonalizado.Jetlore';

        var indicadorEnviadoDescarga = '@ViewBag.IndicadorEnviado';
        var gTipoUsuario = '@ViewBag.TipoUsuario';
        var IsoPais = '@ViewBag.CodigoISODL';
        var codigoConsultora = '@ViewBag.CodigoConsultoraDL'; //SALUD-58
        var pseudoParamNotif = '@ViewBag.PseudoParamNotif'; //SALUD-58

        //Postulante
        var mostrarBannerPostulante = '@ViewBag.MostrarBannerPostulante';

        //GPR
        var estaRechazado = '@ViewBag.IndicadorGPRSB';
        var cerrarRechazado = '@ViewBag.CerrarRechazado';
        var mostrarBannerRechazo = '@ViewBag.MostrarBannerRechazo';

        //ODD
        var MostrarODD = '@ViewBag.MostrarODD';
        var tieneOfertaDelDia = '@ViewBag.TieneOfertaDelDia';
        var mostrarBannerSuperiorOdd = '@ViewBag.MostrarBannerSuperiorOdd';
        // New Chat
        var emt_client_type = '@ViewBag.TipoUsuario';
        var emt_country = '@ViewBag.CodigoISODL';
        var emt_email_address = '@ViewBag.CorreoC';
        var emt_first_name = '@ViewBag.NombreC';
        var emt_id = '@ViewBag.CodigoUsuario';
        var emt_type = '0';
        var emt_device = ' ';
        var emt_default_message = '@Html.Raw(ViewBag.MensajeChat)';
        var habilitarChatEmtelco = '@ViewBag.HabilitarChatEmtelco';
        // New Chat -->
        var mostrarBannerRechazo = '@ViewBag.MostrarBannerRechazo';
        var FechaActual = '@(DateTime.Now.ToString("dd/MM/yyyy"))';

        window.urlLogDynamo = '@System.Configuration.ConfigurationManager.AppSettings["UrlLogDynamo"]';
        window.urlLogElastic = '@System.Configuration.ConfigurationManager.AppSettings["UrlLogElastic"]';
        window.patternElastic = '@System.Configuration.ConfigurationManager.AppSettings["PatternElastic"]';

        // Seteando Controlador y Accion
        @{
            var routeValues = HttpContext.Current.Request.RequestContext.RouteData.Values;
            string ctrl = routeValues.ContainsKey("controller") ? routeValues["controller"].ToString() : "CtrlNoRoute";
            string acti = routeValues.ContainsKey("action") ? routeValues["action"].ToString() : "ActiNoRoute";
        }
        window.controllerName = '@ctrl.ToLower()';
        window.actionName     = '@acti.ToLower()';

        var userData = {
            'aplicacion': '@(Constantes.LogDynamoDB.AplicacionPortalConsultoras)',
            'rol': '@(Constantes.LogDynamoDB.RolConsultora)',
            'campana': '@ViewBag.CampaniaCodigo',
            'region': '@ViewBag.RegionAnalytics',
            'zona': '@ViewBag.ZonaAnalytics',
            'seccion': '@ViewBag.SeccionAnalytics',
            'pais': '@ViewBag.PaisAnalytics',
            'codigoConsultora': '@ViewBag.CodigoConsultoraDL'
        };
        var usuarioNombre = '@ViewBag.UsuarioNombre';
        var controllerName = '@HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString().ToLower()';

        var revistaDigital = @Html.Raw(Json.Encode(ViewBag.revistaDigital));
    </script>
    <style id="styleRelojOdd"></style>
    @RenderSection("styles", required: false)

    @if (TempData.ContainsKey("PixelCodigoIso"))
    {
        <noscript id="noscript-pixel-image"></noscript>
    }
</head>
<body>
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTagManagerBody.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTrackingJetlore.cshtml")

    <script type="text/javascript">
        if (!String.prototype.startsWith) {
            String.prototype.startsWith = function (searchString, position) {
                position = position || 0;
                return this.indexOf(searchString, position) === position;
            };
        }
    </script>

    <header>
        @if (ViewBag.MostrarBannerPostulante == true)
        {
            @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBloqueMensajesPostulante.cshtml")
        }
        else if (ViewBag.MostrarBannerRechazo == true)
        {
            @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBloqueMensajesPedido.cshtml")
        }

        @Html.Partial("~/Views/Shared/VistaParcialMenu/_Menu.cshtml")

        @Html.Partial("~/Views/Shared/VistaParcialMenu/_MenuContenedorOferta.cshtml")
    </header>

    <div class="fondo_oscuro"></div>
    @{
        string controllerAction = this.ViewContext.RouteData.Values["controller"].ToString() + this.ViewContext.RouteData.Values["action"].ToString();
        controllerAction = controllerAction.ToLower();
    }
    <div id="contentmain"
         class="content"
         data-content=""
         data-layout="contenido"
         data-layout-body=""
         style="margin-top: 113px;">
        @if (!(controllerAction == "bienvenidaindex"
                || controllerAction == "showroomindex"
                || controllerAction == "showroomintriga"
                || ("/" + controllerAction).Contains("revistadigital")
                || ("/" + controllerAction).Contains("guianegocio")
            )
            && (@ViewBag.Title != "" && @ViewBag.Title != null))
        {
            <div class="SubHeader"
                 data-layout="ubicacionWeb">
                <div class="ubicacion_web">
                    <span><a href="@Url.Action("Index", "Bienvenida")">Home</a></span>
                    <span> | @ViewBag.Title</span>
                </div>
            </div>
            <hr class="clear" />
        }
        <div data-layout="body">
            @RenderBody()
        </div>
        <hr class="clear" />
        <div data-layout="footer">

            @if (ViewBag.TerminoMostrar == 1)
            {
                <div class="footerTerminos">
                    <a id="linkTerminosCondicionesShowRoom" onclick="SetMarcaGoogleAnalyticsTermino();" target="_blank">T&eacute;rminos y condiciones</a>
                </div>
            }

            @if (ViewBag.BannerInferior != null)
            {
                @Html.Partial("~/Views/ShowRoom/_BannerInferior.cshtml", (Portal.Consultoras.Web.Models.Estrategia.ShowRoom.BannerInferiorConfiguracion)ViewBag.BannerInferior)
            }

            <hr class="clear" />
            <footer class="footer_e">
                @Html.Partial("~/Views/Shared/VistaParcialMenu/_Footer.cshtml")
            </footer>
        </div>
    </div>

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBuscadorResultado.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpFeDeErratas.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpRegistroComunidad.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpInputHiddenSoloDesktop.cshtml")
    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpInputHidden.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpBannerLateralShowRoom.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogMensajes.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogErrorMainLayout.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogSesionMainLayout.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogMensajePostulante.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpDialogPedidoReservado.cshtml")

    @Html.Partial("~/Views/Shared/VistaParcialMainLayout/_vpTemplateResumenCampania.cshtml")

    @Html.Partial("~/Views/OfertaDelDia/ofertadeldia-contenedor-template.cshtml")

    @Html.Partial("~/Views/Shared/_template-ofertadeldia-style.cshtml")

    @*INI HD-3693*@
    @Html.Partial("~/Views/Shared/PopupsResponsive/_PopupBloqueoPorSistema.cshtml")
    @*FIN HD-3693*@
    @System.Web.Optimization.Scripts.Render("~/Bundle/Js/Desktop/JQueryJs")

    <script type="text/javascript">
        var formatDecimalPaisMain = '@ViewBag.FormatDecimalPais';
        var viewBagRol = '@ViewBag.Rol';
        var usuarioNombre = '@ViewBag.UsuarioNombre';
        var campaniaCodigo = '@ViewBag.CampaniaCodigo';
        var campaniaAnio = parseInt(parseInt(campaniaCodigo) / 100);
        var campaniaNro = parseInt(campaniaCodigo) - campaniaAnio * 100;
        var sesionEsShowRoom = '@Portal.Consultoras.Web.SessionManager.SessionManager.Instance.GetEsShowRoom().ToString().ToLower()' === 'true';
        var EfectoTutorialSalvavidas = '@ViewBag.Efecto_TutorialSalvavidas';
        var ViewBagEsMobile = '@ViewBag.EsMobile';
        var _ModificacionPedidoProl = '@ViewBag.ModificarPedidoProl';
        var gTipoUsuario = '@ViewBag.TipoUsuario';
        var tokenPedidoAutenticoOk = '@ViewBag.TokenPedidoAutenticoOk';
        var mostrarBannerPostulante = '@ViewBag.MostrarBannerPostulante';
        var MensajePedidoDesktop = '@ViewBag.MensajePedidoDesktop';
        var clock;
        var TipoOrigenPantallaODD = 1;
        var ViewIndicadorGPRSB = '@ViewBag.IndicadorGPRSB';
        var OrigenDesktopODD = 0;
        var CaracteresBuscador = '@ViewBag.CaracteresBuscador';
        var CaracteresBuscadorNumerico = '@ViewBag.CaracteresBuscadorNumerico';
        var TotalCaracteresEnListaBuscador = '@ViewBag.CaracteresBuscadorMostrar';
        var TotalResultadosBuscador = '@ViewBag.TotalListadorBuscador';
        var AplicarLogicaCantidadBotonVerTodos = '@ViewBag.AplicarLogicaCantidadBotonVerTodos'.toLowerCase();
        var MostrarPalabrasMenoresACuatro = '@ViewBag.MostrarPalabrasMenoresACuatro';
    </script>
    @System.Web.Optimization.Scripts.Render("~/Bundle/Js/Desktop/SB2")
    <script type='text/javascript'>
        (function () {
            var proto = document.location.protocol || 'http:';
            var trme = document.createElement('script');
            trme.type = 'text/javascript';
            trme.async = true;
            trme.src = proto + '//trackme-cls1-cgn-bct.i6.inconcertcc.com/inconcert/apps/trackme/js/tm.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(trme, s);
        })();
    </script>

    @RenderSection("scripts", required: false)

    <script type="text/javascript" src="@Url.Content("~/emt_chat/js/inject.js")"></script>

    @System.Web.Optimization.Scripts.Render("~/Bundle/Js/Mixto/Login-Header")
    <script>

        var pixelAnalytics = Analytics({ pixelId : '@Constantes.Facebook.FB_Pixel'});

            @if (TempData.ContainsKey("PixelCodigoIso"))
            {
                @:pixelAnalytics.invocarEventoPixelById('@(TempData["PixelMarcacion"])', '@(TempData["PixelId"])');
                TempData.Remove("PixelCodigoIso");
            }
        pixelAnalytics.invocarPageViewPixelById();
    </script>
    <script type="text/javascript" id="lightning_bolt" src="//cdn-akamai.mookie1.com/LB/LightningBolt.js"></script>

</body>
</html>
