@using Portal.Consultoras.Common
@model Portal.Consultoras.Web.Models.MisReclamosModel

@{
    ViewBag.Title = "Cambios y devoluciones";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<link href="@Url.Content("~/Content/Css/Site/bootstrap/bootstrap-chosen.css")" rel="stylesheet" />

<div class="fondo_f9f9f9">
    <div class="content_belcorp">
        <div class="fondo_negro_lateral"></div>
        <div class="titulo_interiores">
            <span>CAMBIOS</span> Y DEVOLUCIONES
        </div>
    </div>
    <hr class="clear">
    <div class="linea_separadora" style="margin-top:-1px"></div>
</div>
<div class="content_belcorp" style="min-height:600px;">
    <div class="pestana_lbel"></div>
    <div class="texto_titulo_reclamos" id="TituloReclamo">
        Queremos verte siempre satisfecha con nuestros productos y servicio
        <br />
        <span>
            Si tuviste inconvenientes con algún producto y estás dentro del
            <a href="@Model.UrlPoliticaCdr" style="text-decoration: underline; font-weight: bold; display: inline;" target="_blank">plazo permitido</a>
            sigue estos pasos:
        </span>
    </div>
    <div style="display:none;">
        <input type="hidden" name="CDRWebID" id="CDRWebID" value="@Model.CDRWebID" />
        <input type="hidden" id="hdMontoMinimoPedido" value="@Model.MontoMinimo" />
    </div>
    <div class="content_general_reclamos" id="divProcesoReclamo">
        <div id="contenedor_paso" style="display: block;">
            <div id="barra_progreso" class="content_pasos">
                <div class="content_pasos_linea">
                    <div class="multimarca-background-color progreso_pasos"></div>
                </div>
                <div class="paso_reclamo paso_reclamo_1 paso_active_reclamo" id="Selector1" data-paso="1"></div>
                <div class="paso_reclamo paso_reclamo_2" id="Selector2" data-paso="2"></div>
                <div class="paso_reclamo paso_reclamo_3" id="Selector3" data-paso="3"></div>
            </div>
            <div class="content_reclamo" id="Paso1">
                <div class="text-center">
                    <div class="subtitulo_reclamo">¿Con qué producto has tenido el inconveniente?</div>
                    <div class="text-center">
                        @Html.DropDownListFor(model => model.CampaniaID, new SelectList(Model.ListaCampania, "CampaniaID", "NombreCorto", Model.CampaniaID), new { id = "ddlCampania", @class = "select_reclamo", @required = "required" })
                        <input type="hidden" id="txtPedidoID" value="@Model.PedidoID" />
                        <input type="hidden" id="txtNumeroPedido" value="@Model.NumeroPedido" />
                        <input type="hidden" id="txtPrecioUnidad" />
                        <input type="hidden" id="hdImporteTotalPedido" />
                        <input type="hidden" id="hdfCUVDescripcion" />
                        <input type="hidden" id="hdfCUV" value="0" />
                        <select class="elige_num_pedido" id="ddlnumPedido" name="numPedido" required="required" style="display:none;"></select>
                        <div class="contenedor_descripcion_reclamo">
                            <input type="text" placeholder="Ingresa el código o el nombre del producto" data-codigo="" class="descripcion_reclamo campo_deshabilitado" id="ddlCuv" name="txtCUVDescripcion" required="required" autocomplete="off" />
                            <div class="border-radius-4 lista_resultados_busqueda_por_cuv_wrapper">
                                <ul id="ResultadosBusquedaCUV" class="lista_resultados_busqueda_por_cuv"></ul>
                            </div>
                        </div>
                        <div class="rango_reclamo campo_deshabilitado" data-cantidad-contenedor="" id="RangoCantidad">
                            <input type="text" name="Cantidad" id="txtCantidad" data-input="cantidad" value="1" maxlength="2" class="liquidacion_rango_cantidad_pedido ValidaNumeral ValidaPasteNumeral valid" onfocus="SeleccionarContenido(this) ">
                            <div class="liquidacion_rango_right_pedido">
                                <a class="mas" onclick="javascript:EstrategiaAgregarModule.AdicionarCantidad(event)"><img src="/Content/Images/Esika/mas.png" alt=""></a>
                                <a class="menos" onclick="javascript:EstrategiaAgregarModule.DisminuirCantidad(event)"><img src="/Content/Images/Esika/menos.png" alt=""></a>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="clear" />
                <div>
                    <div class="content_motivo_wrapper">
                        <div class="content_motivo_select" id="divMotivo"></div>
                        <div class="clear"></div>
                    </div>
                </div>
                <div class="text-center">
                    <button type="button" class="border-radius-4 text-bold btn_cdr btn_ir_paso_2" id="IrPAso2">Siguiente</button>
                </div>
                <br />
            </div>
            <div class="text-center content_reclamo" id="Paso2" style="display: none; max-width: 890px;">
                @*<div class="content_reclamo" id="Cambio1" style="display: none; max-width: 890px;">
                    </div>*@
                <div class="subtitulo_reclamo">Escoge una solución</div>
                <div id="divOperacion" class="text-center lista_opciones_cdr_wrapper">
                </div>
                <div id="infoOpcionesDeCambio" class="text-center" style="display:none;">
                    <div id="OpcionCambioPorOtroProducto" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <!-- INFORMACIÓN CUANDO SE SELECCIONA LA OPCIÓN DE CAMBIAR POR OTRO PRODUCTO -->
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--cambiarPorOtroProducto">
                            <p>
                                Puedes cambiarlo por otro producto(s) cuyo monto sea mayor o igual al que reclamas (
                                <span id="spnSimboloMonedaReclamo">S/.</span>
                                <span id="spnMontoMinimoReclamoFormato">15</span>)
                            </p>
                            <p class="text-bold">
                                Búscalo en tus catálogos de Campaña
                                <span id="spnNumeroCampaniaReclamo">15</span>:
                            </p>
                            @*Valores de la parametría*@
                            <input type="hidden" id="hdMontoMinimoReclamo" />
                            <input type="hidden" id="hdCuvPrecio2">
                            <input type="hidden" id="hdParametriaCdr" value="0">
                            <input type="hidden" id="hdParametriaAbsCdr" value="1">
                            <input type="hidden" id="hdCdrWebDatos_Ssic">
                            <div id="contenedorCuvTrueque">

                            </div>
                            <button type="button" name="Agregar" class="d-block border-radius-4 text-bold text-uppercase btn_cdr btn_agregar_mas_productos_a_cambiar" onclick="AgregarCUVTrueque();">
                                <span><img src="@Url.Content("~/Content/Images/icono_plus.svg")" alt="Agregar productos" /></span>
                                <span>Agregar más productos</span>
                            </button>
                            <div id="MontoTotalProductoACambiar" class="text-bold total_precio_reclamo" style="display:none;">
                                <input type="hidden" id="hdImporteTotal2" />
                                Total:
                                <span id="spnImporteTotal2"></span>
                            </div>
                        </div>
                        <!-- FIN - INFORMACIÓN CUANDO SE SELECCIONA LA OPCIÓN DE CAMBIAR POR OTRO PRODUCTO -->
                    </div>
                    <div id="OpcionCambioMismoProducto" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--cambioMismoProducto">
                            <p class="text-bold">Vamos a reenviarte el mismo producto:</p>
                            <p class="text-bold">
                                <span id="spnDescProdDevolucionC" class="text-bold producto_nom"></span>
                                <span id="spnCantidadC" class="text-bold cantidad_und_producto">x Unidades</span>
                            </p>
                        </div>
                    </div>
                    <div id="OpcionEnvioDelProducto" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--envioProducto">
                            <p class="text-bold">Vamos a enviarte el siguiente producto:</p>
                            <p class="text-bold">
                                <span class="text-bold producto_nom" id="spnDescripcionProductoOpcionF"></span>
                                <span id="spnCantidadF">x Unidades</span>
                            </p>
                        </div>
                    </div>
                    <div id="OpcionDevolucionDinero" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--devolucionDinero">
                            <p class="text-bold">Vamos a descontar el siguiente producto en tu próximo pedido:</p>
                            <p class="text-bold">
                                <span class="text-bold producto_nom" id="spnDescripcionProductoOpcionG"></span>
                                <span id="spnCantidadG">x Unidades</span>
                            </p>
                        </div>
                    </div>
                    <div id="OpcionDevolucion" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <!-- INFORMACIÓN CUANDO SE SELECCIONA LA OPCIÓN DE DEVOLUCIÓN Y EL PRODUCTO FORMA PARTE DE UN SET -->
                        <div id="divDevolucionSetsOrPack" class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--devolucionCasoSetProducto">
                        </div>
                        <!-- FIN - INFORMACIÓN CUANDO SE SELECCIONA LA OPCIÓN DE DEVOLUCIÓN Y EL PRODUCTO FORMA PARTE DE UN SET -->
                    </div>
                </div>
                <div id="MensajeTenerEncuenta" class="info_devolucion_a_tener_en_cuenta">
                    <div class="info_devolucion_a_tener_en_cuenta_mensaje">
                        <span style="margin-bottom: 10px; display: block">TENER EN CUENTA: </span>
                        <span id="spnMensajeTenerCuenta"></span>
                    </div>
                </div>
                <div class="text-center">
                    <a id="btnIrPaso3" class="border-radius-4 text-bold btn_cdr btn_solucion_reclamo" href="javascript:void(0);" style="display:none;" onclick="IrAFinalizar()">Siguiente</a>
                    <a id="btnRegresarPasoUno" class="enlace__regresar_paso_anterior" title="Regresar a paso anterior">
                        <span class="icono_back_arrow">
                            <img src="@Url.Content("~/Content/Images/icono_volver.svg")" alt="Regresar a paso anterior" />
                        </span>
                        <span class="text-bold">Regresar a paso anterior</span>
                    </a>
                </div>
            </div>
            <div class="content_reclamo" id="Paso3" style="display: none;">
                <div class="subtitulo_reclamo" style="margin-bottom: 0">Revisa el resumen, finaliza y envía tu solicitud</div>
                <div class="texto_reclamo" style="font-size: 13px; margin-top: 0;">
                    Asegúrate tener todos los incovenientes registrados porque
                    <b>sólo puedes hacer @Model.CantidadReclamosPorPedido solicitud web por pedido</b>
                </div>
                <div>
                    <div class="content_listado_reclamo content_listado_reclamo--header">
                        <div class="text-bold listado_producto_reclamo">PRODUCTO</div>
                        <div class="text-bold listado_solicitud_reclamo text-center">SOLICITUD</div>
                        <div class="text-bold listado_solicitada_reclamo">SOLUCION SOLICITADA</div>
                        <div class="text-bold listado_eliminar_reclamo">ELIMINAR</div>
                    </div>
                    <div id="divDetallePaso3">
                    </div>
                </div>

                @if (Model.TieneCDRExpress)
                {
                    <div id="TipoDespacho">
                        <div class="content_tipo_despacho">
                            <div style="padding-bottom:10px">
                                <div id="btnDespachoNormal" class="cdr_tipo_despacho_icono_active"></div>
                                <div id="divDespachoNormal" class="cdr_tipo_despacho_contenido">
                                    <span style="font-weight:bold;">@Model.MensajesExpress.RegularPrincipal</span>
                                    <span>@Model.MensajesExpress.RegularAdicional</span>
                                </div>
                            </div>
                            <div style="padding-bottom:10px">
                                <div id="btnDespachoExpress" class="cdr_tipo_despacho_icono"></div>
                                <div id="divDespachoExpress" class="cdr_tipo_despacho_contenido">
                                    <span style="font-weight:bold;">@Model.MensajesExpress.ExpressPrincipal</span>
                                    @if (!string.IsNullOrEmpty(Model.MensajesExpress.ExpressFlete))
                                    {
                                        <span>@Model.MensajesExpress.ExpressFlete</span>}
                                    @if (Model.EsConsultoraNueva)
                                    {
                                        <span style="color:red;">@Model.MensajesExpress.Nuevas</span>}
                                    <br />
                                    <span>@Model.MensajesExpress.ExpressAdicional</span>
                                </div>
                            </div>
                        </div>
                    </div>
                }

                <div style="display:none;">
                    <input type="hidden" id="hdTieneCDRExpress" value="@(Model.TieneCDRExpress ? 1 : 0)" />
                    <input type="hidden" id="hdFleteDespacho" value="@Model.FleteDespacho" />
                </div>
                <div class="subtitulo_listado">VALIDA TUS DATOS</div>
                <div class="texto_valida_datos">En caso de necesitar contactarnos contigo, lo haremos a través de:</div>
                <div class="text-center validacion_datos_wrapper">
                    <div class="validacion_datos_correo_electronico">
                        <div>
                            <input type="text" name="txtEmail" id="txtEmail" value="@Model.Email" class="border-radius-4 correo_reclamo" onkeydown="return limitarMaximo(event,this.value,100,'txtTelefono')" />
                            <span class="text-left texto_correo">Correo Electrónico</span>
                        </div>
                        <input type="hidden" id="hdEmail" value="@Model.Email" />
                        <br />
                        <div class="correo_reclamo_error">
                            <span id="spnEmailError" style="display: none;">
                                *Correo Electrónico incorrecto
                            </span>
                        </div>
                    </div>
                    <div class="validacion_datos_celular_contacto">
                        <div>
                            <input type="text" name="txtTelefono" id="txtTelefono" value="@Model.Telefono" class="border-radius-4 correo_reclamo" onkeydown="return limitarMaximo(event,this.value,@Model.limiteMaximoTelef,'txtTelefono')" />
                            <span class="text-left texto_correo">Celular de contacto</span>
                        </div>
                        <input type="hidden" id="hdTelefono" value="@Model.Telefono" />
                        <br />
                        <div class="correo_reclamo_error">
                            <span id="spnTelefonoError" style="display: none;">
                                *Teléfono incorrecto
                            </span>
                        </div>
                    </div>
                </div>
                <hr class="clear" />
                <div class="politica_reclamos">
                    <div id="btnAceptoPoliticas" class="politica_reclamos_icono"></div>
                    <div class="politica_reclamos_texto">
                        <a href="@Model.UrlPoliticaCdr" target="_blank" style="display: inline;">Acepto la política de cambios y devoluciones</a>
                    </div>
                </div>
                <div class="text-right">
                    <a class="border-radius-4 btn_agrega_otro_reclamo" id="IrSolicitudInicial">AGREGA OTRO PRODUCTO A LA SOLICITUD</a>
                    <a class="border-radius-4 multimarca-background-color btn_si_stock_cdr" href="javascript:;" style="width: 296px; margin-top: 2px;" id="IrSolicitudEnviada">FINALIZA Y ENVÍA TU SOLICITUD</a>
                </div>
                <hr class="clear" />
            </div>
        </div>
        <div class="UltimasSolicitudes" id="divUltimasSolicitudes" style="display: none; overflow: auto; max-height: 550px;">
            <div class="titulo_ultimo_soli">Mi solicitud</div>
            <div class="texto_solicitud_ultima">
                <span id="spnCantidadUltimasSolicitadas">3</span> productos agregados:
            </div>
            <br />
            <div id="divDetalleUltimasSolicitudes" class="detalle_solicitudes_wrapper">
            </div>
            <a class="btn_ver_solicitudes" id="btn_ver_solicitudes btn_ver_solicitudes--paso3" href="javascript:void(0);" onclick="CambiarVistaPaso(reclamo.pasos.tres_finalizar_envio_solicitud);" style="width:100px;margin-top:11px;">IR AL FINAL</a>
        </div>

    </div>

    <div class="content_reclamo" id="SolicitudEnviada" style="display:none;  margin-right: auto;">
        <br />
        <br />
        <div class="icono_mensaje_alerta icono_check_alerta icono_check_alerta--paso3"></div>
        <div class="texto_mensaje_alerta" id="mensaje_exclamacion_titulo">
            ¡SOLICITUD
            <b> ENVIADA</b>!
        </div>
        <div class="sub_texto_alerta" id="mensaje_exclamacion_texto">Vamos a evaluarla y en un plazo de 30 minutos te enviaremos una respuesta a tu correo electrónico</div>
        <div class="content_btn_imprimir">
            <a class="btn_imprimir_reclamo" href="javascript:printElement('.content_sombra_reclamo')">
                <div class="icono_imprimir_reclamo"></div>IMPRIMIR SOLICITUD
            </a>
        </div>
        <hr class="clear" />
        <br />
        <div class="content_sombra_reclamo">
            <div class="subtitulo_reclamo" style="font-weight:400; font-size:21px;">Solicitud de Cambios y Devoluciones</div>
            <hr class="clear" />
            <div style="text-align:center;">
                <div class="detalle_estado_reclamo">
                    Fecha:
                    <b> <span id="spnSolicitudFechaCulminado">10 Oct 2016</span> </b>
                </div>
                <div class="detalle_estado_reclamo">
                    Solicitud:
                    <b> Nº <span id="spnSolicitudNumeroSolicitud">12345678</span></b>
                </div>
                <div class="detalle_estado_reclamo">
                    Campaña:
                    <b> <span id="spnSolicitudCampania">2016-15</span></b>
                </div>
            </div>
            <div id="spnTipoDespacho" class="detalle_estado_reclamo" style="width:100%;text-align:center;border-right: 0px solid black; margin-bottom: 10px;">
            </div>
            <div class="linea_separadora"></div>
            <div class="grilla_detalle_reclamo">
                <div class="content_listado_reclamo">
                    <div class="listado_producto_reclamo text_gris_reclamo">PRODUCTO</div>
                    <div class="listado_solicitud_reclamo listado_solicitud_reclamo--paso3 text_gris_reclamo">SOLICITUD</div>
                    <div class="listado_solicitada_reclamo text_gris_reclamo">SOLUCION SOLICITADA</div>
                </div>
                <div id="divDetalleEnviar">
                </div>
            </div>
        </div>
        <a class="btn_ver_solicitudes" href="@Url.Action("Index")" id="IrDetalleSolicitudes">VER TUS SOLICITUDES</a>
    </div>

</div>
<div class="mensaje_alerta_belcorp" id="divPopupPedido" style="display: none;">
    <div class="content_mensaje_alerta">
        <a class="btn_cerrar_alerta" href="javascript:;" onclick="javascript: $('#divPopupPedido').hide();"><img src="/Content/Images/cerrar_04.png"></a>
        <hr class="clear">
        <div class="icono_mensaje_alerta icono_exclamacion_alerta"></div>
        <div class="texto_mensaje_alerta" id="mensaje_exclamacion_titulo02">
            ELIGE UN
            <b>PEDIDO</b>
        </div>
        <div class="sub_texto_alerta" id="mensaje_exclamacion_texto02">Selecciona el pedido en el cual deseas aplicar la solicitud</div>
        <div class="content_botones_pedido" id="divPedido">
        </div>
    </div>
</div>

@*HD-3412 EINCA*@
<div class="contenedor_popup_general" id="divConfirmEnviarSolicitudCDR" style="display:none;">
    <div class="popup_general">
        <div class="btn_cerrar_popup_general">
            <a href="javascript:;" onclick="CancelarConfirmEnvioSolicitudCDR();">
                <img src="@Url.Content("~/Content/Images/btn_cerrar_popup.svg")" alt="Cerrar" />
                <span class="texto_btn_cerrar">CERRAR</span>
            </a>
        </div>
        <div class="contenido_popUp contenido_popUp_general">
            <span class="mensaje_popup_general">
                Asegúrate de tener todos los incovenientes registrados <strong>porque s&oacute;lo puedes hacer <span id="txtCantidadPedidoConfig"></span> solicitud web por pedido.</strong><br /><br />
                ¿Deseas continuar?
            </span>
            <div class="grupo_botones_popup_general">
                <button type="button" name="btn_accion_secundaria" class="btn_accion_secundaria" onclick="CancelarConfirmEnvioSolicitudCDR();">
                    Cancelar
                </button>
                <button type="button" name="btn_accion_principal" class="btn_accion_principal" onclick="ContinuarConfirmEnvioSolicitudCDR();">
                    Si, continuar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="template-cuv-cambio" style="display:none;">
    <div class="item-producto-cambio">
        <div class="text-center opcion_cdr_seleccionada_campos_busqueda_producto_a_cambiar">
            <input type="text"
                   onkeyup="BuscarInfoCUV(event);"
                   class="ValidaNumeral ValidaPasteNumeral cls-producto-codigo border-radius-4 opcion_cdr_seleccionada_campo_busqueda opcion_cdr_seleccionada_campo_busqueda--codigo"
                   maxlength="5"
                   data-codigo=""
                   name="codigo"
                   placeholder="Código" />
            <input type="text"
                   class="border-radius-4 opcion_cdr_seleccionada_campo_busqueda opcion_cdr_seleccionada_campo_busqueda--descripcion"
                   name="descripcion"
                   data-descripcion=""
                   readonly
                   placeholder="Descripción del producto" />
            <input type="text"
                   class="border-radius-4 opcion_cdr_seleccionada_campo_busqueda opcion_cdr_seleccionada_campo_busqueda--precio"
                   name="precio"
                   data-precio=""
                   readonly
                   placeholder="Precio" />
            <div class="contenedor-cantidad border-radius-4 opcion_cdr_seleccionada_campo_busqueda opcion_cdr_seleccionada_campo_busqueda--seleccionCantidad" data-cantidad-contenedor="">
                <input type="text"
                       name="cantidad"
                       data-input="cantidad"
                       data-cantidad=""
                       value="1"
                       maxlength="2"
                       onchange="CalcularTotal();"
                       class="liquidacion_rango_cantidad_pedido ValidaNumeral ValidaPasteNumeral valid">
                <div class="liquidacion_rango_right_pedido">
                    <a class="mas modificarPrecioMas" onclick="AgregarODisminuirCantidad(event,1)"><img src="/Content/Images/Esika/mas.png" alt=""></a>
                    <a class="menos modificarPrecioMenos" onclick="AgregarODisminuirCantidad(event,2)"><img src="/Content/Images/Esika/menos.png" alt=""></a>
                </div>
            </div>
            <button type="button" name="Eliminar" class="border-radius-4 btn_eliminar_trueque" onclick="EliminarCUVTrueque(this);">
                <img src="/Content/Images/Esika/icons-trash.svg" alt="Eliminar Cuv Trueque" />
            </button>
        </div>
    </div>
</div>



<div id="alertEMailDialogMensajes" style="display: none;">
    <div class="terminos_title_2">MENSAJE</div>
    <div class="linea_superior margin_10"></div>
    <div class="pop_pedido_mensaje"></div>
</div>


<script id="template-listado-cuv" type="text/x-handlebars-template">
    {{#each this as |item|}}
    <li onclick="SeleccionarCUVBusqueda(event);" class="resultado_busqueda_por_cuv" data-value-cantidad="{{item.Cantidad}}" data-value-producto="{{item.DescripcionProd}}" data-value-cuv="{{item.CUV}}">
        <div class="resultado_busqueda_por_cuv_enlace" title="{{item.DescripcionProd}}">
            <div class="resultado_busqueda_por_cuv_datos_imagen">
                <img src="/Content/Images/oferta-sin-imagen-sin-fondo.svg" alt="{{item.DescripcionProd}}">
            </div>
            <div class="resultado_busqueda_por_cuv_datos_prod">
                <div class="resultado_busqueda_por_cuv_codigo_prod">{{item.CUV}}</div>
                <div class="resultado_busqueda_por_cuv_descrip_prod">{{item.DescripcionProd}}</div>
            </div>
        </div>
    </li>
    {{/each}}
</script>

<script id="template-pedido" type="text/x-handlebars-template">
    {{#each this as |item|}}
    <a class="btn_pedido_white" data-pedido-id="{{item.PedidoID}}" id="{{item.PedidoID}}" onclick="PopupPedidoSeleccionar(this);">
        <b>N° {{item.NumeroPedido}}</b><br />Fecha: {{DateTimeToStringFormat item.FechaRegistro}}
    </a>
    {{/each}}
</script>
<script id="template-motivo" type="text/x-handlebars-template">
    <div class="subtitulo_reclamo subtitulo_reclamo_motivo">¿Cuál fue el inconveniente?</div>
    {{#each this as |item|}}
    <div class="reclamo_motivo_select" id="{{item.CodigoReclamo}}">{{item.DescripcionReclamo}}</div>
    {{/each}}
</script>
<script id="template-operacion" type="text/x-handlebars-template">
    <ul class="text-center lista_opciones_cdr">
        {{#each this as |item|}}
        <li class="opcion_cdr border-radius-4">
            <a title="{{item.CDRTipoOperacion.DescripcionOperacion}}" class="text-center opcion_cdr_enlace">
                <div class="opcion_cdr_icono_wrapper">
                    {{#if_eq item.CodigoOperacion 'D'}}
                    <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'T'}}
                    <img src="@Url.Content("~/Content/Images/opcion_cambio_otro_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'C' }}
                    <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'F' }}
                    <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'G' }}
                    <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{/if_eq}}
                </div>
                <div class="text-bold opcion_cdr_seleccion_wrapper">
                    <input id="{{item.CodigoOperacion}}" style="display:none!important;" type="checkbox" onchange="EscogerSolucion(this,event)" data-tipo="{{item.Tipo}}">
                    {{item.CDRTipoOperacion.DescripcionOperacion}}
                    <label for="{{item.CodigoOperacion}}" class="border-radius-4 opcion_cdr_checkbox">
                    </label>
                </div>
            </a>
        </li>
        {{/each}}
    </ul>

</script>
<script id="template-confirmacion" type="text/x-handlebars-template">
    {{#iff CUV2 '!=' ''}}
    <div class="content_resumen_cambio">
        {{else}}
        <div>
            {{/iff}}
            <div class="titulo_resumen">{{DescripcionConfirma}}:</div>
            <div class="descri_producto_reclamo">
                {{CUV}}
                <br />
                <b>{{DescripcionProd}}</b>
                <br />
                x{{Cantidad}} unidades
            </div>
        </div>
        {{#IsNullOrEmpty CUV2  '!=' }}
        <div class="indicador_reclamo"></div>
        <div class="content_resumen_cambio">
            <div class="titulo_resumen">{{DescripcionConfirma2}}:</div>
            <div class="descri_producto_reclamo">
                {{CUV2}}
                <br />
                <b>{{DescripcionProd2}}</b>
                <br />
                x{{Cantidad2}} unidades
            </div>
        </div>
        {{/IsNullOrEmpty}}
    </div>
</script>
<script id="template-detalle-paso3" type="text/x-handlebars-template">
    {{#each detalle as |item|}}
    <div class="content_listado_reclamo content_listado_reclamo--content" data-item="{{item.CUV}}">
        <div style="display:none;">
            <input type="hidden" name="id" value="{{item.CDRWebDetalleID}}" />
        </div>
        <div class="listado_producto_reclamo">
            {{#if_eq item.GrupoID ''}}
            <br />

            {{else}}
            <div class="text-bold text-center tag_sb tag_sb--standard">Set o Pack</div><br />
            {{/if_eq}}
            {{item.CUV}}
            <br />
            <b>{{item.Descripcion}}</b>
            <br />
            {{item.Cantidad}} unidades
            <br />
            Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio}}
        </div>
        <div class="listado_solicitud_reclamo text-center">
            <div class="listado_solicitud_reclamo_icono_solucion">
                {{#if_eq item.CodigoOperacion 'D'}}
                <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'T'}}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_otro_producto_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'C' }}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'F' }}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'G' }}
                <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{/if_eq}}
            </div>
            <div class="text-center text-bold listado_solicitud_reclamo_descrip_solucion">
                {{item.Solicitud}}
            </div>
        </div>
        <div class="listado_solicitada_reclamo">
            {{#if_eq CodigoOperacion 'C'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'D'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'F'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'G'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'T'}}
            {{#if item.DetalleReemplazo}}
            {{#each item.DetalleReemplazo as |subItem|}}
            <div>
                {{subItem.CUV}}
                <br />
                <b>{{subItem.Descripcion}}</b>
                <br />
                {{subItem.Cantidad}} unidades
                <br />
                Costo: {{SimboloMoneda}} {{subItem.PrecioFormato}}
            </div>
            {{/each}}
            <div class="text-bold">Total: {{SimboloMoneda}} {{DecimalToStringFormat item.Total}}</div>
            {{else}}
            {{item.CUV2}}
            <br />
            <b>{{item.Descripcion2}}</b>
            <br />
            {{item.Cantidad2}} unidades
            <br />
            Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio2}}
            {{/if}}
            {{else}}

            {{/if_eq}}
        </div>
        <div class="listado_eliminar_reclamo">
            <a data-pedidodetalleid="{{item.CDRWebDetalleID}}" data-detalle-grupoid="{{item.GrupoID}}" href="javascript:void(0);" onclick="EliminarDetalle(this);" style="background-image: url('/Content/Images/Esika/icons-trash.svg'); background-repeat:no-repeat; width: 22px; height: 22px; margin: 0 auto;" title="Eliminar"></a>
        </div>
        <div class="border-radius-4 tooltip_confirmacion_eliminacion_producto_grilla">
            <p id="EliminarProductoMsg" class="tooltip_informacion_eliminacion_producto_texto">¿Quieres eliminar este producto de tu solicitud?</p>
            <div class="tooltip_acciones_eliminacion_producto">
                <a title="No, gracias" class="text-bold enlace_tooltip_informacion">No, gracias</a>
                <button type="button" class="border-radius-4 default-background-color btn_accion_principal btn_acciones--eliminar">Si, eliminar</button>
            </div>
        </div>
    </div>
    {{/each}}
</script>
<script id="template-detalle-paso3-enviada" type="text/x-handlebars-template">
    {{#each detalle as |item|}}
    <div class="content_listado_reclamo" data-item="{{item.CUV}}">
        <div style="display:none;">
            <input type="hidden" name="id" value="{{item.CDRWebDetalleID}}" />
        </div>
        <div class="listado_producto_reclamo">
            {{#if_eq item.GrupoID ''}}

            {{else}}
            <div class="text-bold text-center tag_sb tag_sb--standard">Set o Pack</div><br />
            {{/if_eq}}
            {{item.CUV}}
            <br />
            <b>{{item.Descripcion}}</b>
            <br />
            {{item.Cantidad}} unidades
            <br />
            Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio}}
        </div>
        <div class="listado_solicitud_reclamo text-center">
            <div class="listado_solicitud_reclamo_icono_solucion">
                {{#if_eq item.CodigoOperacion 'D'}}
                <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'T'}}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_otro_producto_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'C' }}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'F' }}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{else if_eq item.CodigoOperacion 'G' }}
                <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono opcion_cdr_icono--solicitudReclamo" />
                {{/if_eq}}
            </div>
            <div class="text-center text-bold listado_solicitud_reclamo_descrip_solucion">
                {{item.Solicitud}}
            </div>
        </div>
        <div class="listado_solicitada_reclamo">
            {{#if_eq CodigoOperacion 'C'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'D'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'F'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'G'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'T'}}
            {{#if item.DetalleReemplazo}}
            {{#each item.DetalleReemplazo as |subItem|}}
            {{subItem.CUV}}
            <br />
            <b>{{subItem.Descripcion}}</b>
            <br />
            {{subItem.Cantidad}} unidades
            <br />
            Costo: {{SimboloMoneda}} {{subItem.PrecioFormato}}
            <br />
            {{/each}}
            <br />
            Total: {{SimboloMoneda}} {{DecimalToStringFormat item.Total}}
            {{else}}
            {{item.CUV2}}
            <br />
            <b>{{item.Descripcion2}}</b>
            <br />
            {{item.Cantidad2}} unidades
            <br />
            <br />
            Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio2}}
            {{/if}}
            {{else}}

            {{/if_eq}}
        </div>
    </div>
    {{/each}}
</script>
<script id="template-detalle-banner" type="text/x-handlebars-template">
    {{#each this as |item|}}
    <div class="content_ultima_soli">
        <div class="float_left" style="width:88%;padding-right:5px;">
            <div class="texto_solicitud_ultima">
                {{item.CUV}}
                <br />
                {{item.Descripcion}}
                <br />
                {{item.Cantidad}} unidades
            </div>
        </div>
        <div class="float_left">
            <a data-accion="x" data-detalle-grupoid="{{item.GrupoID}}" data-pedidodetalleid="{{item.CDRWebDetalleID}}" href="javascript:void(0);" onclick="EliminarDetalle(this);" style="background-image: url('/Content/Images/Esika/tacho-copy.png');background-repeat:no-repeat;width: 17px;height: 22px;margin: 0 auto; opacity:0.5;" title="Eliminar"></a>
        </div>
    </div>
    {{/each}}
</script>

@*HD-3703 EINCA*@
<script id="template-opcion-devolucion" type="text/x-handlebars-template">
    <div>
        {{#if DataRespuestaServicio}}
        <p class="text-bold">
            El producto
            <span class="text-bold producto_set_nom">{{ProductoSeleccionado.CUV}} - {{ProductoSeleccionado.Descripcion}} (<span id="spnCantidadDVarios">x Unidades</span> </span>) pertenece al pack:
        </p>
        <p class="text-left producto_set_lista">
            {{#each DataRespuestaServicio as |item|}}
            <span class="text-bold">{{item.cuv}} - {{item.descripcion}}</span>
            {{/each}}
        </p>
        <div class="text-center text-bold opcion_cdr_seleccionada_terminos_entrega_producto_set_wrapper">
            <input id="TerminosEntregaProductoSet" checked style="display:none!important;" type="checkbox" disabled="disabled">
            <label for="TerminosEntregaProductoSet" class="border-radius-4 opcion_cdr_checkbox opcion_cdr_checkbox--terminosEntregaProductoSet">
            </label>
            <span class="text-left default-color opcion_cdr_seleccionada_terminos_entrega_producto_texto">
                Recuerda al devolver el producto se deberá entregar<br />
                <span class="text-uppercase">todos los productos que contiene el pack </span> mencionado.
            </span>
        </div>
        {{else}}
        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--envioProducto">
            <p class="text-bold">Vas a devolver el siguiente producto:</p>
            <p class="text-bold">
                <span class="text-bold producto_nom" id="spnDescripcionProductoOpcionD">{{ProductoSeleccionado.CUV}} - {{ProductoSeleccionado.Descripcion}}</span>
                <span id="spnCantidadIndividual">x Unidades</span>
            </p>
        </div>
        {{/if}}
    </div>
</script>

@section scripts{

    <script type="text/javascript">
        var imgCheck = '@Url.Content("~/Content/Images/Esika/paso_realizado.png")';
        var imgPasos = '@Url.Content("~/Content/Images/Esika/{0}.png")';
        var urlRegresar = '@Url.Action("Index", "MisReclamos")';
        var urlRegresarReclamo = '@Url.Action("Reclamo", "MisReclamos")';

        var mensajeGestionCdrInhabilitada = '@Html.Raw(Model.MensajeGestionCdrInhabilitada)';
        var mensajeCdrFueraDeFechaCompleto = '@Html.Raw(Constantes.CdrWebMensajes.FueraDeFecha + " " + Constantes.CdrWebMensajes.ContactateChatEnLinea)';
        var CantidadReclamosPorPedidoConfig = '@Html.Raw(Model.CantidadReclamosPorPedido)';

        var OrigenCDR = false;
    </script>
    <script src="@Url.Content("~/Scripts/PortalConsultoras/MisReclamos/Reclamo.js")?v5"></script>
    <script src="@Url.Content("~/Scripts/PortalConsultoras/EstrategiaAgregar/EstrategiaAgregar.js")?v1"></script>
}

