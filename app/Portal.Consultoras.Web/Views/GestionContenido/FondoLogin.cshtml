@model Portal.Consultoras.Web.Models.FondoLoginModel
@{
    ViewBag.Title = "Edición de Fondo de Pantalla Login";
}

<script type="text/javascript">

    jQuery(document).ready(function () {
        $(".qq-upload-list").css("display", "none");
    });

    function OnSuccess(result) {
        alert(result.message);
    }
    function AbrirSplash() {
        waitingDialog({});
    }

    function CerrarSplash() {
        closeWaitingDialog();
    }
</script>
@using (Ajax.BeginForm("Update", new AjaxOptions { HttpMethod = "Post", OnSuccess = "OnSuccess", OnBegin = "AbrirSplash()", OnComplete = "CerrarSplash()" }))
{
    <div class="wrap_cab">

        <div class="filtros2">
            <div class="elements">
                <div class="div-2">
                    <h1>Edición de <span>Fondo de Pantalla Login</span></h1>
                </div>
                <div class="div-3">

                    <div class="fondo_left">
                        <h3>Imagen de Fondo</h3>
                        <div class="fondo_image">
                            @Html.HiddenFor(model => model.PaisID)
                            @Html.HiddenFor(model => model.NombreImagen)
                            @Html.HiddenFor(model => model.FormularioDatoID)
                            <img id="preview" src="@Model.NombreImagenAnterior" alt="Imagen Previa" width="200px" height="200px" />
                        </div>
                    </div>
                    <div class="fondo_right">
                        <div class="div-3">
                            <div class="input_validar">
                                <div id="file-uploader">
                                </div>
                                <script src="@Url.Content("~/Scripts/fileuploader.js")" type="text/javascript"></script>
                                <script type="text/javascript">
                                    var uploader = new qq.FileUploader({
                                        allowedExtensions: ['jpg', 'png', 'jpeg'],
                                        element: document.getElementById('file-uploader'),
                                        action: '@Url.Action("ImageUpload", "FileUpload")',
                                        onComplete: function (id, fileName, responseJSON) {
                                            if (checkTimeout(responseJSON)) {
                                                $(".qq-upload-list").css("display", "none");
                                                if (responseJSON.success) {
                                                    $('#NombreImagen').val(responseJSON.name);
                                                    $('#preview').attr('src', '@Url.Content("~/Content/Images/temp/")' + responseJSON.name);
                                                }
                                                else {
                                                    alert(responseJSON.message);
                                                }
                                            }
                                        },
                                        onSubmit: function (id, fileName) { $(".qq-upload-list").css("display", "none"); },
                                        onProgress: function (id, fileName, loaded, total) { $(".qq-upload-list").css("display", "none"); },
                                        onCancel: function (id, fileName) { $(".qq-upload-list").css("display", "none"); }
                                    });
                                </script>
                            </div>
                        </div>
                        <div class="div-3">
                            <div class="input_search">
                                <input type="submit" value="Guardar" />
                            </div>
                        </div>

                    </div>


                </div>

            </div>
        </div>
    </div>
}