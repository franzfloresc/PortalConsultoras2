@model Portal.Consultoras.Web.Models.ActualizarDatosModel
@{
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    ViewBag.Title = "Bienvenidos";
}
<!--R2116 INICIO-->
<link href="@Url.Content("~/Content/Css/Site/ActualizarDatos.css")" rel="stylesheet" type="text/css" /> @*R2639*@

<style>
    .hide-close .ui-dialog-titlebar-close {
        display: none;
    }

    .posicion-close .ui-dialog-titlebar-close {
        margin: -62px -10px 0px 34px;
    }

    .margen {
        margin: 2px 0px -16px 75px;
    }

    /*.posboton .ui-dialog .ui-dialog-buttonpane {
        cursor: pointer;
        margin: 0.5em 2.9em 0.5em 0;
        width: 145px;
    }*/
    .colorboton .ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {
        background: #e570e7; /* Old browsers */
        background: -moz-linear-gradient(top, #e570e7 0%, #c85ec7 30%, #a849a3 51%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e570e7), color-stop(30%,#c85ec7), color-stop(51%,#a849a3)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, #e570e7 0%,#c85ec7 30%,#a849a3 51%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, #e570e7 0%,#c85ec7 30%,#a849a3 51%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, #e570e7 0%,#c85ec7 30%,#a849a3 51%); /* IE10+ */
        background: linear-gradient(to bottom, #e570e7 0%,#c85ec7 30%,#a849a3 51%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e570e7', endColorstr='#a849a3',GradientType=0 ); /* IE6-9 */
        border: 1px solid #d3d3d3;
        color: white;
    }

    .colorhead .ui-widget-header {
        background: none repeat scroll 0 0 #6c207f;
    }

    .divcolor {
       background: none repeat scroll 0 0 #ebebeb;
    height: 90px;
    margin-left: -14px;
    margin-top: -21px;
    width: 518px;
    }

    .simple {
        font-weight: 200;
    }
   
    .checkTextalignLeft {
        cursor: pointer; 
        text-decoration: underline; 
        text-align: left;
        width: 96%;
        float: left;
    }

    .textoMensajeDA {
        color: #993399;
        font-family: Arial,Verdana,sans-serif;
        font-size: 13px;
        text-align: left;
        font-weight: bold;
        padding-left: 25px;
    }

    .botonesConfirmacion {
        width: 300px;
        height: 46px;
        border: 0;
        padding-top: 20px;
        padding-left: 40px;
    }

    .botonesConfirmacion input { 
        width: 138px;
        height: 46px;
        background: url("/Content/Images/btn_validar.png") no-repeat;
            cursor: pointer;
        line-height: 22px;
        color: #fff;
        font-size: 12px;
        border: 0;
    }
</style>
<!--R2116 FIN-->

<script src="@Url.Content("~/Scripts/jquery.flexslider.js")"></script>

<script type="text/javascript">
    $(document).ready(function () {
        //R2116 INICIO
        var pais = "@ViewBag.PaisID";
        var ValidacionDatos = "@ViewBag.ValidaDatosActualizados";
        var ValidaSegmento = "@ViewBag.ValidaSegmento";
        var tiempoVenta = "@ViewBag.ValidaTiempoVentana";
        if (pais == 9 && ValidacionDatos == 1 && ValidaSegmento == 1 && tiempoVenta == 1) {
            //
            if ($.browser.msie) {         //this is for only ie condition ( microsoft internet explore )
                $('input[type="text"][placeholder]').each(function () {
                    var obj = $(this);

                    if (obj.attr('placeholder') != '') {
                        obj.css({ 'color': '#d3d3d3' });
                        obj.addClass('IePlaceHolder');

                        if ($.trim(obj.val()) == '' && obj.attr('type') != 'password') {
                            obj.val(obj.attr('placeholder'));
                        }
                    }
                });

                $('.IePlaceHolder').focus(function () {
                    var obj = $(this);

                    if (obj.val() == obj.attr('placeholder')) {
                        obj.css({ color: '' });
                        obj.val('');
                    }
                });

                $('.IePlaceHolder').blur(function () {
                    var obj = $(this);
                    if ($.trim(obj.val()) == '') {
           
                        
                        obj.css({ color: '#d3d3d3' });
                        obj.val(obj.attr('placeholder'));
                    }
                });
            } else {
                $('.ie8placeholder').data('holder', $('.ie8placeholder').attr('placeholder'));
                $('.ie8placeholder').focus(function () {
                    var obj = $(this);
                    obj.attr('placeholder', '');
                });
                $('.ie8placeholder').focusout(function () {

                    var obj = $(this);
                    obj.attr('placeholder', obj.data('holder'));
                });
              
            }
            //
            $('#divActualizarDatosMexico').dialog({
                autoOpen: true,
                resizable: false,
                dialogClass: 'hide-close colorboton colorhead',
                modal: true,
                closeOnEscape: false,
                width: 510,
                height: "auto",
                draggable: true,
                title: "<div class='divcolor'><center><div class='margen' style='margin: 16px 70px; padding-top: 16px; font-family: arial; text-align: center;'><strong>Actualiza tus datos</stron><span class='simple'> y recibe un regalo sorpresa junto con tu próximo pedido<span></d></center></div>",
                buttons: {
                    "Actualizar": {
                      
                        text: "Actualizar",
                                click: function () {

                                    ActualizarDatosMexico();


                                }
                            }
                },
                open: function () {
                    $('.ui-dialog-buttonpane').find('button:contains("Actualizar")').css({ 'marginRight': 34, width: 150 }).addClass("borde_redondeado");
                }
               


            });
            
        }

        function mensajeConfirmacion(mensaje) {
            $('#confirmacion_datos').dialog({
                autoOpen: false,
                dialogClass: 'posicion-close',
                resizable: false,
                modal: true,
                closeOnEscape: false,
                width: 407,
                height: 97,
                draggable: true,
                title: mensaje

            });
            $('#confirmacion_datos').dialog('open');
            //setTimeout(function () {
            //    $('#confirmacion_datos').fadeOut();
            //    $('#confirmacion_datos').dialog('close');

            //}, 5000);

        }
        function ActualizarDatosMexico() {
            var Result = false;
            var m_nombre = $('#m_txtNombre').val();
            var m_apellidos = $('#m_txtApellidos').val();
            var m_telefonoCasa = '';
            var m_telefonoCelular = '';
            if ($('#m_txtTelefonoCasa').val() != '' && $('#m_txtTelefonoCasa').val() != $('#m_txtTelefonoCasa').attr('placeholder')) {
                m_telefonoCasa = $('#m_txtTelefonoCasa').val();
            }
            if ($('#m_txtTelefonoCelular').val() != '' && $('#m_txtTelefonoCelular').val() != $('#m_txtTelefonoCelular').attr('placeholder')) {
                m_telefonoCelular = $('#m_txtTelefonoCelular').val();
            }
           
           
            var m_email = $('#m_txtEMail').val();
            if (typeof (m_email) == "undefined")
                m_email = ''
            var m_error = 0;
            var m_mensaje = "<font color=red>";
          

            $('.requerido').each(function (i, elem) {
                if ($(elem).val() == '' || typeof ($(elem).val()) == 'undefined') {
                    $(elem).css({ 'border': '1px solid red' });
                    m_error++;
                    if (elem.id == 'm_txtNombre') {
                        m_mensaje += '* Debe ingresar su nombre<br />';
                    }
                    if (elem.id == 'm_txtApellidos') {
                        m_mensaje += '* Debe ingresar su apellido<br />';
                    }
                    if (elem.id == 'm_txtTelefonoCasa') {                 
                        m_mensaje += '* Debe ingresar teléfono de casa<br />';
                    }
                    if (elem.id == 'm_txtTelefonoCelular') {
                        m_mensaje += '* Debe ingresar teléfono celular<br />';
                    }
                    if (elem.id == 'm_txtEMail') {
                        m_mensaje += '* Debe ingresar correo electrónico<br />';
                    }

                } else {
                    if (elem.id == 'm_txtTelefonoCasa') {
                        $(elem).css({ 'border': '1px solid red' });
                        if (m_telefonoCasa == '') {
                            m_error++;
                            m_mensaje += '* Debe ingresar teléfono de casa<br />';
                        } else
                        if ($(elem).val().length < 10) {

                            m_error++;
                            m_mensaje += '* Debe digitar 10 dígitos en el campo teléfono de casa<br />';
                        }
                        else {
                            $(elem).css({ 'border': '' });
                        }
                    } else {
                        if (elem.id == 'm_txtTelefonoCelular') {
                            $(elem).css({ 'border': '1px solid red' });
                            if (m_telefonoCelular == '') {
                                m_mensaje += '* Debe ingresar teléfono celular<br />';
                                m_error++;
                            }
                            else
                                if ($(elem).val().length < 10) {
                                    m_error++;
                                    m_mensaje += '* Debe digitar 10 dígitos en el campo teléfono celular<br />';
                                }
                                else {
                                    $(elem).css({ 'border': '' });
                                }
                        } else {
                            $(elem).css({ 'border': '' });
                        }

                    }


                }

            });
            if (m_error > 0) {
                m_mensaje += '</font><br />';
            }


            if (m_email != '') {
                if (validarEmailMexico(m_email) == false) {
                    $('#m_txtEMail').css({ 'border': '1px solid red' });
                    m_mensaje += '<font color=red>* Formato  de Email No Válido</font><br />';
                    m_error++;
                }
                else {
                    $('#m_txtEMail').css({ 'border': '' });
                }

            }




            if (m_error > 0) {
                $('#aviso').html(m_mensaje);
            }
            else {
                $('#aviso').html('');
                var item = {
                    m_Nombre: m_nombre, m_Apellidos: m_apellidos, Telefono: m_telefonoCasa, Celular: m_telefonoCelular, Email: m_email
                };

                waitingDialog({});

                jQuery.ajax({
                    type: 'POST',
                    url: baseUrl + 'ActualizarDatos/RegistrarMexico',
                    dataType: 'json',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(item),
                    async: true,
                    success: function (data) {
                        if (checkTimeout(data)) {
                            closeWaitingDialog();
                            if (data.success == true) {
                                Result = true;
                                // alert(data.message);
                                //  $('#aviso').html(data.message);

                                $('#divActualizarDatosMexico').dialog('close');
                                mensajeConfirmacion("<html><p <p style='text-align: center; color: rgb(140, 140, 140);'>" + data.message + "</p></html>");
                                //$('#divActualizarDatosExitoMexico').dialog('open');
                            }
                            else {
                                Result = false;
                                //  alert(data.message);
                                $('#aviso').html(data.message);
                            }
                        }
                    },
                    error: function (data, error) {
                        if (checkTimeout(data)) {
                            Result = false;
                            closeWaitingDialog();
                            // alert(data.message);
                            $('#aviso').html(data.message);
                        }
                    }
                });

            }

            return Result;
        }
        function validarEmailMexico(email) {

            var emailReg = /^([\w-\.]+@@([\w-]+\.)+[\w-]{2,4})?$/;
            return emailReg.test(email);
        }

        //R2116 FIN



        /* 1987 - Inicio */
        $("textarea").bind("keyup keydown", function () {
            var max = 500;
            var value = $(this).val();
            var left = max - value.length;
            if (left < 0) {
                $(this).val(value.slice(0, left));
                left = 0;
            }
        });


        $('#userWelcome').css({ "display": "none" });
        $('#DialogoMensajeBanner').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 400,
            draggable: true,
            title: "Eliminar Banner",
            buttons:
            {
                "Salir": function () {
                    $(this).dialog('close');
                }
            }
        });
        /* 1987 - Inicio */
        $('#idSueniosNavidad').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 710,
            draggable: true,
            title: "",
            close: function (event, ui) {
                $(this).dialog('close');
            }
        });
        $("#idSueniosNavidad").siblings('div.ui-dialog-titlebar').remove();

        $('#divSuenioConfirmacion').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 590,
            minHeight: 83,
            draggable: true,
            title: "",
            close: function (event, ui) {
                $(this).dialog('close');
            }
        });
        $("#divSuenioConfirmacion").siblings('div.ui-dialog-titlebar').remove();
        /* 1987 - Fin */

        $('#DialogMensajesBanner2').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 400,
            draggable: true,
            title: "::Mensaje::",
            buttons:
            {
                "Cerrar": function () {
                    $(this).dialog('close');
                }
            }
        });


        $('#divDemandaAnticipada').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: false,
            width: 400,
            //height: 380,
            draggable: true,
            title: ""
            //open: function (event, ui) { $(".ui-dialog-titlebar-close", ui.dialog | ui).hide(); },
            //close: function (event, ui) {
            //    $(this).dialog('close');
            //}
        });

        $('#divDemandaAnticipada').dialog("widget").find('.ui-dialog-titlebar-close').remove()
        //$("#divDemandaAnticipada").siblings('div.ui-dialog-titlebar').remove();


    });

    /* 1987 - Fin */

    function AgregarSuenio() {
        var descSuenio = $("#txtSuenioNavidad").val();

        if ($.trim(descSuenio) == "") {
            alert_msgPedidoBanner("Ingrese una descripción");
            return false;
        }

        var params = { descripcion: descSuenio };
        $('#idSueniosNavidad').dialog('close');
        waitingDialog({});
        $.ajax({
            type: "POST",
            url: baseUrl + "Bienvenida/RegistrarSuenioNavidad",
            data: JSON.stringify(params),
            contentType: 'application/json',
            success: function (data) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    if (data.success == true) {
                        //alert_msgPedidoBanner(data.message);
                        showDialog("divSuenioConfirmacion");
                        closeWaitingDialog();
                    } else {
                        alert_msgPedidoBanner(data.message);
                        closeWaitingDialog();
                    }
                }
            },
            error: function (data, error) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    alert_msgPedidoBanner("Ocurrió un error inesperado al momento de registrar los datos. Consulte con su administrador del sistema para obtener mayor información");
                    closeWaitingDialog();
                }
            }
        });
    }
    /* 1987 - Fin */

    function AbrirModal() {
        showDialog("divFaltantesAnunciados");
        return false;
    }
    //ITG 1796 Inicio
    function RechazarInvitacionFlex() {
        waitingDialog({});
        jQuery.ajax({
            type: 'POST',
            url: baseUrl + 'ActualizarDatos/RechazarInvitacionFlexipago',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: null,
            async: true,
            success: function (data) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                }
            },
            error: function (data, error) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    alert(data.message);
                }
            }
        });
        $('#divFlexipago').dialog('close');
        return false;

    }

    function InscribeteFlex() {
        var cc = ('@ViewBag.CodigoConsultora');
        var ca = ('@ViewBag.CampaniaActual');
        var pp = ('@ViewBag.PrefijoPais');
        var url = ('@ViewBag.UrlFlexipagoCL');
        if (pp.toString() == 'CL') {
            window.open(url + "/inscripcion.html?PP=" + String(pp) + "&CC=" + String(cc) + "&CA=" + String(ca), "_blank");
        }
        else {
        window.open("http://FLEXIPAGO.SOMOSBELCORP.COM/FlexipagoCO/inscripcion.html?PP=" + String(pp) + "&CC=" + String(cc) + "&CA=" + String(ca), "_blank");
        }
        return false;
    }

    function CerrarPopUpFlex() {
        $('#divFlexipago').dialog('close');
        return false;
    }

    function ConoceFlex() {
        var cc = ('@ViewBag.CodigoConsultora');
        var ca = ('@ViewBag.CampaniaActual');
        var pp = ('@ViewBag.PrefijoPais');
        var url = ('@ViewBag.UrlFlexipagoCL');
        if (pp.toString() == 'CL') {
            window.open(url + "/index.html?PP=" + String(pp) + "&CC=" + String(cc) + "&CA=" + String(ca), "_blank");
        }
        else {
        window.open("http://FLEXIPAGO.SOMOSBELCORP.COM/FlexipagoCO/index.html?PP=" + String(pp) + "&CC=" + String(cc) + "&CA=" + String(ca), "_blank");
        }
        return false;
    }
    //ITG 1796 Fin

    function Cancelar() {
        var ClaveSecreta = $('#txtActualizarClaveSecreta').val();
        var ConfirmarClaveSecreta = $('#txtConfirmarClaveSecreta').val();

        if (ClaveSecreta != ConfirmarClaveSecreta) {
            alert('Las claves ingresadas no coinciden');
            return false;
        }
        var item = {
            Telefono: jQuery('#txtTelefono').val(),
            Celular: jQuery('#txtCelular').val(),
            Email: jQuery('#txtEMail').val(),
            ActualizarClave: ClaveSecreta,
            ConfirmarClave: ConfirmarClaveSecreta,
            CorreoAnterior: jQuery('#hdn_Correo').val(),
        };
        waitingDialog({});

        jQuery.ajax({
            type: 'POST',
            url: baseUrl + 'ActualizarDatos/Cancelar',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(item),
            async: true,
            success: function (data) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    //if (data.success == true) {
                    //    alert(data.message);
                    //}
                    //else {
                    //    alert(data.message);
                    //}
                }
            },
            error: function (data, error) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    alert(data.message);
                }
            }
        });
    }


    function ValidateOnlyNums(id) {
        return $("#" + id).val($("#" + id).val().replace(/[^\d]/g, ""));
    }

    $("#txtTelefono").keypress(function (evt) {
        var charCode = (evt.which) ? evt.which : window.event.keyCode;
        if (charCode <= 13) {
            return false;
        }
        else {
            var keyChar = String.fromCharCode(charCode);
            var re = /[0-9+ *#-]/;
            return re.test(keyChar);
        }
    });
    $("#txtCelular").keypress(function (evt) {
        var charCode = (evt.which) ? evt.which : window.event.keyCode;
        if (charCode <= 13) {
            return false;
        }
        else {
            var keyChar = String.fromCharCode(charCode);
            var re = /[0-9+ *#-]/;
            return re.test(keyChar);
        }
    });

    function ActualizarDatos() {
        var Result = false;
        var ClaveSecreta = $('#txtActualizarClaveSecreta').val();
        var ConfirmarClaveSecreta = $('#txtConfirmarClaveSecreta').val();
        var telefono = $('#txtTelefono').val();
        var celular = $('#txtCelular').val();
        var correoElectronico = $('#txtEMail').val();
        var confirmacionCorreoElectronico = $('#txtConfirmarEMail').val(); //RQ2639 EGL

        if ((telefono == '' || telefono == null) &&
             celular == '' || celular == null) {
            alert('Debe ingresar al menos un número de contacto: celular o teléfono.');
            return false;
        }
        if (correoElectronico == '') {
             alert('Debe ingresar el Correo Electrónico');
             return false;
        }

        //RQ2639 INICIO EGL
        if (confirmacionCorreoElectronico == '') {
            alert('Debe ingresar la Confirmación Correo Electrónico');
            return false;
        }

        if (correoElectronico != confirmacionCorreoElectronico) {
            alert('Los correos electrónicos ingresados no coinciden');
            return false;
        }
        //RQ2639 FIN EGL

        if (!validateEmail(jQuery.trim($('#txtEMail').val()))) {
            $('#txtEMail').focus();
            alert('El formato del correo electrónico ingresado no es correcto.');
            return false;
        } 

        if (ClaveSecreta.length > 0 && ClaveSecreta.length <= 6) {
            alert('Las clave debe tener mas de 6 caracteres.');
            return false;
        }
        if (ClaveSecreta != ConfirmarClaveSecreta) {
            alert('Las claves ingresadas no coinciden');
            return false;
        }

        if ($('#chkAceptoContrato').is(':checked') == false) {
            alert('Debe aceptar los términos y condiciones');
            return false;
        }

        var item = {
            Telefono: jQuery('#txtTelefono').val(),
            Celular: jQuery('#txtCelular').val(),
            Email: $.trim(jQuery('#txtEMail').val()),
            ActualizarClave: ClaveSecreta,
            ConfirmarClave: ConfirmarClaveSecreta,
            CorreoAnterior: jQuery('#hdn_Correo').val(),
            AceptoContrato: $('#chkAceptoContrato').is(':checked')
        };
        waitingDialog({});

        jQuery.ajax({
            type: 'POST',
            url: baseUrl + 'ActualizarDatos/Registrar',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(item),
            async: true,
            success: function (data) {
                $("#idMensajeActualizacionDatos").css({ "display": "none" });
                $("#idObservacionesActualizacionDatos").css({ "display": "none" });

                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    if (data.success == true) {
                        Result = true;
                        $("#idMensajeActualizacionDatos").css({ "display": "block" });
                    }
                    else {
                        Result = false;
                    }


                    if (data.message && data.message != "" && data.message != null) {
                        if (!Result) {
                            var aMensaje = data.message.split("-");
                            var mensajeHtml = "";
                            $.each(aMensaje, function (i, v) {
                                mensajeHtml += v + "<br/>"
                            });
                        }

                        $("#idObservacionesActualizacionDatos").css({ "display": "block" });
                        $("#idObservacionesActualizacionDatos").html(mensajeHtml);

                        $('#divActualizarDatos').dialog('close');
                        $("#divMensajeConfirmacion").dialog('open');//R2639
                    }
                }
                
            },
            error: function (data, error) {
                $("#idMensajeActualizacionDatos").css({ "display": "none" });
                $("#idObservacionesActualizacionDatos").css({ "display": "none" });
                if (checkTimeout(data)) {
                    Result = false;
                    closeWaitingDialog();
                    if (data.message && data.message != "" && data.message != null) {
                        var aMensaje = data.message.split("-");
                        var mensajeHtml = "";
                        $.each(aMensaje, function (i, v) {
                            mensajeHtml += v + "<br/>"
                        });

                        $("#idObservacionesActualizacionDatos").css({ "display": "block" });
                        $("#idObservacionesActualizacionDatos").html(mensajeHtml);
                    }
                    $('#divActualizarDatos').dialog('close');

                }
            }
        });

        return Result;
    }

    $(document).ready(function () {

        $('#divActualizarDatos').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 610, //R2639 EGL
            draggable: true,
            close: function (event, ui) { Cancelar(); }
        });
        //R2639 EGL
        $("#divActualizarDatos").parent().find(".ui-dialog-titlebar").hide();
        $("#divActualizarDatos").parent().css({ 'border-radius': 0, '-webkit-border-radius': 0 });
        $("#divActualizarDatos").parent().css("border-color", "rgb(206,202,197)");

        //R2639 INICIO EGL
        $('#divMensajeConfirmacion').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 680, 
            draggable: true,
            //close: function (event, ui) { Cancelar(); }
        });
        $("#divMensajeConfirmacion").parent().find(".ui-dialog-titlebar").hide();
        $("#divMensajeConfirmacion").parent().css({ 'border-radius': 0, '-webkit-border-radius': 0 });
        $("#divMensajeConfirmacion").parent().css("border-color", "rgb(206,202,197)");
        //R2639 FIN EGL



        $('#divContrato').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 750,
            close: function (event, ui) {
                $('#divContrato').dialog('close');
                if ('@ViewBag.CambioClave' == 0) {
                    $("#divActualizarDatos").dialog('open');
                }
            }
            //height: 380,
            //draggable: true
        });
        /* Modificado 15082014 - Inicio  */
        $('#divFlexipago').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 535,
            close: function (event, ui) {
                $('#divFlexipago').dialog('close');
            }
        });
        $("#divFlexipago").siblings('div.ui-dialog-titlebar').remove();
        /* Modificado 15082014 - Fin */

		//R2004
        $('#divComunicado').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 650,
            height: 600,
            draggable: true,
            title: "Comunicado",
            buttons:
                    {
                        "Aceptar": function () {
                            AceptarComunicado();
                        }
                    },
            close: function (event, ui) {
                $('#divComunicado').dialog('close');
            }
        });

        /*GR-1209*/
        $('#divComunicadoVisualizacion').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 650,
            position: ['center',22] ,
            draggable: true,
            close: function (event, ui) {
                $('#divComunicadoVisualizacion').dialog('close');
            }

        });

        $('#divMensajeContrato').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 400,
            //draggable: true,
            //title: ":: Mensaje ::",            
            buttons:
            {
                "Aceptar": function () {
                    $(this).dialog('close');
                }
            }
        });

        waitingDialog({});
        $.ajax({
            type: 'GET',
            url: baseUrl + 'GestionContenido/GetResumenCampania',
            data: '',
            cache: false,
            dataType: 'Json',
            success: function (data) {
                if (checkTimeout(data)) {
                    if (data.result) {
                        //2022 v.2.0
                        if ('@ViewBag.InscritaFlexipago' == "1") {
                            if (data.listaValorApagar.length > 0) {
                                if (data.listaValorApagar[0].ImporteTotal == '-1') {
                                    $("#spValorAPagar").text('No Aplica');
                                }
                                else if (data.listaValorApagar[0].ImporteTotal == '-2') {
                                    $("#spValorAPagar").text('Pagado');
                                }
                                else {
                                    switch (data.paisID) {
                                        case 4:
                                            $("#spValorAPagar").text(data.Simbolo + " " + SeparadorMiles(data.listaValorApagar[0].ImporteTotal.toFixed(0)));
                                            break;
                                        default:
                                            $("#spValorAPagar").text(data.Simbolo + " " + data.listaValorApagar[0].ImporteTotal.toFixed(2));
                                            break;
                                    }
                                }
                            }
                        }
                        if (data.listaProductosSolicitados.length > 0) {
                            $("#spProductosSolicitados").append("Productos Solicitados:");
                            var cadena = "<ul>";
                            for (i = 0; i < data.listaProductosSolicitados.length; i++) {
                                cadena += "<li><div>" + data.listaProductosSolicitados[i].Marca + "</div><span>" + data.listaProductosSolicitados[i].Cantidad + "</span></li>";
                            }
                            cadena += "</ul>";
                            $("#spProductosSolicitados").append(cadena);
                        }
                        //2022
                        if ('@ViewBag.InscritaFlexipago' == '1') {
                            if (data.listaWebAcumulado.length > 0) {                            
                                if (data.paisID == '4') {  // validación colombia req. 1478
                                    $("#spPedidoWebAcumulado").text(data.Simbolo + " " + SeparadorMiles(data.listaWebAcumulado[0].ImporteTotal.toFixed(0)));
                                }
                                else {
                                    $("#spPedidoWebAcumulado").text(data.Simbolo + " " + data.listaWebAcumulado[0].ImporteTotal.toFixed(2));
                                }
                            }
                        }
                        else {
                            $("#spWebAcumulado").text(data.Simbolo + " " + data.listaWebAcumulado[0].ImporteTotal.toFixed(2));
                        }
                        //2022 v.CC
                        if ('@ViewBag.InscritaFlexipago' == '1') {
                            if (data.listaSaldoPendiente.length > 0) {                            
                                if (data.paisID == '4') {// validación colombia req. 1478
                                    $("#spDeudaTotal").text(data.Simbolo + " " + SeparadorMiles(data.listaSaldoPendiente[0].SaldoPendiente.toFixed(0)));
                            }
                                else {
                                    $("#spDeudaTotal").text(data.Simbolo + " " + data.listaSaldoPendiente[0].SaldoPendiente.toFixed(2));
                                }
                            }
                        }
                        else {
                            $("#spSaldoPendiente").text(data.Simbolo + " " + data.listaSaldoPendiente[0].SaldoPendiente.toFixed(2));
                        }
                        //2022 v.2.0 - R2161
                        if ('@ViewBag.InscritaFlexipago' == '1') {
                                switch (data.paisID) {
                                    case 4:
                                    case 11:
                                case 3:
										if (data.Flexipago[0].ImporteTotal == null || data.Flexipago[0].ImporteTotal == undefined || data.Flexipago[0].ImporteTotal == "") {
                                            $("#divFlexipagoMontoMinimo").css("display", "block");
                                            $("#spFlexipago").text('');
                                        }
                                        else if (data.Flexipago[0].ImporteTotal == '-1') {
                                            $("#divFlexipagoMontoMinimo").css("display", "block");
                                            $("#spFlexipago").text('No Aplica');
                            			}
                                        else if (data.Flexipago[0].ImporteTotal == '-2') {
                                            $("#divFlexipagoMontoMinimo").css("display", "block");
                                            $("#spFlexipago").text('Pagado');
                                        }
                                        else {
                                            if (data.paisID == '4') { // validación colombia req. 1478
                                                $("#divFlexipagoMontoMinimo").css("display", "block");
                                                $("#spFlexipago").text(data.Simbolo + " " + SeparadorMiles(data.Flexipago[0].ImporteTotal.toFixed(0)));
                                            }
                                            else {
                                                $("#divFlexipagoMontoMinimo").css("display", "block");
                                                $("#spFlexipago").text(data.Simbolo + " " + data.Flexipago[0].ImporteTotal.toFixed(2));
                                            }
                                        }
                                        break;
                                    default:
                                        $("#divMmoTotalFlexipago").css("display", "block");
                                        $("#spMmoTotalPagar").text(data.Simbolo + " " + data.MontosFlexipago[0].MontoMinimoFlexipago.toFixed(2));
                                }
                        }
                        if (data.listaZona.length > 0) {
                            $("#spGerenteZona").append("La Gerente de tu Zona es:");
                            $("#spGerenteZona").append("<br />" + data.listaZona[0].NombreGerenteZona);
                        }
                        if (data.PrimeraVez == "0" && '@ViewBag.PaisID' == 4) {

                            AbrirAceptacionContrato();
                        }
                        else {
                            //if (data.PrimeraVez == "0" || data.EMail == null || data.EMail == "" || data.EMailActivo == "0") {
                            if (data.PrimeraVez == "0" || '@ViewBag.PrimeraVezSession' == "0") {

                                $("#divActualizarDatos").dialog('open');
                            }
                            else {
                                if (data.PrimeraVez == "1" && '@ViewBag.PaisID' == 4) {

                                    AbrirAceptacionContrato();
                                }
                            }

                        }
                        //1796
                        AbrirPopupFlexipago();
                        AbrirComunicado(); //R2004
                        if ('@ViewBag.NombrePais' == "Ecuador") {
                            AbrirComunicadoVisualizacion(); /*GR-1209*/
                        }
                        $('#scrollbar1').tinyscrollbar();
                        closeWaitingDialog();

                        MostrarDemandaAnticipada();
                        

                    }
                    else {
                        closeWaitingDialog();
                        alert("Ocurrio un error con el Resumen de Campaña, vuelva a ingresar nuevamente");
                        //location.href = '@Url.Action("Index", "Login")';
                        return false;
                    }
                }
            }
        });

        $('#hrefContrato').click(function () {
            waitingDialog({});
            DownloadAttachPDF();
        });

        $('#hrefTerminos').click(function () {
            waitingDialog({});
            DownloadAttachPDFTerminos();
        });

        //R2639 INICIO EGL
        $("#btnActualizarDatos").click(function () {
            ActualizarDatos();
            return false;
        });

        /*GR-1209*/
        $("#btnCerrarActualizarDatos").click(function () {
            $("#divActualizarDatos").dialog('close');
        });

        $("#btnCerrarComunicado").click(function () {
            AceptarComunicadoVisualizacion();
           // $("#divComunicadoVisualizacion").dialog('close');
        });/*GR-1209*/

        $("#lnkCambiarContrasena").click(function () {
            if ($("#divCambiarContrasena").is(":visible")) {
                $(".cambiarContrasena").css("padding-top", "0px");
                $("#divCambiarContrasena").hide();
            } else {
                $(".cambiarContrasena").css("padding-top", "15px");
                $("#divCambiarContrasena").show();

                //var width = $("divActualizarDatos").dialog("option", "width");
                //$("#divActualizarDatos").dialog("option", "width", 600);
            }
        });
        
        $("#btnCerrarMensajeConfirmacion").click(function () {
            $("#divMensajeConfirmacion").dialog('close');
        });
        //R2639 FIN EGL

        //ShowRoom
        CrearPopShow();
        MostrarShowRoom();
        //Fin ShowRoom
    });

    //ShowRoom
    function CrearPopShow() {
        $("body").on("click", "div.check_01 label.checkpop input", function (event) {
            event.preventDefault();
            if ($(this).parent().hasClass("c_on")) {
                $(this).parent().removeClass("c_on");
            } else {
                $(this).parent().addClass("c_on");
            }
        });

        $("body").on("click", "div.check_hoy label.checkpop input", function (event) {
            event.preventDefault();
            if ($(this).parent().hasClass("c_on")) {
                $(this).parent().removeClass("c_on");
            } else {
                $(this).parent().addClass("c_on");
            }
        });
        
        var noMostrarShowRoom = true;
            
        $('#DialogoMensajeBannerShowRoom').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 821,
            draggable: true,

        });
        $("#btnCerrarPopShowroom").click(function () {
            $("#DialogoMensajeBannerShowRoom").dialog('close');
        });
        
        $('#DialogoMensajeBannerShowRoomHoy').dialog({
            autoOpen: false,
            resizable: false,
            modal: true,
            closeOnEscape: true,
            width: 624,
            draggable: true,

        });
        $("#btnCerrarPopShowroomHoy").click(function () {
            $("#DialogoMensajeBannerShowRoomHoy").dialog('close');
        });
        
        $("#cbNoMostrarPopupShowRoom, #cbNoMostrarPopupShowRoomHoy").click(function () {
            var noMostrarPopup = noMostrarShowRoom;

            var item = {                
                noMostrarPopup: noMostrarPopup
            };

            $.ajax({
                type: 'POST',
                url: baseUrl + 'ShowRoom/UpdatePopupShowRoom',
                dataType: 'json',
                contentType: 'application/json; charset=utf-8',
                data: JSON.stringify(item),
                async: false,
                success: function (response) {
                    if (checkTimeout(response)) {
                        if (response.success) {
                            if (noMostrarShowRoom)
                                AgregarTagManagerShowRoomCheckBox();
                            noMostrarShowRoom = noMostrarShowRoom == true ? false : true;
                        }
                    }
                },
                error: function (response, error) {
                    if (checkTimeout(response)) {
                        closeWaitingDialog();
                        console.log("Ocurrió un error en ShowRoom");
                        //alert("Ocurrió un error en ShowRoom");
                    }
                }
            });
        });

        $("#lnkConoceMasShowRoomPopup").click(function() {
            AgregarTagManagerShowRoomPopupConocesMas(1);
        });
        
        $("#lnkConoceMasShowRoomPopupHoy").click(function () {
            AgregarTagManagerShowRoomPopupConocesMas(2);
        });
    }
    
    function MostrarShowRoom() {
        var idRol = '@ViewBag.Rol';
        
        if (idRol == 1) {
            
            $.ajax({
                type: "POST",
                url: baseUrl + "Bienvenida/MostrarShowRoomPopup",
                contentType: 'application/json',
                success: function (response) {
                    if (checkTimeout(response)) {
                        if (response.success) {
                            var showroomConsultora = response.data;
                            var evento = response.evento;                            
                            
                            if (showroomConsultora.EventoConsultoraID != 0) {
                                if (showroomConsultora.MostrarPopup) {
                                    $("#hdEventoIDShowRoom").val(evento.EventoID);
                                    
                                    if (response.mostrarShowRoomProductos) {
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().find(".ui-dialog-titlebar").hide();
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("overflow", "inherit");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("border", "0");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("border-radius", "0");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("-webkit-border-radius", "0");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("-moz-border-radius", "0");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("-khtml-border-radius", "0");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("padding", "0");
                                        
                                        $('#DialogoMensajeBannerShowRoomHoy').dialog('open'); //llamar al pop up
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("top", "");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("top", "90px");
                                        $("#DialogoMensajeBannerShowRoomHoy").parent().css("height", "450px");
                                        
                                        $("#spnShowRoomEventoHoy").html(evento.Nombre);
                                        
                                        $("#lnkConoceMasShowRoomPopupHoy").attr("href", response.rutaShowRoomPopup);
                                        
                                        showDialog("DialogoMensajeBannerShowRoomHoy");
                                        
                                        AgregarTagManagerShowRoomPopup(evento.Nombre, true);
                                    } else {
                                    $("#DialogoMensajeBannerShowRoom").parent().find(".ui-dialog-titlebar").hide();
                                    $("#DialogoMensajeBannerShowRoom").parent().css("overflow", "inherit");
                                    $("#DialogoMensajeBannerShowRoom").parent().css("border", "0");
                                    $("#DialogoMensajeBannerShowRoom").parent().css("border-radius", "0");
                                    $("#DialogoMensajeBannerShowRoom").parent().css("-webkit-border-radius", "0");
                                    $("#DialogoMensajeBannerShowRoom").parent().css("-moz-border-radius", "0");
                                    $("#DialogoMensajeBannerShowRoom").parent().css("-khtml-border-radius", "0");
                                    $("#DialogoMensajeBannerShowRoom").parent().css("padding", "0");
                                    $('#DialogoMensajeBannerShowRoom').dialog('open'); //llamar al pop up
                                    
                                        $("#spnShowRoomEvento").html(evento.Nombre);
                                    $("#spnShowRoomNombreConsultora").html(response.nombre);
                                    $("#spnShowRoomDiaInicio").html(response.diaFin - 2);
                                    $("#spnShowRoomDiaFin").html(response.diaFin);
                                    $("#spnShowRoomMes").html(response.mesFin);
                                        
                                        $("#lnkConoceMasShowRoomPopup").attr("href", response.rutaShowRoomPopup);

                                    showDialog("DialogoMensajeBannerShowRoom");
                                        
                                        AgregarTagManagerShowRoomPopup(evento.Nombre, false);
                                    }                                                                       

                                    //$("#imgShowRoomGif").attr("src", evento.Imagen1);                                                                                                            
                                }
                            }
                        }
                    }
                },
                error: function (response, error) {
                    if (checkTimeout(response)) {
                        closeWaitingDialog();
                        console.log("Ocurrió un error en ShowRoom");
                        //alert("Ocurrió un error en ShowRoom");
                    }
                }
            });
        }
        
    }
    
    function AgregarTagManagerShowRoomPopup(nombreEvento, esHoy) {
        var name = 'showroom digital ' + nombreEvento;

        if (esHoy)
            name += " - fase 2";
        
        dataLayer.push({
            'event': 'promotionView',
            'ecommerce': {
                'promoView': {
                    'promotions': [
                    {
                        'id': $("#hdEventoIDShowRoom").val(),
                        'name': name,
                        'position': 'Home pop-up - 1',
                        'creative': 'Banner'
                    }]
                }
            }
        });
    }
    
    function AgregarTagManagerShowRoomPopupConocesMas(opcion) {
        var nombre = opcion == 1 ? $("#spnShowRoomEvento").html() : $("#spnShowRoomEventoHoy").html();

        if (opcion != 1)
            nombre += " - fase 2";

        dataLayer.push({
            'event': 'promotionClick',
            'ecommerce': {
                'promoClick': {
                    'promotions': [
                        {
                            'id': $("#hdEventoIDShowRoom").val(),
                            'name': 'showroom digital ' + nombre,
                            'position': 'Home pop-up - 1',
                            'creative': 'Banner'
                        }]
                }
            }
        });
    }
    
    function AgregarTagManagerShowRoomCheckBox() {
        dataLayer.push({
            'event': 'virtualEvent',
            'category': 'Ofertas Showroom',
            'action': 'checkbox',
            'label': '(not available)'
        });
    }
    
    //Fin ShowRoom

    // Función que colocará el caracter "." como separador de miles.
    function SeparadorMiles(pnumero) {
        var resultado = "";
        var numero = pnumero.replace(/\,/g, '');

        if (numero[0] == "-") nuevoNumero = numero.replace(/\./g, '').substring(1);
        else nuevoNumero = numero.replace(/\./g, '');

        if (numero.indexOf(",") >= 0) nuevoNumero = nuevoNumero.substring(0, nuevoNumero.indexOf(","));

        for (var j, i = nuevoNumero.length - 1, j = 0; i >= 0; i--, j++)
            resultado = nuevoNumero.charAt(i) + ((j > 0) && (j % 3 == 0) ? "." : "") + resultado;

        if (numero.indexOf(",") >= 0) resultado += numero.substring(numero.indexOf(","));

        if (numero[0] == "-") return "-" + resultado;
        else return resultado;
    }

    function AbrirAceptacionContrato() {

        var PaisID = '@ViewBag.PaisID';
        if (PaisID == 4) {
            var IndicadorContrato = '@ViewBag.IndicadorContrato';

            if (IndicadorContrato == 0) {

                var AlreadyViewContrato = '@Session["IsContrato"]';
                if (AlreadyViewContrato == 1) {

                   @{
                       Session["IsContrato"] = 0;
                    }

                    showDialog("divContrato");
                }
            }
        }
    }

    //ITG 1796
    function AbrirPopupFlexipago() {
        var PaisID = '@ViewBag.PaisID';
        if (PaisID == 4 || PaisID == 3) { //2461
            //1796
            if ('@ViewBag.InvitacionRechazada' == "False" || '@ViewBag.InvitacionRechazada' == "0" || '@ViewBag.InvitacionRechazada' == "") {
                if ('@ViewBag.InscritaFlexipago' == "0") {
                    if ('@ViewBag.IndicadorFlexiPago' == "1" && '@ViewBag.CampanaInvitada' != "0") {
                        if ((parseInt('@ViewBag.CampaniaActual') - parseInt('@ViewBag.CampanaInvitada')) >= parseInt('@ViewBag.NroCampana')) { //2461
                            showDialog("divFlexipago");
                        }
                    }
                }
            }
        }
    }

	//R2004
    function AbrirComunicado() {
        if ('@ViewBag.VisualizoComunicado' == "0") {
            showDialog("divComunicado");
            $("#divComunicado").siblings(".ui-dialog-titlebar").hide();
        }
    }

    /*GR-1209*/
    function AbrirComunicadoVisualizacion() {

        if ('@ViewBag.VisualizoComunicadoConfigurable' == "0") {
            showDialog("divComunicadoVisualizacion");
            $("#divComunicadoVisualizacion").siblings(".ui-dialog-titlebar").hide();
        }

    }

	//R2004
    function AceptarComunicado() {
        waitingDialog({});
        $.ajax({
            type: "POST",
            url: baseUrl + "Bienvenida/AceptarComunicado",
            contentType: 'application/json',
            success: function (data) {
                if (checkTimeout(data)) {
                    $('#divComunicado').dialog('close');
                    closeWaitingDialog();
                    }
                },
            error: function (data, error) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    alert("Ocurrió un error al aceptar el comunicado.");
                }
            }
        });
    }

    //GR-1209
    function AceptarComunicadoVisualizacion() {

        if ($('#chkMostrarComunicado').is(':checked')) {

            waitingDialog({});
            $.ajax({
                type: "POST",
                url: baseUrl + "Bienvenida/AceptarComunicadoVisualizacion",
                contentType: 'application/json',
                success: function (data) {
                    if (checkTimeout(data)) {
                        $('#divComunicadoVisualizacion').dialog('close');
                        closeWaitingDialog();
                    }
                },
                error: function (data, error) {
                    if (checkTimeout(data)) {
                        closeWaitingDialog();
                        alert("Ocurrió un error al aceptar el comunicado.");
                    }
                }
            });
        }

        $("#divComunicadoVisualizacion").dialog('close');
    }
    function AceptarDemandaAnticipada() {
        InsertarDemandaAnticipada(1);
    }

    function CancelarDemandaAnticipada() {
        InsertarDemandaAnticipada(0);
    }

    function InsertarDemandaAnticipada(tipo) {
        waitingDialog({});

        var params = { tipoConfiguracion: tipo };
        //params.checkAceptar = 1;

        $.ajax({
            type: "POST",
            url: baseUrl + "Cronograma/InsConfiguracionConsultoraDA",
            data: JSON.stringify(params),
            contentType: 'application/json',
            success: function (data) {
                if (checkTimeout(data)) {
                    if (data.success == true) {
                        $('#divDemandaAnticipada').dialog('close');
                        location.href = '@Url.Action("LoginCargarConfiguracion", "Login")?paisID=' + data.paisID + '&codigoUsuario=' + data.codigoUsuario;
                    }
                    closeWaitingDialog();
                }
            },
            error: function (data, error) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    if (tipo == 1) {
                        alert("Ocurrió un error al aceptar la demanda anticipada.");
                    } else {
                        alert("Ocurrió un error al cancelar la demanda anticipada.");
                    }
                }
            }
        });
    }


    function MostrarDemandaAnticipada() {

        waitingDialog({});

        $.ajax({
            type: "POST",
            url: baseUrl + "Cronograma/ValidacionConsultoraDA",
            contentType: 'application/json',
            success: function (data) {
                if (checkTimeout(data)) {
                    if (data.success == true) {
                        $('.textFechaDA').each(function () {
                            $(this).before($('<span>').text(data.mensajeFechaDA));
                        });

                        $("#divDemandaAnticipada").dialog('open');
                    }
                    closeWaitingDialog();
                }
            },
            error: function (data, error) {
                if (checkTimeout(data)) {
                    closeWaitingDialog();
                    if (tipo == 1) {
                        alert("Ocurrió un error al validar demanda anticipada.");
                    } else {
                        alert("Ocurrió un error al validar la demanda anticipada.");
                    }
                }
            }
        });

    }


    function AceptarContrato() {

        // if ($("#chbAceptar").prop("checked") == true) { // 2139

            waitingDialog({});
            var params = { checkAceptar: false };

            params.checkAceptar = 1;

            $.ajax({
                type: "POST",
                url: baseUrl + "Bienvenida/AceptarContrato",
                data: JSON.stringify(params),
                contentType: 'application/json',
                success: function (data) {
                    if (checkTimeout(data)) {
                        closeWaitingDialog();

                        if (data.success == true) {
                            //alert(data.message);
                            $('#divContrato').dialog('close');
                            if ('@ViewBag.CambioClave' == 0) {
                                $("#divActualizarDatos").dialog('open');
                            }
                        }
                        else {
                            alert(data.message);
                            if (data.extra = "nocorreo") {
                                $('#divContrato').dialog('close');
                                if ('@ViewBag.CambioClave' == 0) {
                                    $("#divActualizarDatos").dialog('open');
                                }
                            }
                        }
                    }
                },
                error: function (data, error) {
                    if (checkTimeout(data)) {
                        closeWaitingDialog();
                        alert("Ocurrió un error inesperado al momento de registrar los datos. Consulte con su administrador del sistema para obtener mayor información");
                    }
                }
            });

        //} // 2139
        // else {// 2139
        //    alert_msg('Debe marcar la aceptación del contrato.'); // 2139
        //}// 2139
    }

    function RechazarContrato() {
        $('#divContrato').dialog('close');
        if ('@ViewBag.CambioClave' == 0) {
            $("#divActualizarDatos").dialog('open');
        }
    }
    function alert_msg(message, fnClose) {
        $('#divMensajeContrato .message_text').html(message);
        if ($.isFunction(fnClose)) $('#divMensajeContrato').dialog({ close: fnClose });
        else $('#divMensajeContrato').dialog({ close: null });

        $('#divMensajeContrato').dialog('open');
    }

    function DownloadAttachPDF() {

        var iframe_ = document.createElement("iframe");
        iframe_.style.display = "none";
        var requestedFile = '@Url.Content("~/Content/FAQ/Contrato_CO.pdf")';
        iframe_.setAttribute("src", baseUrl + 'WebPages/DownloadPDF.aspx?file=' + requestedFile);

        if (navigator.userAgent.indexOf("MSIE") > -1 && !window.opera) { // Si es Internet Explorer

            iframe_.onreadystatechange = function () {
                switch (this.readyState) {
                    case "loading":
                        waitingDialog({});
                        break;
                    case "complete":
                    case "interactive":
                    case "uninitialized":
                        closeWaitingDialog();
                        break;
                    default:
                        closeWaitingDialog();
                        break;
                }
            };
        }
        else {
            // Si es Firefox o Chrome              
            $(iframe_).ready(function () {
                closeWaitingDialog();
            });
        }
        document.body.appendChild(iframe_);
    }

    function DownloadAttachPDFTerminos() {

        var iframe_ = document.createElement("iframe");
        iframe_.style.display = "none";
        var requestedFile = '/Content/FAQ/@ViewBag.ContratoActualizarDatos'+ '.pdf';
        iframe_.setAttribute("src", baseUrl + 'WebPages/DownloadPDF.aspx?file=' + requestedFile);

        if (navigator.userAgent.indexOf("MSIE") > -1 && !window.opera) { // Si es Internet Explorer

            iframe_.onreadystatechange = function () {
                switch (this.readyState) {
                    case "loading":
                        waitingDialog({});
                        break;
                    case "complete":
                    case "interactive":
                    case "uninitialized":
                        closeWaitingDialog();
                        break;
                    default:
                        closeWaitingDialog();
                        break;
                }
            };
        }
        else {
            // Si es Firefox o Chrome              
            $(iframe_).ready(function () {
                closeWaitingDialog();
            });
        }
        document.body.appendChild(iframe_);
    }

    //Henry Miranda
    function InsertarPedidoCuvBanner(CUVpedido, CantCUVpedido) {
        var item = {
            CUV: CUVpedido,
            CantCUVpedido: CantCUVpedido
        };
        var categoriacad = "";
        var variantcad = "";
        //waitingDialog({});
        jQuery.ajax({
            type: 'POST',
            url: baseUrl + 'Pedido/InsertarPedidoCuvBanner',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(item),
            async: true,
            success: function (result) {
                if (checkTimeout(result)) {
                    if (result.success == true) {
                        alert_msgPedidoBanner(result.message);                        
                        
                        if (result.oPedidoDetalle.DescripcionEstrategia == null || result.oPedidoDetalle.DescripcionEstrategia=="") { variantcad = "Estándar"; } else { variantcad = result.oPedidoDetalle.DescripcionEstrategia; }
                        if (result.oPedidoDetalle.Categoria == null || result.oPedidoDetalle.Categoria == "") { categoriacad = "Sin Categoría"; }else { categoriacad = result.oPedidoDetalle.Categoria; }
                        // R2469 - JICM - Marcación Add To Cart
                                                      
                            dataLayer.push({
                                'event': 'addToCart',
                                'ecommerce': {
                                    'add': {
                                        'actionField': { 'list': 'Banner marquesina' },
                                        'products': [{
                                            'name': result.oPedidoDetalle.DescripcionProd,
                                            'price': result.oPedidoDetalle.PrecioUnidad.toString(),
                                            'brand': result.oPedidoDetalle.DescripcionLarga,
                                            'id': CUVpedido,
                                            'category': categoriacad,
                                            'variant': variantcad,
                                            'quantity': parseInt(CantCUVpedido),
                                            'position': 1
                                        }]
                                    }
                                }
                            })


                        //FIN R2469
                         closeWaitingDialog();
                    }
                    else {
                        alert_msgPedidoBanner('Error al realizar proceso, intentelo mas tarde.');
                        closeWaitingDialog();
                    }
                }
            }
        });
     

           
       
    }


    function alert_msgPedidoBanner(message) {
        $('#DialogMensajesBanner2 .message_text').html(message);
        $('#DialogMensajesBanner2').dialog('open');
    }

    function ReservadoOEnHorarioRestringido(mostrarAlerta) {

        mostrarAlerta = typeof mostrarAlerta !== 'undefined' ? mostrarAlerta : true;
        var restringido = true;

        $.ajaxSetup({ cache: false });
        jQuery.ajax({
            type: 'GET',
            url: '@Url.Action("ReservadoOEnHorarioRestringido", "Pedido")',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            async: false,
            success: function (data) {
                if (checkTimeout(data)) {
                    if (data.success == false) restringido = false;
                    else {
                        if (data.pedidoReservado) {
                            var fnRedireccionar = function () {
                                waitingDialog({});
                                location.href = '@Url.Action("PedidoValidado", "Pedido")'
                            }
                            if (mostrarAlerta == true) alert_msg(data.message, fnRedireccionar);
                            else fnRedireccionar();
                        }
                        else if (mostrarAlerta == true) alert_msg(data.message);
                    }
                }
            },
            error: function (error) {
                console.log(error);
                alert_msg('Ocurrió un error al intentar validar el horario restringido o si el pedido está reservado. Por favor inténtelo en unos minutos.');
            }
        });
        return restringido;
    }

    function EnlaceBanner(URL, TrackText, TipoAccion, CUVpedido, CantCUVpedido,Id, Posicion,Titulo) {

        if (TipoAccion == 0 || TipoAccion == 2) {
            SetGoogleAnalyticsBannerPrincipal(URL, TrackText, Id, Posicion, Titulo);
        }

        if (TipoAccion == 1) {

            if (ReservadoOEnHorarioRestringido())
                return;
            else
            InsertarPedidoCuvBanner(CUVpedido, CantCUVpedido);

            SetGoogleAnalyticsPromotionClick(Id, Posicion, Titulo);
            return false;

        }
    }


</script>
@if (ViewBag.Rol == Portal.Consultoras.Common.Constantes.Rol.Consultora)
{
    <div id="DivPortal">
        <div class="wrap_cab">

            <div class="filtros">
                <div class="elements">
                    <div class="div-1">
                        <div class="box">
                            <div class="box-t"></div>
                            <div class="box-c">
                                @if (ViewBag.Campania != null)
                                {
                                    if (ViewBag.Dias == 0)
                                    {

                                    <p class="azul">Hoy es el cierre de <span>@ViewBag.Campania</span></p>

                                    }
                                    else
                                    {
                                    <p class="azul">Estás en <span>@ViewBag.Campania</span>, te quedan <strong>@ViewBag.Dias días</strong> para el cierre.</p>

                                    }
                                    <p>@ViewBag.MensajeCierreCampania</p>
									<!-- R2161 -->
                                    //R20151104
                                    if (ViewBag.TieneFechaPromesa == 1)
                                    { 
                                            <p>@ViewBag.MensajeFechaPromesa</p>
                                        }
                                  
                                }
                                else
                                {
                                    <p>La Zona @ViewBag.CodigoZonaConsultora no se ubica en el cronograma, por favor contacte al Servicio de Atención al Cliente.</p>
                                }
                            </div>
                            <div class="box-b"></div>
                        </div>
                        <div class="welcome" id="MensajeWelcome">
                            @*confirmar precedencia: 
                            1. Cumpleaños
                            2. Aniversario
                            3. Default
                            *@
                            @if (!string.IsNullOrEmpty(ViewBag.MensajeCumpleanos))
                            {
                                @ViewBag.MensajeCumpleanos
                            }
                            else if (!string.IsNullOrEmpty(ViewBag.MensajeAniversario))
                            {
                                @ViewBag.MensajeAniversario
                            }
                            else
                            {
                                @*if (ViewBag.Lider == 1 && ViewBag.PortalLideres == true)
                                {
                                    <div style="font-family: Arial; font-weight: bold; color: #6c207f; font-size: 14px; width: 150px;">@ViewBag.Usuario</div>
                                }
                                else
                                {*@
                                <text>
                                ¡@ViewBag.Usuario!    
                                    </text>
                                //}

                            }
                            @*if (ViewBag.Lider == 1 && ViewBag.PortalLideres == true)
                            {                                   
                                <a href='@Url.Action("Index", "Lider")' rel="lider" title="link-home-lider" style="color:#6c207f; cursor:pointer;text-decoration:underline;width:150px;" target="_self">
                                    <div style="font-family: Arial; font-weight: lighter; color: #6c207f; font-size: 14px; height: 36px; width: 150px;">
                                        Ingresa a Tu Portal de                                                                                                
                                    </div>
                                    <div style="margin-left: 140px; margin-top: -58px; width: 90px;">
                                        <img src='@Url.Content("~/Content/Images/" + @ViewBag.LogoLideres)' style="height:60px;" />
                                    </div>
                                </a>
                            }*@

                        </div>
                    </div>
                    <div class="cab_banner">
                        <div class="three-fourth">
                            <!-- Div para el Slide -->
                            <div class="slider-wrapper">
                                <div class="TB_Wrapper">
                                    <div class="Slides">
                                    </div>
                                    <!--End of Slides -->
                                </div>
                                <!--End of TB_Wrapper -->
                            </div>
                            <!--/ .slider-wrapper-->
                        </div>
                        <!--/ .three-fourth-->

                        <div class="one-fourth-menu last">
                            <div class="border-wrapper">
                                <div class="cab_resumen">Resumen de <b>Campaña</b></div>
                                <div id="scrollbar1">
                                    <div class="scrollbar">
                                        <div class="track">
                                            <div class="thumb">
                                                <div class="end"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="viewport" style="height: 108px;">
                                        <div class="overview">

                                            <!--2022 v.CC-->
                                            @if (ViewBag.InscritaFlexipago == "1")
                                            {
                                                <div class="cab_resumen_lista">Valor a Pagar: <span style="font-size: 11px;" id="spValorAPagar"></span></div>
                                                <div id="divFlexipagoMontoMinimo" style="display: none" class="cab_resumen_lista">Flexipago – Mínimo valor a pagar: <span style="display: block; font-size: 11px;" id="spFlexipago"></span></div>
                                                <div class="cab_resumen_lista">Pedido Web Acumulado: <span style="font-size: 11px;" id="spPedidoWebAcumulado"></span></div>
                                                <div class="cab_resumen_lista">Deuda Total: <span style="font-size: 11px;" id="spDeudaTotal"></span></div>
                                            }
                                            else
                                            {
                                                <div class="cab_resumen_lista">Pedido Web Acumulado: <span id="spWebAcumulado"></span></div>
                                                if (ViewBag.IndicadorPermisoFIC == 0)
                                                {
                                                    <div class="cab_resumen_lista">Total Monto a Pagar: <span id="spSaldoPendiente"></span></div>
                                                }
                                                <div id="divMmoTotalFlexipago" class="cab_resumen_lista" style="display: none">Flexipago - Mínimo Monto a Pagar: <span id="spMmoTotalPagar"></span></div>
                                            }

                                            <div class="cab_resumen_lista" id="spProductosSolicitados" style="height: 145px;">
                                            </div>
                                            <div class="cab_resumen_lista" id="spGerenteZona" style="height: 57px;">
                                            </div>


                                        </div>
                                    </div>
                                </div>
                            </div>
                            <ul class="service-list">
                                <!--RQ - 2507 (EGL)-->
								<li><a href="javascript:;" onclick="RedirectIngresaTuPedidoAnalytics();" class="q1" role="menu" region="Lateral" title="Ingresa tu Pedido" id="lnk-lat-ingresa-tu-pedido">Ingresa tu <span>Pedido</span></a></li>
								@if (ViewBag.PaisID == 3)
								{
                                    <!--Cambio link CGI(GOT)-->
									<li><a href="javascript:;" onclick="RedirectPagaEnLineaAnalytics();" class="q1pl" role="menu" region="Lateral" title="Paga en Línea" id="lnk-lat-paga-en-linea">Paga en <span>Línea</span></a></li>
                                    <li><a href="javascript:;" onclick="RedirectCatalogoAnalytics();" class="q2" role="menu" region="Lateral" title="Revisa y envía los Catálogos" id="lnk-lat-revisa-y-envia-los-catalogos">Revisa y envía los <span>Catálogos</span></a></li>
								}
								else
								{
									if (ViewBag.PaisID == 4)
									{
                                        <!--Cambio link CGI(GOT)-->
										<li><a href="https://www.zonapagos.com/t_belstar/pagos.asp" class="q2" role="menu" region="Lateral" title="Paga en Linea" id="lnk-lat-paga-en-linea">Paga en <span>Línea</span></a></li>      
										<li><a href="javascript:;" onclick="RedirectCatalogoAnalytics();" class="q2" role="menu" region="Lateral" title="Revisa y envía los Catálogos" id="lnk-lat-revisa-y-envia-los-catalogos">Revisa y envía los <span>Catálogos</span></a></li>
                                    }
                                    else
                                    {
                                        <!--Cambio link CGI(GOT)-->
										<li><a href="javascript:;" onclick="RedirectCatalogoAnalytics();" class="q2" role="menu" region="Lateral" title="Revisa y envía los Catálogos" id="lnk-lat-revisa-y-envia-los-catalogos">Revisa y envía los <span>Catálogos</span></a></li>
										<li><a href="javascript:;" onclick="RedirectBotonBienvenida('@Url.Action(ViewBag.BotonAction, ViewBag.BotonController)', '@ViewBag.BotonAnalytics');" class="q2" role="menu" region="Lateral" title="@ViewBag.BotonTexto@ViewBag.BotonClave" id="lnk-lat-seguimiento-de-tus-pedidos">@ViewBag.BotonTexto <span>@ViewBag.BotonClave</span></a></li>
                                    }
                                }
                                @if (ViewBag.IndicadorPermisoFIC == 1)
                                {
                                    <li><a href="javascript:;" onclick="RedirectPedidoAnalytics();" class="q3" role="menu" region="Lateral" title="Pedido FIC" id="lnk-lat-pedido-fic">Pedido <span>FIC</span></a></li>
                                }
                            </ul>
                            <!--/ .service-list-->
                        </div>
                        <!--/ .one-fourth .last-->
                    </div>
                </div>
            </div>
        </div>

        <div class="wrap">
            <div class="container clearfix">
                <div class="three-fourth-banner last">
                    <div class="border-wrapper">
                        <div class="one-fourth">
                            <div id="SeccionMediaDos" class="fade">
                            </div>
                        </div>
                        <!--/ .one-fourth-->
                        <div class="one-fourth">
                            <div id="SeccionMediaTres" class="fade">
                            </div>
                        </div>
                        <!--/ .one-fourth-->
                        <div class="one-fourth">
                            <div id="SeccionMediaCuatro" class="fade">
                            </div>
                        </div>
                        <!--/ .one-fourth-->

                    </div>
                </div>
                <!--/ .three-fourth-->
                <div class="one-fourth-banner last">
                    <div class="border-wrapper">
                        <div id="SeccionMediaUno" class="fade">
                        </div>
                    </div>
                </div>
                <!--/ .one-fourth-->
                <div class="box_articulo">
                    <div class="box_articulo_left">
                        <div class="box_articulo_module">
                            <div class="box_articulo_img">
                                <div id="SeccionBajaUno" class="fade">
                                </div>
                            </div>
                            <div class="box_articulo_texto">
                                <span class="sptexto"></span>
                            </div>
                        </div>
                        <div class="box_articulo_module">
                            <div class="box_articulo_img">
                                <div id="SeccionBajaDos" class="fade">
                                </div>
                            </div>
                            <div class="box_articulo_texto">
                                <span class="sptexto"></span>
                            </div>
                        </div>
                        <div class="box_articulo_module">
                            <div class="box_articulo_img">
                                <div id="SeccionBajaTres" class="fade">
                                </div>
                            </div>
                            <div class="box_articulo_texto">
                                <span class="sptexto"></span>
                            </div>
                        </div>
                        <div class="box_articulo_module">
                            <div class="box_articulo_img">
                                <div id="SeccionBajaCuatro" class="fade">
                                </div>
                            </div>
                            <div class="box_articulo_texto">
                                <span class="sptexto"></span>
                            </div>
                        </div>
                    </div>
                    <div class="box_articulo_right">
                        <div>
                            <p>Tu opinión <span>es importante</span></p>
                        </div>
                        <div class="faq">¿La orden de compra web, te parece  fácil para pasar tu pedido?</div>
                        <div>
                            <input name="group1" type="radio" />Si
                        </div>
                        <div>
                            <input name="group1" type="radio" />Más o menos
                        </div>
                        <div>
                            <input name="group1" type="radio" />No
                        </div>
                        <div class="div-3">
                            <div class="input_search">
                                <input type="submit" value="Confirmar" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--R2116 INICIO-->
                                if (ViewBag.PaisID == 9 && ViewBag.ValidaDatosActualizados == 1 && ViewBag.ValidaTiempoVentana == 1)
                                {
                                    if (ViewBag.ValidaSegmento == 1)
                                    { 
  <!---->
    
                                        //R2442 JICM Se agregó texto para actualización de datos bienvenida
    <div id="divActualizarDatosMexico" style="width: 600px; height: 500px">
        <div class="Content_modalActualizar" id="estiloModal" style="border: 0px;">
        <div id="divMensajeModalAfilia">
            Querida consultora para enterarte de las novedades de Belcorp, de la información de tu pedido y poder afiliarte al beneficio de
            Cliente Contacta Consultora es necesario que actualices tus datos.
        </div>
            <div class="div-3">
                <div class="titZ" style="width: 120px; margin-left: 3px;">Nombre:</div>
                <div class="selectA borde_redondeado" style="margin-left: 25px;">
                    <input id="m_txtNombre" type="text" maxlength="50" class="requerido" name="m_Nombre" />
                </div>

            </div>
            <div class="div-3">
                <div class="titZ" style="width: 120px; margin-left: 3px;">Apellidos:</div>
                <div class="selectA borde_redondeado" style="margin-left: 25px;">
                    <input id="m_txtApellidos" type="text" maxlength="50" class="requerido" name="m_Apellidos" />

                </div>
            </div>

            <div class="div-3">
                <div class="titZ" style="width: 120px; margin-left: 3px;">Teléfono de casa:</div>
                <div class="selectA borde_redondeado" style="margin-left: 25px;">
                    <input id="m_txtTelefonoCasa" style="letter-spacing: -1.1px; font-size: 12.5px;" type="text" maxlength="10" class="requerido ie8placeholder" placeholder="Número de teléfono incluye lada (10 dígitos)" name="Telefono" onkeypress="return FuncionesGenerales.ValidarSoloNumeros(event);" />
                </div>
            </div>
            <div class="div-3">
                <div class="titZ" style="width: 120px; margin-left: 3px;">Teléfono celular:</div>
                <div class="selectA borde_redondeado" style="margin-left: 25px;">
                    <input style="letter-spacing: -1.1px; font-size: 12.5px;" type="text" maxlength="10" name="Celular" id="m_txtTelefonoCelular" class="requerido ie8placeholder" placeholder="Número de teléfono incluye lada (10 dígitos)" onkeypress="return FuncionesGenerales.ValidarSoloNumeros(event);">
                </div>
            </div>
            <div class="div-3">
                <div class="titZ" style="width: 121px; margin-left: 3px;">Correo electrónico:</div>
                <div class="selectA borde_redondeado" style="margin-left: 25px;">
                    <input id="m_txtEMail" type="text" maxlength="50" class="requerido" name="Email" />
                </div>
            </div>


        </div>
        <label id="aviso"></label>

    </div>
    <div id="confirmacion_datos" style="width: 407px; height: 97px">
    </div>      
    <!---->
                                    
                                    
                                    }

                                }
                                else
                                {
    <div id="divActualizarDatos" style="display:none;">
            <div class="Content_Actualizar">
            <div class="titulo">
                    @if (ViewBag.PrefijoPais == "PE")
                    { <text> Actualización y autorización de uso de datos personales </text>  }
                    else
                    { <text> Actualizar Datos </text>  }

                    <div id="btnCerrarActualizarDatos" class="btnCerrar"></div>
                </div>
           <div class="mensaje_Consultora">
            Querida consultora actualiza tus datos para enterarte de las últimas novedades de Belcorp
            y de la información de tu pedido.
            </div>
           @* <div class="div-3">*@
                <div class="mensaje_CampoObligatorio">
                    *Campos obligatorios 
                </div>
            @*</div>*@
            <div class="div-3">
                <div class="titZ">Nombre</div>
                <div class="TextBox borde">
                        @Html.TextBoxFor(model => model.NombreCompleto, new { id = "txtNombre", maxlength = "50", @class = "inputTextBox" })
                </div>
            </div>
            <div class="div-3">
                <div class="titZ">Teléfono</div>
                <div class="TextBox borde">
                    @Html.TextBoxFor(model => model.Telefono, new { id = "txtTelefono", maxlength = "15", onblur = "return ValidateOnlyNums(this.id);", onkeypress = "return FuncionesGenerales.ValidarSoloNumerosAndSpecialCharater(event);", @class = "inputTextBox" })
                </div>
            </div>
            <div class="div-3">
                    <div class="titZ">Celular</div>
                <div class="TextBox borde">
                        @Html.TextBoxFor(model => model.Celular, new { id = "txtCelular", maxlength = "15", onblur = "return ValidateOnlyNums(this.id);", onkeypress = "return FuncionesGenerales.ValidarSoloNumerosAndSpecialCharater(event);", @class = "inputTextBox" })
                </div>
            </div>
            <div class="div-3">
                <div class="titZ">Correo electrónico</div><div class="asteriscos">*</div>
                <div class="TextBox borde">
                    @Html.TextBoxFor(model => model.EMail, new { id = "txtEMail", maxlength = "50", @class = "inputTextBox" })
                </div>
            </div>
            <div class="div-3">
                    <div class="titZ" style="padding-top: 0px">
                        Confirma tu<br />
                        correo electrónico
                    </div><div class="asteriscos" style="margin-top:0px;">*</div>
                <div class="TextBox borde">
                    @Html.TextBoxFor(model => model.EMail, new { id = "txtConfirmarEMail", maxlength = "50", @class = "inputTextBox" })
                </div>
            </div>
            <div class="">
                <div class="cambiarContrasena">
                        <a href="#" id="lnkCambiarContrasena" style="color: #993399; font-size: 12px; font-family: Arial; font-weight: bold; text-decoration:none;">CAMBIAR CONTRASEÑA </a>
                </div>
            </div>
            <div id="divCambiarContrasena" class="ocultarCambiarContrasena">
                <div class="div-3">
                    <div class="titZ">Nueva contraseña</div>
                    <div class="TextBox borde">
                            <input id="txtActualizarClaveSecreta" type="password" class="inputTextBox" />
                    </div>
                </div>
                <div class="div-3">
                    <div class="titZ" style="padding-top: 0px">Confirma tu<br /> nueva contraseña</div>
                    <div class="TextBox borde">
                            <input id="txtConfirmarClaveSecreta" type="password" class="inputTextBox" />
                    </div>
                </div>
            </div>
            <div style="padding-left:28px; padding-top:28px; ">
                <div class="" style="width: auto">
                        <input type="checkbox" id="chkAceptoContrato" class="checkBox"
                               @if (ViewBag.PrefijoPais == "PE") { <text> checked="checked" </text>   } />
                </div>
                <div class="terminosContrato">
                    Declaro que he leído los <a id="hrefTerminos" class="" style="color: #993399 ; cursor:pointer;">términos y condiciones </a>
                        sobre Protección de Datos Personales y que me <br /> encuentro de acuerdo con los mismos.
                </div>
                </div>
            <div class="contentActualizar">
                <div id="btnActualizarDatos" class="btnActualizar">
                </div>
            </div>
        </div>
        <div id="loadingScreen"></div>
        @Html.Hidden("hdn_Correo", (string)Model.EMail)
    </div>
    
    @*R2639 EGL*@
    <div id="divMensajeConfirmacion" style="display:none;">
        <div class="tituloMensajeConfirmacion">
            Actualizar Datos
            <div id="btnCerrarMensajeConfirmacion" class="btnCerrarMensajeConfirmacion">
            </div>
        </div>
        <div class="">
            <div id="idMensajeActualizacionDatos" class="textoMensajeConfirmacion">
              
                    <div class="checkImage">
                         Listo, los datos se actualizaron correctamente.
                    </div>
                    <br />
                Ahora, revisa tu correo y haz clic en el enlace para terminar el proceso.
            </div>
            <div id="idObservacionesActualizacionDatos" class="textoMensajeConfirmacion" style="padding-top: 0px; padding-bottom: 15px;">
            </div>
        </div>
    </div>
    
    
    
        <div id="divDemandaAnticipada">
        <div class="textoMensajeDA">
            ¡Pasa tu pedido por demanda anticipada y recibe <br />
            estos beneficios! <br />
            - Un producto de regalo (Ver belcorpnoticias) <br />
            - Flete gratis <br /> <br />
            Las condiciones para pasar tu pedido en demanda <br />
            anticipada son: <br />
            - Cumplir con el monto mínimo (no cuenta <br />
            expoferta) y máximo (nuevas) <br />
                - Pasar tu pedido hasta el <span class="textFechaDA">
                    .<br /><br />
            Recuerda que si aceptas participar no podrás<br />
                    modificar tu pedido luego del <span class="textFechaDA">.<br />
            
        </div>
                <div class="botonesConfirmacion">
                <input id="btnAcepto" type="button" value="Acepto participar" onclick="javascript: AceptarDemandaAnticipada();" />
                <input id="btnNoAcepto" type="button" value="No deseo participar" onclick="javascript: CancelarDemandaAnticipada();" />
                </div>

        </div>
    
                                }
    <!--R2116 FIN-->
    <!-- R2004 -->
    <div id="divComunicado">
        <div style="font-size: 20px; color: #6c217f; font-weight: bold;">
            Mensaje IMPORTANTE – Retiro de producto
        </div>
        @if (ViewBag.NombrePais != "Ecuador")
        {
            if (ViewBag.NombrePais == "Colombia")
            {
		<div class="border-wrapper">
                <p>
                    Querida Consultora,
            </p>
            <p align="justify">
                Nos vemos en la necesidad de comunicarte que, como resultado del esfuerzo por proteger a nuestros consumidores,  detectamos que el nuevo producto de depilación Xpress Your Body de Cyzone presenta a la fecha algunos casos aislados de reacción adversa en la piel.  
            </p>
            <p align="justify">
                Comprometidos siempre con el bienestar de nuestros clientes, hemos decidido  retirar del mercado la crema depilatoria Xpress Your Body de Cyzone adquirida en la C-10 y C-11 de 2014. 
            </p>
            <p align="justify">
                Por eso te pedimos que nos apoyes  recogiendo, a la brevedad posible, el producto Xpress Your Body de Cyzone de tus clientes y se lo hagas llegar a tu gerente de Zona lo antes posible.
            </p>
            <p align="justify">
                El reembolso del dinero (precio catálogo) de las unidades solicitadas por ti se abonó en tú cuenta el día 23 de Julio para que puedas reembolsar a tú cliente en el momento del recojo.
            </p>
            <p align="justify">
                <u>Importante:</u> todas las consultoras que entreguen los productos lo antes posible, recibirán una fragancia de Obsequio que será entregado por tu gerente de Zona.
            </p>
            <p align="justify">
                Qué decir a tus clientes cuando pidas el producto?: “La crema depilatoria de Cyzone está presentando algunos casos aislados de irritación. Belcorp nos ha pedido recoger el producto y regresarte el dinero”
            </p>
            <p align="justify">
                En caso de recibir reclamos o comentarios de tus clientes personalmente o en las redes sociales como Facebook, te pedimos dar la siguiente respuesta:
            </p>
            <p align="justify">
                <strong>“Entiendo tu situación y por ello, es importante que te comuniques a Belcorp al teléfono 5948060 en Bogotá ó 01 8000 937452 en el resto del país o a través del chat en la página www.somosbelcorp.com ".</strong> Siendo servicio al cliente quien dará solución de inmediato.
            </p>
            <p align="justify">
                Queremos agradecerte por el apoyo y la comprensión para recoger cuanto antes este producto de tus clientes y te presentamos disculpas y estamos comprometidos con el servicio, por eso continuaremos trabajando para evitar estos inconvenientes.
            </p>
			<p align="justify">
				Nota: En caso de no haber entregado el producto a tu Gerente de Zona, lo puedes llevar a la Conferencia de cierre de C13 o entregar al transportador cuando recibas el pedido de C13. 
			</p>
            <p>
                Atentamente,
            </p>
            <p>
                Servicio al Cliente Belcorp
            </p>
        </div>
            }
            else
            {
        <div class="border-wrapper">
                <p>
                    Querida Consultora,
            </p>
            <p align="justify">
                Nos vemos en la necesidad de comunicarte que, como resultado del esfuerzo por proteger a nuestros consumidores,  detectamos que el nuevo producto de depilación  Xpress Your Body de Cyzone presenta a la fecha algunos casos aislados de reacción adversa en la piel. 
            </p>
            <p align="justify">
                Comprometidos siempre con el bienestar de nuestros clientes, hemos decidido  retirar del mercado la Crema Depilatoria para rostro, axilas y bikini con extracto de Caléndula x 50 g Xpress Your Body de Cyzone adquirida en la C-10 y C-11 de 2014.
            </p>
            <p align="justify">
                Por eso <strong>te pedimos que nos apoyes  recogiendo, a la brevedad posible, el producto Xpress Your Body de Cyzone de tus clientes y se lo hagas llegar a tu gerente de Zona antes del 1 de Agosto.</strong> 
            </p>
            <p align="justify">
                El reembolso del dinero (precio de catálogo) de las unidades colocadas por ti se  abonó en tú cuenta Belcorp el día 23 de Julio para que puedas reembolsar a tú cliente en el momento del recojo.
            </p>
            <p align="justify">
                <u>Importante:</u> todas las consultoras que entreguen los productos hasta el 1 de agosto de 2014, recibirán un incentivo que será entregado por tu gerente de Zona  (Consulta a tu línea Belcorp Responde para mayor información).
            </p>
            <p align="justify">
                Qué decir a tus clientes cuando pidas el producto: “La crema depilatoria de Cyzone está presentando algunos casos aislados de irritación. Belcorp nos ha pedido recoger el producto y regresarte el dinero”
            </p>
            <p align="justify">
                En caso de recibir reclamos o comentarios de tus clientes personalmente o en las redes sociales como Facebook, te pedimos dar la siguiente respuesta:
            </p>
            <p align="justify">
                <strong>“Entiendo tu situación y por ello, es importante que te comuniques con la línea de atención al cliente de Belcorp y marques opción 1 ".</strong> Siendo servicio al cliente quien dará solución de inmediato.
            </p>
            <p align="justify">
                Queremos agradecerte por el apoyo y la comprensión para recoger cuanto antes este producto de tus clientes.
            </p>
            <p>
                Atentamente,
            </p>
            <p>
                Servicio al Cliente Belcorp
            </p>
            <p align="justify">
                <u><strong>NOTA: Comunicado para uso exclusivo de la consultora Belcorp. No compartir este documento a través de copias o redes sociales (Facebook, correo electrónico, etc).</strong></u>
            </p>
        </div>
            }
        }
        else
        {
        <div class="border-wrapper">
                <p>
                    Querida Consultora Belcorp:
            </p>
            <p align="justify">
                A través de la presente queremos informarte que, por política interna de la compañía, hemos decidido que el nuevo producto de depilación Xpress Your Body de Cyzone adquirido en la C-10 y C-11 de 2014, sea retirado del mercado. 
            </p>
            <p align="justify">
                Por eso te solicitamos que nos apoyes recogiendo, a la brevedad posible el producto Xpress Your Body de Cyzone a tus clientes y se  lo  entregues directamente a la  Gerente de tu Zona hasta  1 de Agosto de 2014. 
            </p>
            <p align="justify">
                El reembolso del dinero de las unidades adquiriste, ha sido abonado en tú cuenta Belcorp a precio de catálogo (7.99 USD por unidad)  el día 24 de Julio, para que en el momento del recojo  puedas reembolsar  el valor del producto a tu cliente. 
            </p>
            <p align="justify">
                Todas las consultoras que entreguen los productos hasta el 1 de agosto de 2014, recibirán un incentivo que será entregado por la  Gerente de Zona  (Consulta a tu línea Belcorp Responde para mayor información).
            </p>
            <p align="justify">
                En caso de recibir comentarios de tus clientes personalmente o en las redes sociales como Facebook, te pedimos les indiques que sean  remitidos al <strong>Call Center Belcorp 1800-766672 o  al buzón callcenterec@belcorp.biz "</strong>, a fin de que Servicio al Cliente brinde una solución inmediata
            </p>
            <p align="justify">
                Queremos agradecerte por el apoyo, comprensión  y compromiso para recoger cuanto antes este  producto  a  tus clientes.
            </p>
            <p align="justify">
                Atentamente,
            </p>
            <p>
                Servicio al Cliente<br />
                Belcorp-Ecuador
            </p>
        </div>
        }
    </div>
        /*GR-1209*/
        <div id="divComunicadoVisualizacion">
            <div class="tituloC">
                &nbsp;
                <div id="btnCerrarComunicado" class="btnCerrar"></div>
            </div>
            <a href="https://www.facebook.com/SomosBelcorpOficial/posts/1084375931585422:0" target="_blank">
                <img src="~/Content/Images/ComunicadoEC.jpg" />
            </a>
            <div>
                <div>
                    <label class="lblComunicadoV">
                        <input type="checkbox" id="chkMostrarComunicado" class="chkComunicadoV" />
                        No volver a mostrar
                    </label>
                </div>
            </div>
        </div>

    <div id="divContrato">
        <div class="terminos_title_2">
            Aceptación de Contrato
        </div>
        <div class="terminos_content_contrato">
            <div class="terminos_content_3">
                <div class="border-wrapper">
                    @* <div class="terminos">
                        <span>Lee cuidadosamente estos “Términos, Políticas y Condiciones” antes de usar esta página
                            Web. somosbelcorp.com es administrada por TRANSBEL S.A. y sólo puede ser accedida por
                            Consultoras.</span>
                        <p>
                            Al ingresar y usar a esta página Web es una aceptación implícita de los términos, políticas y condiciones aquí
                            descritos. Éstos están sujetos a la legislación que se aplique en el país, por lo que aceptas también los
                            puntos establecidos en la presente y las consecuencias que éstos pudiesen implicar. Estos términos y
                            condiciones podrán variar en cualquier momento, actualizándose dichos cambios periódicamente en la
                            presente página de "Terminos, Políticas y Condiciones de Uso".

                        </p>
                        <p>
                            <span>Restricciones de acceso al sitio</span>
                            Nos reservamos el derecho a restringir el acceso a este sitio a cualquier consejera, cuando lo consideremos conveniente, con o sin notificación previa.
                        </p>
                        <p>
                            <span>Aceptación</span>
                            Declaro que he leído y estoy de acuerdo con los términos del contrato aquí descrito.
                        </p>
                    </div>*@
                    <div style="color: #0094ff">
                        <!-- 2139 -->
                        Querida consultora @ViewBag.SobreNombre, al dar clic en el botón aceptas los términos y condiciones de la Solicitud de Crédito.  
                    </div>
                </div>
                <br />
                <div>
                    <a id="hrefContrato" style="color: #0094ff; cursor: pointer;">Conoce el detalle aquí.</a>
                </div>
                <br />
                <div class="div-3">
                    <div style="width: 257px; float: left">&nbsp;</div>
                    <div class="input_modifica_horizontal">
                        <input id="btnAgregar" type="button" value="Aceptar" onclick="javascript: AceptarContrato();" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ITG 1796 Modificado 15082014 -->
    <div id="divFlexipago">
        <div id="banner">
            @if (ViewBag.PaisID == 3)
            {
                <img src="@Url.Content("~/Content/layer-flx-cl/img/fondo_banner_CO_flexipago.jpg")" border="0">
                <a href="javascript:void(0);" onclick="javascript:ConoceFlex()" class="btn coneFlexi">
                    <img src="@Url.Content("~/Content/layer-flx-cl/img/boton_conoce_05.png")" border="0">
                </a>
                <a href="javascript:void(0);" onclick="javascript:InscribeteFlex()" class="btn inscriFlexi">
                    <img src="@Url.Content("~/Content/layer-flx-cl/img/boton_inscribete_03.png")" border="0">
                </a>
                <a href="javascript:void(0);" onclick="javascript:CerrarPopUpFlex()" class="close"><span>Cerrar</span></a>
                <a href="javascript:void(0);" onclick="javascript:RechazarInvitacionFlex()" class="inscribirme"><span>No deseo inscribirme</span></a>
            }
            else
            {
            <img src="@Url.Content("~/Content/layer-flx-co/img/fondo_banner_CO_flexipago.jpg")" border="0">
            <a href="javascript:void(0);" onclick="javascript:ConoceFlex()" class="btn coneFlexi">
                    <img src="@Url.Content("~/Content/layer-flx-co/img/boton_conoce_05.png")" border="0">
                </a>
            <a href="javascript:void(0);" onclick="javascript:InscribeteFlex()" class="btn inscriFlexi">
                    <img src="@Url.Content("~/Content/layer-flx-co/img/boton_inscribete_03.png")" border="0">
                </a>
            <a href="javascript:void(0);" onclick="javascript:CerrarPopUpFlex()" class="close"><span>Cerrar</span></a>
            <a href="javascript:void(0);" onclick="javascript:RechazarInvitacionFlex()" class="inscribirme"><span>No deseo inscribirme</span></a>
            }
    </div>
    </div>
    <!-- 1796 Modificado 15082014 -->

    <div id="divMensajeContrato">
        <div class="terminos_title_Contrato">
            ::Mensaje::
        </div>
        <div class="Content_modal">
            <div class="message_text">
                Ocurrió un error en la comunicación o la sesión ha expirado. Por favor vuelva a autenticarse.
            </div>
        </div>
    </div>
}
else
{
    <div id="divSac">
        <div class="wrap_cab">

            <div class="filtros2">
                <div class="elements">
                    <div style="padding: 3px 0px 0px 0px;">
                        <img src='@Url.Content("~/Content/Images/sac.png")' />
                    </div>
                </div>
            </div>
        </div>
        <div class="wrap">
            <div class="container clearfix">
            </div>
        </div>
    </div>
}
<script type="text/javascript">

    $(window).load(function () {
        /* 1987 - Inicio */
        if ("@ViewBag.ValidaSuenioNavidad" == "0") {
            showDialog('idSueniosNavidad');
        }        
        /* 1987 - Fin */
        $.ajax({
            type: 'POST',
            url: baseUrl + 'Banner/ObtenerBannerPaginaPrincipal',
            data: '',
            dataType: 'Json',
            success: function (dataResult) {
                if (checkTimeout(dataResult)) {
                    if (dataResult.success) {
                        /*
                           * 1: Seccion Principal
                           * 2: Seccion Intermedia 1
                           * 3: Seccion Intermedia 2
                           * 4: Seccion Intermedia 3
                           * 5: Seccion Intermedia 4
                           * 6: Seccion Baja 1
                           * 7: Seccion Baja 2
                           * 8: Seccion Baja 3
                           * 9: Seccion Baja 4
                        */
                        var delayPrincipal = 0, delaySMedia1 = 0, delaySMedia2 = 0, delaySMedia3 = 0, delaySMedia4 = 0, delaySBaja1 = 0, delaySBaja2 = 0, delaySBaja3 = 0, delaySBaja4 = 0;
                        var count = 0, islinkReq = false;
                        //25005
                        var Titulo = "";
                        var Posicion = "";
                        var Id;
                        //ir20160215
                        var TipoAccion = 0;
                        var Creative = "";
                        var vpromotions = new Array();

                        while (dataResult.data.length > count) {
                            var indexpos = dataResult.data[count].Archivo.lastIndexOf('/');
                            // var fileName = dataResult.data[count].Archivo.substring(indexpos);
                            // 1664
                            var fileName = dataResult.data[count].Archivo;
                            //25005
                            Titulo = dataResult.data[count].Titulo;
                            Id = dataResult.data[count].BannerID.toString();
                            Posicion = dataResult.data[count].Nombre;
                            //ir20160215
                            TipoAccion = dataResult.data[count].TipoAccion;
                            if (dataResult.data[count].GrupoBannerID.toString() == '1') {

                                Posicion = dataResult.data[count].Nombre + '-' + dataResult.data[count].Orden;

                            }
                            switch (dataResult.data[count].GrupoBannerID) {
                                case 1: // Seccion Principal     
                                    var iniHtmlLink = ((dataResult.data[count].URL.length > 0 && dataResult.data[count].TipoAccion == 0) || dataResult.data[count].TipoAccion == 1 || dataResult.data[count].TipoAccion == 2) ? "<a href='#' onclick=\"return EnlaceBanner('" + dataResult.data[count].URL + "','" + dataResult.data[count].Titulo + "','" + dataResult.data[count].TipoAccion + "','" + dataResult.data[count].CuvPedido + "','" + dataResult.data[count].CantCuvPedido + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" rel='marquesina'>" : "";
                                    var finHtmlLink = ((dataResult.data[count].URL.length > 0 && dataResult.data[count].TipoAccion == 0) || dataResult.data[count].TipoAccion == 1 || dataResult.data[count].TipoAccion == 2) ? '</a>' : '';

                                    $('.TB_Wrapper .Slides').append('<div class="Slide" data-position="235,270" data-width="520" data-height="60">' +
                                                                iniHtmlLink +
                                                                // '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink +
                                                                '<img src="' + fileName + '" />' + finHtmlLink + // 1664

                                                            '<div class="SlideText-2">' +
                                                                '<h1>' + dataResult.data[count].Titulo + '</h1>' +
                                                            '</div>' +
                                                    '</div>');
                                    delayPrincipal = dataResult.data[count].TiempoRotacion;
                                    break;
                                case 2: //Seccion Intermedia 1
                                    var TrackText = $.trim(dataResult.data[count].Nombre.split('-')[1]);
                                    if (dataResult.data[count].TipoContenido == 0) {
                                        var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerIntermedios('" + dataResult.data[count].URL + "','" + TrackText + "','" + dataResult.data[count].PaginaNueva + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-intermedio-1'>" : "";
                                        var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                        // $('#SeccionMediaUno').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink + '</div>');
                                        // 1664
                                        $('#SeccionMediaUno').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                        delaySMedia1 = dataResult.data[count].TiempoRotacion;
                                    }
                                    else {
                                        // $('#SeccionMediaUno').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + '@Url.Content("~/Content/Banners")' + fileName + "'/>" + "</div>");
                                        // 1664
                                        $('#SeccionMediaUno').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + fileName + "'/>" + "</div>");
                                        delaySMedia1 = dataResult.data[count].TiempoRotacion;
                                    }
                                    break;
                                case 3: //Seccion Intermedia 2
                                    var TrackText = $.trim(dataResult.data[count].Nombre.split('-')[1]);
                                    if (dataResult.data[count].TipoContenido == 0) {
                                        var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerIntermedios('" + dataResult.data[count].URL + "','" + TrackText + "','" + dataResult.data[count].PaginaNueva + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-intermedio-2'>" : "";
                                        var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                        // $('#SeccionMediaDos').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '" alt="' + dataResult.data[count].Titulo + '" />' + finHtmlLink + '</div>');
                                        // 1664
                                        $('#SeccionMediaDos').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                        delaySMedia2 = dataResult.data[count].TiempoRotacion;
                                    }
                                    else {
                                        // $('#SeccionMediaDos').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + '@Url.Content("~/Content/Banners")' + fileName + "'/>" + "</div>");
                                        // 1664
                                        $('#SeccionMediaDos').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + fileName + "'/>" + "</div>");
                                        delaySMedia1 = dataResult.data[count].TiempoRotacion;
                                    }
                                    break;
                                case 4: //Seccion Intermedia 3
                                    var TrackText = $.trim(dataResult.data[count].Nombre.split('-')[1]);
                                    if (dataResult.data[count].TipoContenido == 0) {
                                        var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerIntermedios('" + dataResult.data[count].URL + "','" + TrackText + "','" + dataResult.data[count].PaginaNueva + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-intermedio-3'>" : "";
                                        var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                        // $('#SeccionMediaTres').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink + '</div>');
                                        // 1664
                                        $('#SeccionMediaTres').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                        delaySMedia3 = dataResult.data[count].TiempoRotacion;
                                    }
                                    else {
                                        // $('#SeccionMediaTres').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + '@Url.Content("~/Content/Banners")' + fileName + "'/>" + "</div>");
                                        // 1664
                                        $('#SeccionMediaTres').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + fileName + "'/>" + "</div>");
                                        delaySMedia1 = dataResult.data[count].TiempoRotacion;
                                    }
                                    break;
                                case 5: //Seccion Intermedia 4
                                    var TrackText = $.trim(dataResult.data[count].Nombre.split('-')[1]);
                                    if (dataResult.data[count].TipoContenido == 0) {
                                        var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerIntermedios('" + dataResult.data[count].URL + "','" + TrackText + "','" + dataResult.data[count].PaginaNueva + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-intermedio-4'>" : "";
                                        var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                        // $('#SeccionMediaCuatro').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink + '</div>');
                                        // 1664
                                        $('#SeccionMediaCuatro').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                        delaySMedia4 = dataResult.data[count].TiempoRotacion;
                                    }
                                    else {
                                        // $('#SeccionMediaCuatro').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + '@Url.Content("~/Content/Banners")' + fileName + "'/>" + "</div>");
                                        // 1664
                                        $('#SeccionMediaCuatro').append("<div onclick=\"AbrirMensaje('" + dataResult.data[count].URL + "','" + TrackText + "');\" >" + "<img src='" + fileName + "'/>" + "</div>");
                                        delaySMedia1 = dataResult.data[count].TiempoRotacion;
                                    }
                                    break;
                                case 6: //Seccion Baja 1
                                    var trackingText = dataResult.data[count].TituloComentario;
                                    var trackingDesc = dataResult.data[count].TextoComentario;
                                    $($("#SeccionBajaUno").parent().parent().find(".sptexto")).text(trackingText);
                                    $($("#SeccionBajaUno").parent().parent().find(".sptexto")).after(trackingDesc);
                                    var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerInferiores('" + dataResult.data[count].URL + "','" + trackingText + "','0" + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-inferior'>" : "";
                                    var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                    // $('#SeccionBajaUno').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink + '</div>');
                                    // 1664
                                    $('#SeccionBajaUno').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                    delaySBaja1 = dataResult.data[count].TiempoRotacion;
                                    break;
                                case 7: //Seccion Baja 2
                                    var trackingText = dataResult.data[count].TituloComentario;
                                    var trackingDesc = dataResult.data[count].TextoComentario;
                                    $($("#SeccionBajaDos").parent().parent().find(".sptexto")).text(trackingText);
                                    $($("#SeccionBajaDos").parent().parent().find(".sptexto")).after(trackingDesc);
                                    var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerInferiores('" + dataResult.data[count].URL + "','" + trackingText + "','0" + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-inferior'>" : "";
                                    var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                    // $('#SeccionBajaDos').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink + '</div>');
                                    // 1664
                                    $('#SeccionBajaDos').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                    delaySBaja2 = dataResult.data[count].TiempoRotacion;
                                    break;
                                case 8: //Seccion Baja 3
                                    var trackingText = dataResult.data[count].TituloComentario;
                                    var trackingDesc = dataResult.data[count].TextoComentario;
                                    $($("#SeccionBajaTres").parent().parent().find(".sptexto")).text(trackingText);
                                    $($("#SeccionBajaTres").parent().parent().find(".sptexto")).after(trackingDesc);
                                    var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerInferiores('" + dataResult.data[count].URL + "','" + trackingText + "','0" + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-inferior'>" : "";
                                    var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                    // $('#SeccionBajaTres').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink + '</div>');
                                    // 1664
                                    $('#SeccionBajaTres').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                    delaySBaja3 = dataResult.data[count].TiempoRotacion;
                                    break;
                                case 9: //Seccion Baja 4
                                    //debugger;
                                    var trackingText = dataResult.data[count].TituloComentario;
                                    var trackingDesc = dataResult.data[count].TextoComentario;
                                    $($("#SeccionBajaCuatro").parent().parent().find(".sptexto")).text(trackingText);
                                    $($("#SeccionBajaCuatro").parent().parent().find(".sptexto")).after(trackingDesc);
                                    /*  PCABRERA GR-1591 */
                                    //var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerInferiores('" + dataResult.data[count].URL + "','" + trackingText + "','1" + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-inferior'>" : "";
                                    var iniHtmlLink = dataResult.data[count].URL.length > 0 ? "<a href='javascript:;' onclick=\"return SetGoogleAnalyticsBannerInferiores('" + dataResult.data[count].URL + "','" + trackingText + "','0" + "','" + dataResult.data[count].BannerID + "','" + Posicion + "','" + dataResult.data[count].Titulo + "');\" target='_blank' rel='banner-inferior'>" : "";
                                    var finHtmlLink = dataResult.data[count].URL.length > 0 ? '</a>' : '';
                                    // $('#SeccionBajaCuatro').append("<div>" + iniHtmlLink + '<img src="' + '@Url.Content("~/Content/Banners")' + fileName + '"/>' + finHtmlLink + '</div>');
                                    // 1664
                                    $('#SeccionBajaCuatro').append("<div>" + iniHtmlLink + '<img src="' + fileName + '"/>' + finHtmlLink + '</div>');
                                    delaySBaja4 = dataResult.data[count].TiempoRotacion;
                                    break;
                            }
                            count++;
                            //ir20160215
                            if (TipoAccion == 0) {
                                Creative = "Banner";
                            }
                            else if (TipoAccion == 1) {
                                Creative = "Producto";
                            } 

                            //ir20160215
                            /*cambios RQ 2505 DC*/
                            vpromotions.push({
                                'name': Titulo,
                                'id': Id,
                                'position': Posicion,
                                'creative': Creative
                            });
                            /*End cambios RQ 2505 DC*/
                        }
                        /*cambios RQ 2505 DC*/
                        if(count > 0){
                            dataLayer.push({
                                'event': 'promotionView',
                                'ecommerce': {
                                    'promoView': {
                                        'promotions': vpromotions
                            }
                            }
                            });
                        }
                        /*End cambios RQ 2505 DC*/

                       /* Verificar si existes slides para la seccion principal */
                        if ($('.TB_Wrapper .Slide').length) {

                            var versionIE = $.browser.version;          //agregado req 2068
                            var tiempoBanner = 0;                       //agregado req 2068
                            if (versionIE <= 8)                         //agregado req 2068
                            { tiempoBanner = 8000; }                    //agregado req 2068
                            else { tiempoBanner = 500; }                //agregado req 2068
                            setTimeout(function transbannerHome() {     //agregado req 2068
                                $('.TB_Wrapper').TransBanner({
                                    slide_delaytime: delayPrincipal, /* en segundos*/
                                    slide_transition: 3,
                                    navigation_type: 2,
                                    button_space: 5,
                                    button_show_next: false,
                                    caption_bg_blur: 10,
                                    caption_padding_x: 19,
                                    caption_padding_y: 15,
                                    caption_float_mode: true,
                                    caption_position_x: 500,
                                    caption_position_y: 0,
                                    caption_bg_opacity: 0,
                                    caption_width: 200,
                                    caption_height: 250,
                                    caption_bg_radius: 0,
                                    responsive_screen_based_limits: true
                                });
                            }, tiempoBanner);//     agregado req 2068
                        }
                        else { /* Si no existe redimensionar la altura para que no descuadre la pagina*/
                            $('.TB_Wrapper').attr('style', 'height:270px');
                        }
                       // LoadComplete(delaySMedia1, delaySMedia2, delaySMedia3, delaySMedia4, delaySBaja1, delaySBaja2, delaySBaja3, delaySBaja4);

                        setTimeout("LoadComplete(" + delaySMedia1 + "," + delaySMedia2 + "," + delaySMedia3 + "," + delaySMedia4 + "," +
                            delaySBaja1 + "," + delaySBaja2 + "," + delaySBaja3 + "," + delaySBaja4 + ");", 200);
                    }
                    else {
                        alert('Error al cargar el Banner.');
                    }
                }
            }
        });
    });

    function SetGoogleAnalyticsBannerPrincipal(URL, TrackText,Id, Posicion, Titulo) {

        dataLayer.push({
            'event': 'promotionClick',
            'ecommerce': {
                'promoClick': {
                    'promotions': [
                     {
                         'id': Id,
                         'name': Titulo,
                         'position': Posicion,
                         'creative': 'Banner'
                     }]
                }
            }
        });
        //R20151126 Inicio
        if (URL > 0) {
            var id = URL;
            var url = "@Url.Action("Cursos", "MiAcademia", new { idcurso="idcurso_"})";
            url = url.replace("idcurso_", id);
            window.open(url, '_blank');
            //R20151126 Fín
        }
        else {

        window.open(URL, '_blank');
        }


        return false;
    }

    //ir20160215
    function SetGoogleAnalyticsPromotionClick(Id, Posicion, Titulo) {

        dataLayer.push({
            'event': 'promotionClick',
            'ecommerce': {
                'promoClick': {
                    'promotions': [
                     {
                         'id': Id,
                         'name': Titulo,
                         'position': Posicion,
                         'creative': 'Producto'
                     }]
                }
            }
        });

        return false;
    }
    //fr20160215
    function SetGoogleAnalyticsBannerIntermedios(URL, TrackText, PaginaNueva, Id, Posicion, Titulo) {

        dataLayer.push({
            'event': 'promotionClick',
            'ecommerce': {
                'promoClick': {
                    'promotions': [
                     {
                         'id': Id,
                         'name': Titulo,
                         'position': Posicion
                     }]
                }
            }
        });
        if (PaginaNueva == "1") {
            //R20151126 Inicio
            var id = URL;

            if (URL > 0) {
                var url = "@Url.Action("Cursos", "MiAcademia", new { idcurso="idcurso_"})";
                url = url.replace("idcurso_", id);
                window.open(url, '_blank');
                //R20151126 Fín
            }
            else {

            window.open(URL, '_blank');
        }

        }
        else {

            window.location.href = URL;
        }

        return false;
    }

    function SetGoogleAnalyticsBannerInferiores(URL, TrackText, Tipo, Id, Posicion, Titulo) {
        dataLayer.push({
            'event': 'promotionClick',
            'ecommerce': {
                'promoClick': {
                    'promotions': [
                     {
                         'id': Id,
                         'name': Titulo,
                         'position': Posicion
                     }]
                }
            }
        });
        if (Tipo == "1")
            window.location.href = URL;
        else
            //R20151126 Inicio
            var id = URL;
        if (URL > 0) {
            var url = "@Url.Action("Cursos", "MiAcademia", new { idcurso="idcurso_"})";
            url = url.replace("idcurso_", id);
            window.open(url, '_blank');
            //R20151126 Fín
        }
        else {

            window.open(URL, '_blank');
        }

        return false;
    }

    function RedirectIngresaTuPedidoAnalytics() {
        _gaq.push(['_trackEvent', 'Menu-Lateral', 'Pedido']);
        dataLayer.push({
            'event': 'pageview',
            'virtualUrl': '/Menu-Lateral/Pedido'
        });
        location.href = '@Url.Action("Index", "Pedido")';
    }

    function RedirectCatalogoAnalytics() {
        _gaq.push(['_trackEvent', 'Menu-Lateral', 'Catalogo']);
        dataLayer.push({
            'event': 'pageview',
            'virtualUrl': '/Menu-Lateral/Catalogo'
        });
        location.href = '@Url.Action("Index", "Catalogo")';
    }
    /* 2012 - Inicio */
    function RedirectPagaEnLineaAnalytics() {
        _gaq.push(['_trackEvent', 'Menu-Lateral', 'Paga-en-linea']);
        dataLayer.push({
            'event': 'pageview',
            'virtualUrl': '/Menu-Lateral/Paga-en-linea'
        });
        /*
         INICIO CAH - R20150931
      */
        var pais = "@ViewBag.rutaChile";
        if (pais != "") {
            window.open(pais + '@ViewBag.UrlChileEncriptada', "_blank");
        }
        else {
            window.open('https://www.belcorpchile.cl/BP_Servipag/PagoConsultora.aspx?c=@ViewBag.UrlChileEncriptada', "_blank");
        }

        /*
           FIN CAH - R20150931
        */
    }
    /* 2012 - Fin */
    function RedirectClientesAnalytics() {
        _gaq.push(['_trackEvent', 'Menu-Lateral', 'Clientes']);
        dataLayer.push({
            'event': 'pageview',
            'virtualUrl': '/Menu-Lateral/Clientes'
        });
        location.href = '@Url.Action("Index", "Cliente")';
    }

    function RedirectBotonBienvenida(url, etiquetaGa) {
        _gaq.push(['_trackEvent', 'Menu-Lateral', etiquetaGa]);
        dataLayer.push({
            'event': 'pageview',
            'virtualUrl': '/Menu-Lateral/' + etiquetaGa
        });
        location.href = url;
    }

    function RedirectPedidoAnalytics() {
        _gaq.push(['_trackEvent', 'Menu-Lateral', 'PedidoFIC']);
        location.href = '@Url.Action("Index", "PedidoFIC")';
    }

    function AbrirMensaje(Mensaje, TrackText) {
        _gaq.push(['_trackEvent', 'Banner-Intermedio', TrackText]);
        dataLayer.push({
            'event': 'pageview',
            'virtualUrl': '/Banner-Intermedio/' + TrackText
        });
        $('#TextoMensajeBanner').text(Mensaje);
        $('#DialogoMensajeBanner').dialog('option', 'title', 'Estimada Consultora: ');
        $('#DialogoMensajeBanner').dialog('open');
    }
    function LoadComplete(delaySMedia1, delaySMedia2, delaySMedia3, delaySMedia4,
                           delaySBaja1, delaySBaja2, delaySBaja3, delaySBaja4) {

        /*Verificar si existen slides para las demas secciones*/
        if ($('#SeccionMediaUno img').length > 0)
            $('#SeccionMediaUno').cycle({ speed: 500, timeout: delaySMedia1 * 1000 }); /* en milisegundos*/

        if ($('#SeccionMediaDos img').length > 0)
            $('#SeccionMediaDos').cycle({ speed: 500, timeout: delaySMedia2 * 1000 });

        if ($('#SeccionMediaTres img').length > 0)
            $('#SeccionMediaTres').cycle({ speed: 500, timeout: delaySMedia3 * 1000 });

        if ($('#SeccionMediaCuatro img').length > 0)
            $('#SeccionMediaCuatro').cycle({ speed: 500, timeout: delaySMedia4 * 1000 });

        if ($('#SeccionBajaUno img').length > 0)
            $('#SeccionBajaUno').cycle({ speed: 500, timeout: delaySBaja1 * 1000 });

        if ($('#SeccionBajaDos img').length > 0)
            $('#SeccionBajaDos').cycle({ speed: 500, timeout: delaySBaja2 * 1000 });

        if ($('#SeccionBajaTres img').length > 0)
            $('#SeccionBajaTres').cycle({ speed: 500, timeout: delaySBaja3 * 1000 });

        if ($('#SeccionBajaCuatro img').length > 0)
            $('#SeccionBajaCuatro').cycle({ speed: 500, timeout: delaySBaja4 * 1000 });
    }
    /* 1987 - Inicio */
    function MostrarCajaSuenioNavidad() {
        $("#txtSuenioNavidad").focus();
        $("#imgSuenioNavidad").fadeOut("fast", function () {
            $("#imgSuenioNavidad2").fadeIn("fast");
        });
        $("#registroSuenioNavidad").show();
        scrollWin();
    }
    function scrollWin() {
        $('html,body').animate({
            scrollTop: $("#registroSuenioNavidad").offset().top - 500
        }, 500);
    }
    function cerrarSueniosNavidad() {
        $('#idSueniosNavidad').dialog('close');
    }
    function cerrarSuenioConfirmacion() {
        $('#divSuenioConfirmacion').dialog('close');
    }
    /* 1987 - Fin */
</script>
<script type="text/javascript">
    var CE_SNAPSHOT_NAME = "Home";
</script>
<div id="DialogMensajesBanner2">
    <div class="Content_modal">
        <div class="message_text">
            Ocurrió un error en la comunicación o la sesión ha expirado. Por favor vuelva a autenticarse.
        </div>
    </div>
</div>
<div id="DialogoMensajeBanner">
    <div class="Content_modal">
        <div class="message">
            <span id="TextoMensajeBanner"></span>
        </div>
    </div>
</div>
<!-- RQ-2652 DC- Eliminacion de script -->
<!-- 1987 - Inicio -->
<div id="idSueniosNavidad">
    <img id="imgSuenioNavidad" onclick="MostrarCajaSuenioNavidad()" src="@Url.Content("~/Content/Images/Pop_Up_Navidad_2_01.png")" />
    <img id="imgSuenioNavidad2" src="@Url.Content("~/Content/Images/Pop Up Navidad 2-02.png")" />
    <div id="registroSuenioNavidad">
        <div class="textoSuenio">
            <img src="@Url.Content("~/Content/Images/Pop Up Navidad 2-05.png")" />
        </div>
        <div style="text-align: center">
            <textarea maxlength="500" id="txtSuenioNavidad"></textarea>
        </div>
        <div style="float: right">
            <a href="javascript:void(0)" onclick="AgregarSuenio()">
                <img src="@Url.Content("~/Content/Images/Pop Up Navidad 2-06.png")" />
            </a>
        </div>
    </div>
    <a href="javascript:void(0)" onclick="cerrarSueniosNavidad();" class="close"><span class="ui-icon ui-icon-closethick">close</span></a>
</div>
<div id="divSuenioConfirmacion">
    <img id="imgSuenioConfirmacion" src="@Url.Content("~/Content/Images/Pop Up Navidad 2-04.png")" />
    <a href="javascript:void(0)" onclick="cerrarSuenioConfirmacion();" class="close"><span class="ui-icon ui-icon-closethick">close</span></a>
</div>
<!-- 1987 - Fin -->
<!-- POP UP SHOWROOM HTML-->
<div id="DialogoMensajeBannerShowRoom" style="overflow: inherit; padding: 0;z-index: 9999999; display: none;">
    <div id="btnCerrarPopShowroom" class="btnCerrarShowroom"></div>
    <div class="pestana_pop">
        <img src="@Url.Content("~/Content/Images/showroom/preventa_pestana.png")" alt="" />
    </div> 
    <div class="pestana_preventa">
        <div class="datos_pop_up">
            <div class="nombre_separado"><span id="spnShowRoomNombreConsultora">María</span></div>
            <div class="titulo_nombre_pop_s" style="width:21px"><img src="@Url.Content("~/Content/Images/showroom/deco_nombre.png")" alt="" /></div>
            <div class="titulo_nombre_pop_s" style="width:141px">te invitamos a la</div>
            <div class="titulo_nombre_pop_s no_margin_right" style="width:21px"><img src="@Url.Content("~/Content/Images/showroom/deco_nombre.png")" alt="" /></div>
            <div class="titulo_preventa">PRE &middot; VENTA</div>
            <div class="titulo_digital">DIGITAL</div>
            <div class="titulo_padre_s"><span id="spnShowRoomEvento">DÍA DEL PADRE</span></div>
            <div class="fecha_promocion_s">Del <span id="spnShowRoomDiaInicio">XX</span> al <span id="spnShowRoomDiaFin">XX</span> de <span id="spnShowRoomMes">Junio</span></div>
            <div><img src="@Url.Content("~/Content/Images/showroom/exclusiva.png")" alt="" /></div>
            <div class="btn_conoce_mas_aqui">
                <a href="" class="btn_conoce_mas_2" id="lnkConoceMasShowRoomPopup" target="_blank">CONOCE MÁS AQUÍ</a>
            </div>
        </div>
        <img src="@Url.Content("~/Content/Images/showroom/preventa_digital.png")" alt="" />
    </div>   
    <div class="content_show_right">
        <div class="borde_superior"><img src="@Url.Content("~/Content/Images/showroom/borde_superior.png")" alt="" /></div>
        <div class="slider_pop_up">
            <img src="@Url.Content("~/Content/Images/showroom/CORTE-GIF.gif")" alt="" id="imgShowRoomGif" />
            @*<img src="" alt="" id="imgShowRoomGif"/>*@
        </div>
        <div class="borde_inferior">
            <div class="check_01">
                <label class="checkpop">
                    <input type="checkbox" id="cbNoMostrarPopupShowRoom" />
                    No quiero volver a ver éste comunicado
                </label>
            </div>
        </div>
    </div>
</div>  

<div id="DialogoMensajeBannerShowRoomHoy" style="overflow: inherit; padding: 0; height: 450px !important; z-index: 9999999; display: none;">
    <div id="btnCerrarPopShowroomHoy" class="btnCerrarShowroom"></div>
    <div class="pestana_pop">
        <img src="@Url.Content("~/Content/Images/showroom/preventa_pestana.png")" alt="" />
    </div>
    <div class="pestana_preventa2">
        <div class="datos_pop_up">
            <div class="titulo_hoy"><img src="@Url.Content("~/Content/Images/showroom/Showroom-hoy.gif")" alt="" /></div>
            <div class="titulo_preventa">PRE &middot; VENTA</div>
            <div class="titulo_digital">DIGITAL</div>
            <div class="titulo_padre_s"><span id="spnShowRoomEventoHoy">DÍA DEL PADRE</span></div>
            <div class="imagen_hoy"><img src="@Url.Content("~/Content/Images/showroom/hoy1.png")" alt="" /></div>
            <div class="set_desde">SETS DESDE <span>$5,990</span></div>
            <hr class="clear" />
            <div class="btn_hoy">
                <a class="btn_conoce_mas_2_hoy" href="" id="lnkConoceMasShowRoomPopupHoy">VER OFERTAS AQUÍ</a>
            </div>
        </div>
        <img src="@Url.Content("~/Content/Images/showroom/preventa_digital.png")" alt="" />
        <div class="check_hoy">
            <label class="checkpop">
                <input type="checkbox" id="cbNoMostrarPopupShowRoomHoy" />
                No quiero volver a ver éste comunicado
            </label>

        </div>
    </div>

</div>         