@model Portal.Consultoras.Web.Models.PercepcionesModel
@{
    ViewBag.Title = "PercepcionDetalle";
}

<script>

    jQuery(document).ready(function () {
        fnGrilla();
        $("#btnRegresar").click(function () {
            location.href = '@Url.Action("Index", "Percepciones")';
        });
    });

    function fnGrilla() {
        jQuery("#list").jqGrid({
            url: baseUrl + "Percepciones/ConsultarDetalle",
            hidegrid: false,
            datatype: 'json',
            postData: ({
                IdComprobantePercepcion: function () { return jQuery.trim($("#hdn_IdComprobantePercepcion").val()); },
            }),
            mtype: 'GET',
            contentType: "application/json; charset=utf-8",
            colNames: ['Tipo', 'Nro. Serie', 'Nro. Correlativo', 'Fecha Emisión documento', 'Precio de Venta(S/.)', 'Porcentaje de Percepción', 'Importe Percepciones(S/.)', 'Monto Total Cobrado(S/.)'],
            colModel: [
                { name: 'TipoDocumento', index: 'TipoDocumento', width: 30, editable: true, resizable: false },
                { name: 'NumeroDocumentoSerie', index: 'NumeroDocumentoSerie', width: 30, editable: true, resizable: false },
                { name: 'NumeroDocumentoCorrelativo', index: 'NumeroDocumentoCorrelativo', width: 30, editable: true, resizable: false },
                { name: 'FechaEmisionDocumento', index: 'FechaEmisionDocumento', width: 30, editable: true, resizable: false },
                { name: 'Monto', index: 'Monto', width: 30, editable: true, resizable: false },
                { name: 'PorcentajePercepcion', index: 'PorcentajePercepcion', width: 30, editable: true, resizable: false },
                { name: 'ImportePercepcion', index: 'ImportePercepcion', width: 30, editable: true, resizable: false },
                { name: 'MontoTotal', index: 'MontoTotal', width: 30, editable: true, resizable: false }
            ],
            jsonReader:
                {
                    root: "rows",
                    page: "page",
                    total: "total",
                    records: "records",
                    repeatitems: true,
                    cell: "cell"
                },
            pager: jQuery('#pager'),
            loadtext: 'Cargando datos...',
            recordtext: "{0} - {1} de {2} Registros",
            emptyrecords: 'No hay resultados',
            rowNum: 10,
            scrollOffset: 0,
            rowList: [10, 20, 30, 40, 50],
            sortname: 'FechaEmisionDocumento',
            sortorder: 'asc',
            viewrecords: true,
            multiselect: false,
            height: 'auto',
            width: 930,
            pgtext: 'Pág: {0} de {1}',
            altRows: true,
            altclass: 'jQGridAltRowClass',
            loadComplete: function () { },
            gridComplete: function () { }
        });
        jQuery("#list").jqGrid('navGrid', "#pager", { edit: false, add: false, refresh: false, del: false, search: false });
        jQuery("#list").setGridParam({ datatype: 'json', page: 1 }).trigger('reloadGrid');
    }

</script>

<div class="wrap_cab">

    <div class="filtros">
        <div class="elements">
            <div class="div-1">
                <div class="box">
                    <div class="box-t"></div>
                    <div class="box-c">
                        <p class="azul">Estás en <span>@ViewBag.Campania</span>, te quedan <strong>@ViewBag.Dias días</strong> para el cierre.</p>
                        <p>@ViewBag.MensajeCierreCampania</p>
                    </div>
                    <div class="box-b"></div>
                </div>
            </div>
            <h2> @Model.RazonSocial </h2>
            <div class="div-3 spacing">
                <div class="titAuto"> @Model.Direccion </div>
            </div>
            <div class="div-3 spacing">
                <div class="titG">RUC:</div>
                <div class="titH"> @Model.RUC </div>
            </div>
            <h2>Comprobante de Percepciones Venta Interna</h2>
            <div class="div-3 spacing">
                <div class="titG">Nro:</div>
                <div class="titH"> @Model.NumeroComprobanteSerie </div>
            </div>
            <div class="div-3 spacing">
                <div class="titG">Señor(es):</div>
                <div class="titAuto">@Model.NombreAgentePerceptor</div>
            </div>
            <div class="div-3 spacing">
                <div class="titG">RUC/DNI:</div>
                <div class="titH">@Model.RUCAgentePerceptor</div>
            </div>
            <div class="div-3 spacing">
                <div class="titG">Fecha de Emisión:</div>
                <div class="titH">@Model.FechaEmision</div>
            </div>

        </div>
    </div>
</div>

<div class="wrap">
    <div class="container clearfix">
        <div class="div-3">
            <div class="input_search">
                <input id="btnRegresar" type="submit" value="Regresar" />
            </div>
        </div>
        <div class="border-wrapper">
            <table id="list"></table>
            <div id="pager"></div>
        </div>
        <div class="sep"></div>
        <div class="div-3">
            <div class="total">Total: <span class="superindice">S/.</span><span class="num">@Model.ImportePercepcion</span></div>
            <div style="width: 20px; float: right;">&nbsp</div>
            <div class="total_white">
                @Model.ImportePercepcionTexto
                @Html.Hidden("hdn_IdComprobantePercepcion", (string)Model.IdComprobantePercepcion)
                <span class="num_white">                    
                </span>
            </div>
        </div>
    </div>
</div>
<div id="loadingScreen"></div>








