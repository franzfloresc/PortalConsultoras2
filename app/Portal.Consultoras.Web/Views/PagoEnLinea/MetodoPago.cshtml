@using Portal.Consultoras.Common;
@using Portal.Consultoras.Web.Models.PagoEnLinea;
@model PagoEnLineaModel

@{
        ViewBag.Title = "Pago en Línea";
        string bancos = Model.Bancos;
        var rutaIcono = "";
        string[] result = { };
}

@section styles{

    @if (System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))
    {

        <link rel="stylesheet" href="@Url.Content("~/Content/Css/Site/Esika/pago-en-linea.css")?v=1">

    }
    else
    {
        <link rel="stylesheet" href="@Url.Content("~/Content/Css/Site/Lbel/pago-en-linea.css")?v=1">
    }

}

<div class="fondo_f9f9f9">
    <div class="content_belcorp content_belcorp_misPedidos">
        <div class="fondo_negro_lateral"></div>
        <div class="titulo_interiores"><span>PAGO EN LÍNEA</span></div>
    </div>
    <hr class="clear" />
    <div class="linea_separadora" style="margin-top:-1px"></div>
</div>

<div class="content_belcorp" id="divOpciones" style="display:block;">
    <div class="pestana_lbel"></div>
    <div class="proceso_de_pago_en_linea">
        <a id="linkRegresar" class="btn_paso_anterior_pago_en_linea" href="@Url.Action("Index", "Bienvenida")">
            <span class="icono_back_arrow">
                <img src="@Url.Content("~/Content/Images/icono_volver.svg")" alt="Volver" />
            </span>
            <span class="enlace_texto">VOLVER</span>
        </a>
        <div class="clear"></div>

        <div class="vista_confirmacion_pago">
            <h3 class="titulo_seleccion_monto_a_pagar w-100 text-center">Elige el método de pago</h3>
            <p class="info_importante_tarjeta_credito_habilitada text-center">
                <span class="displayInlineBlock">
                    <img src="@Url.Content("~/Content/Images/icono_alerta.svg")" alt="Recuerda habilitar tu tarjeta de crédito para pagos por internet" />
                </span>
                <span class="displayInlineBlock text-bold">
                    Recuerda habilitar tu tarjeta de crédito para pagos por internet.
                </span>
            </p>

            @foreach (var item in Model.ListaMetodoPago)
            {
                <div class="metodo_pago_seleccion_tarjeta metodoPago text-center">
                    <div class="opcion_pago_contenido_visible_sin_desplegar opcionPagoDesktop w-100"
                         data-mediopagoid="@item.PagoEnLineaMedioPagoDetalleId">
                        <div class="col_izq text-left">
                            <div class="icono_marca_tarjeta">
                                <img src="@item.RutaIcono" alt="" />
                            </div>
                            <h4 class="titulo_pago_total titulo_pago_total_paso_2">
                                @item.Descripcion
                            </h4>
                        </div>
                        <div class="col_der">
                            <div class="icono_flecha_despliegue girar90n">
                                <img src="@Url.Content("~/Content/Images/flecha-despliegue.svg")" alt="Desplegar contenido" />
                            </div>
                        </div>
                    </div>
                    <div class="opcion_pago_contenido_visible_al_desplegar w-100" style="display:none;">
                    </div>
                </div>
            }
            <!-- HD-2960 - NUEVO MÉTODO DE PAGO -->
            @if (Model.Bancos != "1")
            {
                if (!string.IsNullOrEmpty(bancos))
                {
                    result = bancos.Split('¬');
                    rutaIcono = result[0].Split('¦')[3];
                }
                <div class="metodo_pago_seleccion_tarjeta metodoPago text-center" id="divBancaPorInternet" style="display:block;">
                    <div class="opcion_pago_contenido_visible_sin_desplegar opcionPagoDesktop w-100">
                        <div class="col_izq text-left">
                            <div class="icono_marca_tarjeta" id="divIcono">
                                <img src='@rutaIcono' alt='Pagos Banca por Internet' /> 
                            </div>
                            <h4 class="titulo_pago_total pt-0">
                                Pagos banca por internet
                            </h4>
                        </div>
                        <div class="col_der">
                            <div class="icono_flecha_despliegue girar90n">
                                <img src="@Url.Content("~/Content/Images/flecha-despliegue.svg")" alt="Desplegar contenido" />
                            </div>
                        </div>
                    </div>
                    
                    <div class="opcion_pago_contenido_visible_al_desplegar w-100" id="ullistaBancos" style="display:none;">
                                                                      
                        <p class="texto_informativo_lista_bancos">Te redireccionaremos al banco que elijas.</p>
                        <ul class="listado_bancos">
                            @for (var i = 0; i < result.Length; i++)
                            {
                                var fila = result[i].Split('¦');
                                rutaIcono = fila[3];
                                <li class="banco_nombre"><a href= '@fila[1]' title='@fila[0]' class="enlace_banco" target="_blank"> <img src='@fila[2]' alt='@fila[0]'> </a> </li>
                            }
                        </ul>
                    </div>
                    
                </div>
            }
            <!-- FIN - HD-2960 - NUEVO MÉTODO DE PAGO -->
        </div>
    </div>
</div>
@section scripts{
    <script type="text/javascript">
        var tipoOrigenPantalla = 1;
        var urlPagoMonto = '@Url.Action("Index", "PagoEnLinea")';
        var rutaGuardarDatosPago = '@Url.Action("GuardarDatosPago", "PagoEnLinea")';
        var bancos = '@Html.Raw(Model.Bancos)';
    </script>

    <script src="@Url.Content("~/Scripts/PortalConsultoras/PagoEnLinea/MetodoPago.js")?v3"></script>
}