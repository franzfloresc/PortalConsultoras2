@using Portal.Consultoras.Common;
@using Portal.Consultoras.Web.Models.PagoEnLinea;
@model PagoEnLineaModel
@{
    ViewBag.Title = "Pago En Línea";
    string bancos = Model.Bancos;
    var rutaIcono = "";
    string[] result = { };
    if (Model.origen == int.Parse(Constantes.IngresoExternoOrigen.ChatBot))
    {
        Layout = "~/Areas/Mobile/Views/Shared/_ChatboMobileLayout.cshtml";
    }
    else
    {
        Layout = "~/Areas/Mobile/Views/Shared/_MobileLayout.cshtml";
    }
}

@section styles{

    @if (System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics == null ? "" : ViewBag.PaisAnalytics))
    {

        <link rel="stylesheet" href="@Url.Content("~/Content/Css/Mobile/Esika/pago-en-linea.css")?v=2">

    }
    else
    {

        <link rel="stylesheet" href="@Url.Content("~/Content/Css/Mobile/Lbel/pago-en-linea.css")?v=2">

    }

    <style type="text/css">
        .footer-page {
            display: none;
            margin-bottom: 54px;
        }

        #btn_init {
            display: none !important;
        }

        #btn_open {
            display: none !important;
        }
    </style>

}


@if (Model.origen == int.Parse(Constantes.IngresoExternoOrigen.ChatBot))
{
    <div class="titulo_mobile">METODO DE PAGO</div>
}
else
{
    <div class="cabecera_vista_pago_en_linea">
        <a id="linkRegresar" href="@Request.UrlReferrer" class="enlace_regresar ajustePosicionFlecha" style="display:normal" title="Regresar"></a>
        PAGO EN LÍNEA
    </div>
}
<div class="content_belcorp" id="divOpciones" style="display:block;">
    <div class="pestana_lbel"></div>

    <div class="proceso_de_pago_en_linea">

        <div class="confirmacion_pago">
            <h3 class="titulo_resumen_pago_exitoso">
                Elige el método de pago
            </h3>
            <p class="info_importante_tarjeta_credito_habilitada">
                <span>
                    <img src="@Url.Content("~/Content/Images/icono_alerta.svg")" alt="Recuerda habilitar tu tarjeta de crédito para pagos por internet" />
                </span>
                <span class="text-bold">
                    Recuerda habilitar tu tarjeta de crédito para pagos por internet.
                </span>
            </p>
            <ul class="lista_opciones_pago">
                @foreach (var item in Model.ListaMetodoPago)
                {
                    <li class="opcion_pago metodoPago text-center">
                        <div class="opcion_pago_contenido_visible_sin_desplegar opcionPagoMobile w-100"
                             data-mediopagoid="@item.PagoEnLineaMedioPagoDetalleId">
                            <div class="col_izq text-left">
                                <div class="icono_marca_tarjeta">
                                    <img src="@item.RutaIcono" alt="" />
                                </div>
                                <h4 class="titulo_monto_pago_total titulo_monto_pago_total_paso_2">
                                    @item.Descripcion
                                </h4>
                            </div>
                            <div class="col_der">
                                <div class="icono_flecha_despliegue girar90n">
                                    <img src="@Url.Content("~/Content/Images/flecha-despliegue.svg")" alt="Desplegar contenido" />
                                </div>
                            </div>
                        </div>
                        <div class="opcion_pago_contenido_visible_al_desplegar w-100" style="display:none;">
                        </div>
                    </li>
                }
                <!-- HD-2960 - NUEVO MÉTODO DE PAGO -->
                @if (Model.Bancos != "1")
                {
                    if (!string.IsNullOrEmpty(bancos))
                    {
                        result = bancos.Split('¬');
                        rutaIcono = result[0].Split('¦')[3];
                    }
                    <li class="opcion_pago metodoPago text-center" id="divBancaPorInternet" style="display:block;">
                        <div class="opcion_pago_contenido_visible_sin_desplegar opcionPagoMobile w-100">
                            <div class="col_izq text-left">
                                <div class="icono_marca_tarjeta" id="divIcono">
                                    <img src='@rutaIcono' alt='Pagos Banca por Internet' />
                                </div>
                                <h4 class="titulo_monto_pago_total titulo_monto_pago_total_paso_2">
                                    Pagos banca por internet
                                </h4>
                            </div>
                            <div class="col_der">
                                <div class="icono_flecha_despliegue girar90n">
                                    <img src="@Url.Content("~/Content/Images/flecha-despliegue.svg")" alt="Desplegar contenido" />
                                </div>
                            </div>
                        </div>

                        <div class="opcion_pago_contenido_visible_al_desplegar w-100 mt-0" id="ullistaBancos" style="display:none;">

                            <p class="texto_informativo_lista_bancos">Te redireccionaremos al banco que elijas.</p>
                            <ul class="listado_bancos">
                                @for (var i = 0; i < result.Length; i++)
                                {
                                    var fila = result[i].Split('¦');
                                    rutaIcono = fila[3];
                                    <li class="banco_nombre"><a href='@fila[1]' title='@fila[0]' class="enlace_banco" target="_blank"> <img src='@fila[2]' alt='@fila[0]'> </a> </li>
                                }
                            </ul>
                        </div>

                    </li>
                }
                <!-- FIN - HD-2960 - NUEVO MÉTODO DE PAGO -->
            </ul>
        </div>
    </div>
    <div class="popup_terminos_y_condiciones">
        <a href="#" class="cerrar_popup_terminos_y_condiciones" title="Cerrar">
        </a>
        <h4 class="titulo_terminos_y_condiciones text-uppercase">Términos y condiciones</h4>
        <div class="descripcion_terminos_y_condiciones" id="divContenidoTerminosCondiciones">

        </div>
    </div>
</div>
<input id="hdfUrlRaiz" type="hidden" value='@Url.Content("~")' />
@section scripts{
    <script type="text/javascript">
        var urlPagoMonto = '@Url.Action("Index", "PagoEnLinea", new { area = "Mobile" })';
        var rutaGuardarDatosPago = '@Url.Action("GuardarDatosPago", "PagoEnLinea", new { area = "" })';
        var tipoOrigenPantalla = 2;
        var bancos = '@Html.Raw(Model.Bancos)';
    </script>

    <script src="@Url.Content("~/Scripts/PortalConsultoras/PagoEnLinea/MetodoPago.js")?v3"></script>
}