
@using Portal.Consultoras.Common

@model Portal.Consultoras.Web.Models.RevistaDigitalModel

@{
    Layout = "~/Areas/Mobile/Views/Shared/_MobileLayout.cshtml";
    var urlDomain = Util.GetUrlHost(Request);
}

@section styles{
    <link href="@Url.Content("~/Content/Css/Site/jquery.range.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Css/Site/slick-pedido.css")" rel="stylesheet" />
    <link href="@Url.Content("~/Content/Css/Site/flexslider.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/Css/Mobile/esika/revistaDigital.css")" rel="stylesheet" type="text/css" />
}

<div>
    <div class="logo_EPT_content"><img src="@Url.Content("~/Content/Images/RevistaDigital/logo_EPT.png")" /></div>
    <div class="texto_usuario_ept">
        @Html.Raw(Util.Trim(Model.Titulo))
    </div>
</div>
<hr class="clear" />

@if (Model.ListaTabs.Count() > 1)
{
    <div class="fondo_f2f2f2">
        <div class="pestana_esika"></div><!--PESTANA ESIKA-->
        <div class="pestana_lbel"></div><!--PESTANA LBEL-->
        <ul class="tabs_pagos" data-tab="tab" style="margin-bottom:0">
            @foreach (var tabs in Model.ListaTabs)
            {
                <li>
                    <a href="javascript:;" id="@tabs.Id" data-tag="@tabs.Id">
                        <div class="texto_tab_pagos">@tabs.Descripcion</div>
                        <div class="marcador_tab oculto"></div>
                    </a>
                </li>
            }
            <hr id="barCursor">
        </ul>
        <hr class="clear" />
    </div>
}

@foreach (var tab in Model.ListaTabs)
{
    <hr class="clear" />
    <div style="display: none;" data-tag-html="@tab.Id" data-tag-tipo="@tab.ValorOpcional">
        @if (tab.Id > 0)
        {
            @Html.Action("_Landing", "RevistaDigital", new { id = tab.Id })
        }
        else
        {
            @Html.Partial("~/Areas/Mobile/Views/RevistaDigital/template-informativa.cshtml", Model)
        }
    </div>
}

<div data-OrigenPedidoWeb="@Constantes.OrigenPedidoWeb.RevistaDigitalMobileLanding">
    <script id="estrategia-template" type="text/x-handlebars-template">
        {{#each this.Lista as |item|}}
        <div data-item="{{EstrategiaID}}" data-item-cuv="{{CUV2}}" data-tipoestrategiaimagenmostrar="{{#if_eq FlagMostrarImg '1'}}{{TipoEstrategiaImagenMostrar}}{{/if_eq}}"
             {{#iff TipoEstrategiaImagenMostrar 'ContainsArray' '[5,3,2]' }} data-estrategia="{{JSON2string item}}" {{/iff}}>
            <input type="hidden" class="PosicionEstrategia" value="{{Posicion}}" />
            <div class="content_item_home_bpt">
                <div {{#iff TipoEstrategiaImagenMostrar 'ContainsArray' '[5,3,2]' }} onclick="javascript:EstrategiaVerDetalle({{EstrategiaID}});" {{/iff}}>
                    <div {{#iff TipoEstrategiaImagenMostrar 'ContainsArray' '[5,3,2]' }} style="cursor:pointer;" {{/iff}}>
                        <div class="producto_img_mobile_bpt">
                            <img src="{{FotoProducto01}}" />
                        </div>
                    </div>
                    <div class="producto_nombre_descripcion_bpt">
                        <div {{#iff TipoEstrategiaImagenMostrar 'ContainsArray' '[5,3,2]' }} style="cursor:pointer;" {{/iff}}>
                            {{#iff DescripcionMarca '!=' ''}}
                                <h6>{{DescripcionMarca}}</h6>
                            {{/iff}}

                            {{#iff DescripcionResumen '!=' ''}}
                                <p class="nombre_producto_bpt" style="cursor:pointer;">
                                    <b class="text_descrition_prd_bpt">{{DescripcionResumen}}</b>
                                </p>
                            {{/iff}}
                            {{#iff DescripcionCortada '!=' ''}}
                            <p class="nombre_producto_bpt" style="cursor:pointer;">
                                <b class="text_descrition_prd_bpt">{{DescripcionCortada}}</b>
                            </p>
                            {{/iff}}

                            <div class="producto_precio_bpt">
                                {{#iff TipoEstrategiaImagenMostrar 'ContainsArray' '[3,5]'}}
                                {{#if_eq EtiquetaID '1'}}
                                {{#iff Precio '>' 0}}
                                <span class="producto_precio_normal_bpt" style="text-decoration: line-through; font-size: 12px;">{{Simbolo}} {{PrecioTachado}}</span>
                                {{/iff}}
                                {{/if_eq}}
                                {{/iff}}
                                <span class="producto_precio_oferta_bpt"><b>{{Simbolo}} {{PrecioString}}</b></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="producto_nombre_descripcion">
                    {{#iff TieneVariedad '==' '0'}}
                    {{#iff PuedeAgregar '!=' '0'}}
                    <div class="liquidacion_rango_home">
                        {{#iff PuedeCambiarCantidad '==' '0'}}
                        <input type="tel" value="1" size="2" maxlength="2" id="txtCantidad" data-input='cantidad' class="rango_cantidad_pedido ValidaNumeral ValidaPasteNumeral" disabled="disabled" style="border: 1px solid #b0b0b0;width:100%!important" onkeypress="return FuncionesGenerales.ValidarSoloNumeros(event);">
                        {{else}}
                        <a class="cantidad_menos_home"><img src="/Content/Images/Mobile/Esika/menos.png" alt=""></a>
                        <input type="tel" value="1" size="2" maxlength="2" id="txtCantidad" data-input='cantidad' class="rango_cantidad_pedido ValidaNumeral ValidaPasteNumeral" onkeypress="return FuncionesGenerales.ValidarSoloNumeros(event);">
                        <a class="cantidad_mas_home"><img src="/Content/Images/Mobile/Esika/mas.png" alt=""></a>
                        {{/iff}}
                    </div>
                    <div class="clear"></div>
                    <a class="boton_Agregalo_home {{ClaseBloqueada}}" data-bloqueada="{{ClaseBloqueada}}" onclick="javascript:CargarProductoDestacado({ EstrategiaID: '{{EstrategiaID}}' , TipoEstrategiaID: '{{TipoEstrategiaID}}' , Posicion: {{Posicion}} , FlagNueva: '{{FlagNueva}}' }, this); ">
                        AGR&Eacute;GALO
                    </a>
                    {{/iff}}
                    {{else}}
                    <div class="texto_elige_tono">
                        ¡AHORA ELIGE TU TONO!
                    </div>
                    <div class="clear"></div>
                    <a class="btn_elige_tono" onclick="javascript:EstrategiaVerDetalle({{EstrategiaID}});" href="javascript:;">
                        ELIGE TU OPCIÓN
                    </a>
                    {{/iff}}
                    <div class="clear"></div>
                    <div style="height: 15px;">
                        <div class="agregado product-add" style="text-align:right;display:{{#if IsAgregado }}block;{{else}}none;{{/if}}">
                            AGREGADO
                            <div class="icono"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
    </script>
</div>

@section scripts{
    <script type="text/javascript">
        var urlLoad = '@Url.Content("~/Content/Images/loading_spinner.gif")';
        var tipoOrigenPantalla = 1;
        var precioMin = '@Model.PrecioMin';
        var precioMax = '@Model.PrecioMax';
        var urlOfertaCargarProductos = '@Url.Action("GetProductos", "RevistaDigital", new { area = ""})';
        var urlOfertaDetalleProducto = '@Url.Action("Detalle", "RevistaDigital", new { area = "Mobile" })';
        var urlOfertaDetalleProductoTem = '@Url.Action("GuardarProductoTemporal", "RevistaDigital", new { area = "" })';
        var origenPedidoWebEstrategia = '@Constantes.OrigenPedidoWeb.RevistaDigitalMobileLanding';
        var tipoOrigenEstrategia = 27;
        var CantidadFilas = @Model.CantidadFilas;
        var mayormenor = '@Constantes.ShowRoomTipoOrdenamiento.ValorPrecio.MayorAMenor';
        var menormayor = '@Constantes.ShowRoomTipoOrdenamiento.ValorPrecio.MenorAMayor';
    </script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.flexslider.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/slick.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.range.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/Bienvenida/Estrategia.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/OfertasParaTi/Ofertas.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/RevistaDigital/RevistaDigital.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/RevistaDigital/RevistaDigital-Suscripcion.js")"></script>
}