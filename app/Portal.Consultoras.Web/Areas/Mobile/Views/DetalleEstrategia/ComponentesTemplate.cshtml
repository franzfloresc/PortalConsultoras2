@using Portal.Consultoras.Common




<script id="componentes-template" type="text/x-handlebars-template">
    {{#iff CodigoVariante '==' '@Constantes.TipoEstrategiaSet.IndividualConTonos'}}
    {{#each this.Hermanos as |componente|}}
    <div class="content_tonos_producto" data-tono="" data-opciones-seleccionadas="0" data-tono-digitable="1">
        <div class="tono_select_opt">
            <div class="content_tono_elegido texto_sin_tono" data-tono-change="1" data-tono-change-cuv="{{componente.Cuv}}"
                 onclick="javascript: ComponentesModule.SeleccionarComponente('{{componente.Cuv}}')">
                <div class="tono_seleccionado" style="display:none;"><img src="/Content/Images/showroom/no_disponible.png" /></div>
                <div class="texto_tono_seleccionado">
                    {{#iff componente.FactorCuadre '==' '1'}}
                    ELIGE 1 OPCIÓN
                    {{else}}
                    ELIGE {{componente.FactorCuadre}} OPCIONES
                    {{/iff}}
                </div>
                <hr class="clear" />
            </div>
            <div class="content_tonos_select" style="display:none;" data-tono-select-area="1">
                {{#each this.Hermanos as |variedad|}}
                <div class="content_tono_elegido" data-tono-change="2"
                     data-tono-cuv="{{variedad.Cuv}}" d
                     data-tono-nombre="{{variedad.NombreBulk}}"
                     data-tono-descripcion="{{variedad.NombreComercial}}">
                    <div class="tono_seleccionado"><img src="{{variedad.ImagenBulk}}" alt=""></div>
                    <div class="texto_tono_seleccionado">{{variedad.NombreBulk}}</div>
                    <hr class="clear" />
                </div>
                {{/each}}
            </div>
        </div>
        <div id="resumen-opciones-{{componente.Cuv}}" class="tono_selecionado" style="display:none"></div>
        <hr class="clear">
        {{#iff FactorCuadre '==' '1'}}
        <div data-tono-div="{{componente.Cuv}}">
            {{#each this.Hermanos as |variedad|}}
            <div style="display: none;">
                <input type="hidden" name="nameMarcaID" id="Estrategia_hd_MarcaID" value="{{variedad.IdMarca}}" />
                <input type="hidden" name="namePrecioCatalogo" id="Estrategia_hd_PrecioCatalogo" value="{{variedad.PrecioCatalogo}}" />
            </div>
            {{#if TieneStock}}
            <div class="content_tono_detalle"
                 {{#unless ../esCampaniaSiguiente}}
                 onclick="javascript: ComponentesModule.SeleccionarPaletaOpcion(event,{{variedad.Cuv}});"
                 {{/unless}}
                 data-tono-cuv="{{variedad.Cuv}}"
                 data-tono-change="2"
                 data-tono-nombre="{{variedad.NombreBulk}}">
                <img src="{{variedad.ImagenBulk}}" alt="">
            </div>
            {{else}}
            <div class="content_tono_detalle tono_agotado" style="pointer-events:none"
                 data-tono-cuv="{{variedad.Cuv}}"
                 data-tono-change="2"
                 data-tono-nombre="{{variedad.NombreBulk}}">
                <img src="{{variedad.ImagenBulk}}" alt="">
            </div>
            {{/if}}

            {{/each}}
        </div>
        <hr class="clear">
        {{/iff}}
    </div>
    {{/each}}

    <div style="display: none;" class="xmsg-tonos-agotados">
        <ul class="list-inline" style="padding-top:15px">
            <li><img class="icon_alerta" src="/Content/Images/Mobile/Esika/icono-alerta.svg" alt=""></li>
            <li>Uno o más productos están AGOTADOS.</li>
        </ul>
    </div>
    
    {{/iff}}
    {{#iff CodigoVariante 'ContainsArray' '[@Constantes.TipoEstrategiaSet.CompuestaFija,@Constantes.TipoEstrategiaSet.CompuestaVariable]'}}
    <div class="contenido_titulo">
        <div class="">
            <span>CONTENIDO:</span>
        </div>
    </div>
    <div class="content_producto_compuesto">
        <div class="row">
            {{#each this.Hermanos as |componente|}}
            <div class="col-md-12 col-sm-12 col-xs-12">
                {{#ifVerificarMarcaLast componente.DescripcionMarca}}
                <div style="border-bottom: 1px solid #ccc; margin:14px 0px;"></div>
                {{/ifVerificarMarcaLast}}


                <div class="" data-tono="" data-opciones-seleccionadas="0" data-tono-digitable="{{componente.Digitable}}">
                    <div style="display: none;">
                        <input type="hidden" name="nameMarcaID" id="Estrategia_hd_MarcaID" value="{{componente.MarcaID}}" />
                        <input type="hidden" name="namePrecioCatalogo" id="Estrategia_hd_PrecioCatalogo" value="{{componente.PrecioCatalogo}}" />
                    </div>
                    {{#ifVerificarMarca componente.DescripcionMarca}}
                    <p class="marca">{{componente.DescripcionMarca}}</p>

                    {{/ifVerificarMarca}}
                    <div class="nombre_producto_opt">
                        <span class="cantidad_producto_opt">x {{Multiplicar componente.Cantidad componente.FactorCuadre}}</span>
                        <div class="nombre-producto-ficha">
                            {{componente.NombreComercial}}
                            {{#if componente.TienenNombreReferencial}}
                            <span class="text_referencial_tipos">*Nombre de producto referencial</span>
                            {{/if}}
                        </div>
                        <br class="clear" />
                    </div>
                    <div class="row">
                        <div id="btnVerDetalle" onclick="javascript:componenteDetalleModule.VerDetalle({{{json this}}})" class="col-md-12 text-right">
                            <a class="btn_detalle" data-toggle="modal">Ver detalle <img src="/Content/Images/General/Icons/arrow_down.svg"></a>
                        </div>
                        <div id="btnVerDetalle">
                            ver detalle 2
                        </div>
                        
                    </div>
                        <div class="clear"></div>
                        {{#iff componente.Digitable '==' '1'}}
                        <div class="content_tonos_producto">
                            <div class="tono_select_opt">
                                <div class="content_tono_elegido texto_sin_tono" data-tono-change="1" data-tono-change-cuv="{{componente.Cuv}}"
                                     onclick="javascript: ComponentesModule.SeleccionarComponente('{{componente.Cuv}}')">
                                    <div class="tono_seleccionado" style="display: none;"><img src="/Content/Images/showroom/no_disponible.png" alt=""></div>
                                    <div class="texto_tono_seleccionado">
                                        {{#iff componente.FactorCuadre '==' '1'}}
                                        ELIGE 1 OPCIÓN
                                        {{else}}
                                        ELIGE {{componente.FactorCuadre}} OPCIONES
                                        {{/iff}}
                                    </div>
                                    <hr class="clear" />
                                </div>
                                <div class="content_tonos_select" style="display:none;" data-tono-select-area="1">
                                    {{#each componente.Hermanos as |variedad|}}
                                    <div class="content_tono_elegido" data-tono-change="2"
                                         data-tono-cuv="{{variedad.Cuv}}"
                                         data-tono-nombre="{{variedad.NombreBulk}}"
                                         data-tono-descripcion="{{variedad.NombreComercial}}">
                                        <div class="tono_seleccionado"><img src="{{variedad.ImagenBulk}}" alt=""></div>
                                        <div class="texto_tono_seleccionado">{{variedad.NombreBulk}}</div>
                                        <hr class="clear" />
                                    </div>
                                    {{/each}}
                                </div>
                                <div class="tono_selecionado" id="opciones-elegidas{{componente.Cuv}}" style="display:none;"></div>
                            </div>
                            <div id="resumen-opciones-{{componente.Cuv}}" class="tono_selecionado" style="display:none"></div>
                            <hr class="clear">
                        </div>
                        {{else}}
                        <div data-tono="" data-tono-select="{{componente.Cuv}}" data-tono-digitable="{{componente.Digitable}}" style="display: none;">
                            <input type="hidden" name="nameMarcaID" id="Estrategia_hd_MarcaID" value="{{componente.IdMarca}}" />
                            <input type="hidden" name="namePrecioCatalogo" id="Estrategia_hd_PrecioCatalogo" value="{{componente.PrecioCatalogo}}" />
                            <input type="hidden" name="nameDigitable" id="Estrategia_hd_Digitable" value="{{componente.Digitable}}" />
                            <input type="hidden" name="nameGrupo" id="Estrategia_hd_Grupo" value="{{componente.Grupo}}" />
                        </div>
                        {{/iff}}
                        <hr class="clear" />
                    </div>
            </div>
            {{/each}}

            <div style="display: none;" class="xmsg-tonos-agotados">
                <ul class="list-inline" style="padding-top:15px" >
                    <li><img class="icon_alerta" src="/Content/Images/Mobile/Esika/icono-alerta.svg" alt=""></li>
                    <li>Uno o más productos están AGOTADOS.</li>
                </ul>
            </div>

        </div>

    </div>
    {{/iff}}
</script>
