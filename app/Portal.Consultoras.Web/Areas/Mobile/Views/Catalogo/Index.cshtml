@using Portal.Consultoras.Common
@using Portal.Consultoras.Web.Helpers
@using Portal.Consultoras.Web.Models
@model MisCatalogosRevistasModel
@section styles{

    <style type="text/css">
        body {
            overflow-x: hidden;
        }
    </style>

    @Styles.Render("~/Bundle/Css/Mobile/Catalogo")
}

@{
    var layout = ViewContext.MobileLayout();
    Layout = string.Format("~/Areas/Mobile/Views/Shared/{0}.cshtml", layout);
    var userAgent = HttpContext.Current.Request.UserAgent.ToLower();
    var urlApp = userAgent.Contains("iphone;") ? "https://itunes.apple.com/pe/app/catalogos-esika-lbel-cyzone/id1052948837?mt=8"
                                                                                     : "https://play.google.com/store/apps/details?id=belcorp.modobeta.catalogov2&hl=es_419";
    var textApp = userAgent.Contains("iphone;") ? "Gratis en App Store" : "Gratis en Play Store";

    var titulo = Model.Titulo;

}

<style type="text/css">
    #flexslidertop {
        height: 60px;
    }
</style>

<input type="hidden" id="hdPaisNombre" value="@Model.PaisNombre" />
<input type="hidden" id="hdCampaniaAnterior" value="@Model.CampaniaAnterior" />
<input type="hidden" id="hdCampaniaActual" value="@Model.CampaniaActual" />
<input type="hidden" id="hdCampaniaSiguiente" value="@Model.CampaniaSiguiente" />
<input type="hidden" id="hdrCampaniaAnterior" value="@Model.CampaniaAnterior" />
<input type="hidden" id="hdrCampaniaActual" value="@Model.CampaniaActual" />
<input type="hidden" id="hdrCampaniaSiguiente" value="@Model.CampaniaSiguiente" />

<span id="spNroCampania" style="display:none;">@Model.CampaniaActual</span>

@{
    if (HttpContext.Current.Request.Browser.IsMobileDevice && ViewBag.ActivacionAppCatalogoWhastUp == 1)
    {
        <div class="wrapper_resumen_mobile" style="margin-top:126px;">
            <div class="content_320">
                <div class="content_app">
                    DESCARGA TU<br />
                    APP DE CATÁLOGOS<br />
                    <span>@textApp</span>
                </div>
                <a class="btn_obtener_app" href="@urlApp">OBTENER</a>
                <hr class="clear" />
            </div>
        </div>
    }
}
<div class="titulo_mobile">
    @{ var mobileConfiguracion = Html.MobileAppConfiguracion();
        if (mobileConfiguracion.MostrarBotonAtras)
        {
            <a href="@Request.UrlReferrer" class="enlace_regresar catalogosR" title="Regresar"></a>
        }
    }
    &nbsp;&nbsp;&nbsp;&nbsp;@titulo
</div>

@if (Model.MostrarTab)
{
    <div class="fondo_f2f2f2">
        <div class="pestana_esika"></div>
        <div class="pestana_lbel"></div>

        <ul class="tabs_pagos" data-tab="tab" style="margin-bottom:0">
            <li class="one">
                <a href="javascript:;" data-tag="Catalogos">
                    CATÁLOGOS
                    <div class="marcador_tab"></div>
                </a>
            </li>
            <li class="two">
                <a href="javascript:;" data-tag="Revistas">
                    REVISTAS
                    <div class="marcador_tab oculto"></div>
                </a>
            </li>
        </ul>

        <hr class="clear" />
    </div>
}


<div class="wrapper_resumen_mobile">
    <div id="tab_catalogos_mobile" data-tag-html="Catalogos">
        <div class="texto_catalogos_mobile">Revisa y comparte los catálogos con tus clientes</div>
        <div class="titulo_catalogo">CATÁLOGOS C-@Util.SubStr(Model.CampaniaActual, 4, 2)</div>
        <div class="content_carrusel_catalogo" id="divCatalogo">
            <a class="previous_carrusel_catalogo" style="left:0" data-button_carrusel="carrusel"><img  id="cata_img_prev" src="@Url.Content("~/Content/Images/mobile/Esika/previous_ofertas_home.png")" alt="-" /></a>
            <a class="next_carrusel_catalogo" style="right:0"   data-button_carrusel="carrusel"><img id="cata_img_next" src="@Url.Content("~/Content/Images/mobile/Esika/next.png")" alt="-"  /></a>
        </div>

    </div>
    <div id="tab_revistas_mobile" data-tag-html="Revistas" style="display:none;">
        @if (Model.TieneSeccionRevista)
        {
            @Html.Partial("~/Areas/Mobile/Views/Catalogo/template-carrusel-issue.cshtml",
                    new ViewDataDictionary {
                        { "TieneGnd", Model.TieneGND },
                        { "CampaniaNro", @Util.SubStr(Model.CampaniaActual, 4, 2) }
                    })
        }

        @if (Model.TieneSeccionRD)
        {
            @Html.Partial("~/Areas/Mobile/Views/Catalogo/_PartialSectionBpt.cshtml", Model.PartialSectionBpt)
        }

    </div>
</div>

<div id="CompartirCorreoMobile" class="PopMobile1">
    <div class="content_popMobile">
        <a class="cerrar_popMobile" href="javascript:;" onclick="javascript: $('#CompartirCorreoMobile').hide();">
            <img src="@Url.Content("~/Content/Images/mobile/Esika/cerrar_04.png")" alt="-" />
        </a>
        <hr class="clear" />
        <div class="titulo_compartir">COMPARTIR <b>CATÁLOGO</b></div>
        <div class="Label_compartir">Agregar contacto:</div>
        <a class="mostrar_todos">Añadir todos mis contáctos (##)</a>
        <hr class="clear" />
        <div id="tagParent" style="border: 1px solid #c5c5c5; margin: 10px 0 20px 0; padding: 10px; padding-top: 14px; ">
            <div style="min-height:25px; max-height:150px;">
                <textarea id="tagCorreo"></textarea>
            </div>
        </div>
        <div class="Label_compartir">Mensaje (Editable):</div>
        <hr class="clear" />

        <textarea name="comentarios" class="text_compartir" id="comentarios" maxlength="500"></textarea>
        <div class="Label_compartir">Catálogos a enviar:</div>
        <hr class="clear" />
        <div id="divCheckbox">
            <div data-cat="Esika">
                <div class="content_checkbox">
                    <input class="inputradio" type="checkbox">
                    <span class="inputfalso"></span>
                </div>
                <div class="check_label">Ésika</div>
            </div>
            <div data-cat="Lbel">
                <div class="content_checkbox">
                    <input class="inputradio" type="checkbox">
                    <span class="inputfalso"></span>
                </div>
                <div class="check_label">L'Bel</div>
            </div>
            <div data-cat="Cyzone">
                <div class="content_checkbox">
                    <input class="inputradio" type="checkbox">
                    <span class="inputfalso"></span>
                </div>
                <div class="check_label">Cyzone</div>
            </div>
            <hr class="clear">
        </div>
        <a class="btn_enviar_correo" id="btnEnviarCorreo">ENVIAR</a>
    </div>
</div>
<div id="MensajeAlertaMobile" class="MensajeAlertaMobile" style="display:none;">
    <div class="content_mensajeAlerta">
        <a class="cerrar_popMobile" href="javascript:;" onclick="javascript: $('#MensajeAlertaMobile').hide();">
            <img src="@Url.Content("~/Content/Images/mobile/Esika/cerrar_04.png")" alt="-" />
        </a>
        <hr class="clear" />
        <div class="icono_alerta check_icono_mobile"></div>
        <div class="titulo_compartir">¡BIEN <b>HECHO</b>!</div>
        <div class="mensaje_alerta">Se envió satisfactoriamente el correo a los clientes(s) seleccionado(s)</div>
        <a class="btn_ok_mobile" onclick="javascript: $('#MensajeAlertaMobile').hide();">OK</a>
    </div>

</div>
<div id="MensajeAlertaMobile2" class="MensajeAlertaMobile" style="display:none;">
    <div class="content_mensajeAlerta">
        <a class="cerrar_popMobile" href="javascript:;" onclick="javascript: $('#MensajeAlertaMobile2').hide();">
            <img src="@Url.Content("~/Content/Images/mobile/Esika/cerrar_04.png")" alt="-" />
        </a>
        <hr class="clear" />
        <div class="icono_alerta exclamacion_icono_mobile"></div>
        <div class="titulo_compartir">¡LO <b>SENTIMOS</b>!</div>
        <div class="mensaje_alerta">Debe seleccionar al menos <br />un Catálogo</div>
        <a class="btn_ok_mobile" onclick="javascript: $('#MensajeAlertaMobile2').hide();">OK</a>
    </div>

</div>

<div style="display: none;">
    @using (Html.BeginForm("MiRevista", "Catalogo", FormMethod.Post, new { id = "frmMiRevista", target = "_blank" }))
    {
        <input type="hidden" name="campaniaRevista" id="campaniaRevista" value="">
    }
</div>

<script id="catalogo-template" type="text/x-handlebars-template">
    <div class="content_item_catalogo" data-cam="{{campania}}" data-cat="{{tipoCatalogo}}" data-estado="{{estado}}" style="display: none;">
        <div data-tipo="content">
            <a class="content_catalogo" id="{{campania}}_{{tipoCatalogo}}" data-tipo="img" target="_blank" href="javascript:;">
                <img src="@Url.Content("~/Content/Images/catalogo_no_disponible.jpg")" />
            </a>
            <a ><input type="hidden" value=""  target="_blank" href="javascript:;"/></a>

            <input id="txtUrl{{tipoCatalogo}}" type="hidden" value="" />
            <div style="max-width:440px; margin:0 auto;">
                <a class="btn_ws" id="{{campania}}_{{tipoCatalogo}}_WS"  onclick="RedesSociales.TagManagerWS('{{comp}}','{{campania}}');"><img src="@Url.Content("~/Content/Images/mobile/Esika/catalogo_ws2.png")" alt="-" /></a>
                <a class="btn_facebook" href="javascript:;" data-accion="face" onclick="RedesSociales.CompartirFacebook('{{comp}}','{{campania}}', this); return false;"><img src="@Url.Content("~/Content/Images/mobile/Esika/catalogo_facebook.png")" alt="-" /></a>
                <a class="btn_mensaje" onclick="RedesSociales.AbrirCompartirCorreo('{{tipoCatalogo}}','{{campania}}');"><img src="@Url.Content("~/Content/Images/mobile/Esika/catalogo_mensaje.png")" alt="-" /></a>
            </div>

        </div>
    </div>
</script>

@section scripts{
<script type="text/javascript">
        var imgNoDisponible = '@Url.Content("~/Content/Images/catalogo_no_disponible.jpg")';
        var imgIssuu = '@Constantes.CatalogoUrlParameters.UrlPart01' + '{img}' + '@Constantes.CatalogoUrlParameters.UrlPart02Alternativo';
        var codigoIso = '@ViewBag.CodigoISO';
        var defaultImageRevista = '@Url.Content("~/Content/Images/revista_no_disponible.jpg")';
        var urlObtenerPortadaRevista = '@Url.Action("ObtenerPortadaRevista", "Catalogo", new { area = "Mobile" })';
        var urlIconoClienteAutoCompletar = '@Url.Content("~/Content/Images/Esika/user.jpg")';
        var urlBienvenidaMobile = '@Url.Action("Index", "Bienvenida", new { area = "Mobile" })';
        var urlEnviarMail = '@Url.Action("EnviarEmail", "MisCatalogosRevistas", new { area = "" })';
        var valContenidoCorreoDefecto = '@Html.Raw(ViewBag.TextoMensajeSaludoCorreo)';
        var RevistaCodigoIssuu = {
            '@Model.CampaniaAnterior': '@Model.CodigoRevistaAnterior',
            '@Model.CampaniaActual': '@Model.CodigoRevistaActual',
            '@Model.CampaniaSiguiente': '@Model.CodigoRevistaSiguiente'
        };
        var urlBuscadorIssu = '@Constantes.CatalogoUrlIssu.Buscador';
        var urlDetalle = '@Url.Action("Detalle", "MisCatalogosRevistas", new { area = "" })';
        var mensajeSinConexionIssu = '@Html.Raw(Constantes.MensajesError.SinConexion_CatalogoRevistaIssu)';
        var MarcaCatalogo = '@ViewBag.MarcaCatalogo' || 0;   //PPC 
</script>
    <script src="@Url.Content("~/Scripts/Tag/jquery.tags.input.js")"></script>
    <script src="@Url.Content("~/Scripts/Tag/jquery.tag-editor.js")"></script>
    <script src="@Url.Content("~/Scripts/Tag/jquery.caret.min.js")"></script>
    <script src="@Url.Content("~/Scripts/Tag/jquery.tag-autcomplete.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/RevistaDigital/RevistaDigital-DataLayer.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/RevistaDigital/RevistaDigital-Suscripcion.js")"></script>
    <script src="@Url.Content("~/Scripts/PortalConsultoras/Mobile/Catalogo/Index.js")"></script>
    <script src="@Url.Content("~/Scripts/PortalConsultoras/Shared/General/RedesSociales.js")"></script>
}
