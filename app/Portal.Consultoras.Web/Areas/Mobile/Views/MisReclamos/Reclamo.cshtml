@using Portal.Consultoras.Common
@using Portal.Consultoras.Web.Areas.Mobile.Models
@using Portal.Consultoras.Web.CustomHelpers
@model Portal.Consultoras.Web.Models.MisReclamosModel

@{
    var layout = ViewContext.MobileLayout();
    Layout = string.Format("~/Areas/Mobile/Views/Shared/{0}.cshtml", layout);
    MobileAppConfiguracionModel mobileConfiguracion = Html.MobileAppConfiguracion();

}

@section styles
{
    @if (System.Configuration.ConfigurationManager.AppSettings.Get("PaisesEsika").Contains(ViewBag.PaisAnalytics))
    {
        <link href="@Url.Content("~/Content/Css/Mobile/esika/cdr.css")" rel="stylesheet" />
    }
    else
    {
        <link href="@Url.Content("~/Content/Css/Mobile/lbel/cdr.css")" rel="stylesheet" />
    }
    <link href="@Url.Content("~/Content/Css/Mobile/Pedido/PedidoGrilla.css")" rel="stylesheet" />
}

<style type="text/css">
    .footer-page {
        padding-bottom: 70px;
    }
</style>


@{
    if (!mobileConfiguracion.EsAppMobile)
    {
        <div class="titulo_mobile fijarTituloMobile fijarTituloMobileLbel">
            <a class="enlace_regresar catalogosR" title="Regresar" style="display:none;"></a>
            CAMBIOS Y DEVOLUCIONES
        </div>

        <div class="pestana_esika"></div>
        <div class="pestana_lbel" style="display:none;"></div>
    }
}


<div id="wrpMobile" class="wrapper_resumen_mobile">
    <div class="tabs_vista_cdr_wrapper">
        <ul class="tabs_vista_cdr">
            <li class="tab_vista_cdr tab_vista_cdr--nuevoCambio tab_vista_cdr--activo">
                <a href="#VistaReclamo" id="linkNuevoCambio" class="tab_vista_cdr_enlace_contenido">
                    <span class="text-uppercase text-bold">Nuevo cambio</span>
                    <span class="barra_estado_tab_cdr"></span>
                </a>
            </li>
            <li class="tab_vista_cdr tab_vista_cdr--solicitudesRegistradas">
                <a href="#VistaSolicitudesRegistradas" id="linkSolicitudesRegistradas" class="text-uppercase text-bold tab_vista_cdr_enlace_contenido">
                    <span class="text-uppercase text-bold">Registradas</span>
                    <span class="barra_estado_tab_cdr"></span>
                </a>
            </li>
        </ul>
    </div>

    <div id="VistaSolicitudesRegistradas" style="display:none;" class="vistas_cdr">
        <div class="grilla_registros_solicitud_cdr">
            <h4 class="text-bold titulo_solicitudes_registradas">Mis solicitudes registradas</h4>
            @if (Model.ListaCDRWeb.Count > 6)
            {
                //Este filtro se muestra cuando la cantidad de solicitudes excede a 6
                <div class="campo_orden_solicitudes_cdr_wrapper">
                    <label id="lblTextoSeleccionado">Filtrar por :</label>
                    <select id="OrdenarSolicitudesRegistradasPor" class="border-radius-4 campo_ordenar_solicitudes_por">
                        <option value="0">Todos</option>
                        <option value="1">Pendientes</option>
                        <option value="2">Enviados</option>
                        <option value="3">Aceptados</option>
                        <option value="4">Observados</option>
                        @*<option value="4">Rechazados</option>*@
                    </select>
                </div>
                //Fin - Este filtro se muestra cuando la cantidad de solicitudes excede a 6
            }
            @*INI - Aquí se carga la vista parcial de mis reclamos*@
            <div id="divMisReclamos">
            </div>
            @*FIN - Aquí se carga la vista parcial de mis reclamos*@
        </div>
        <div class="btn_cta_wrapper">
            <button id="IrPaso1"
                    class="text-uppercase tipografia_lato text-bold border-radius-4 btn_cta_cdr btn_cta_cdr--agregarSolicitud">
                Agregar cambio
            </button>
        </div>
    </div>
    <div id="VistaReclamo" class="vistas_cdr">
        <div class="texto-mensaje-cdr">
            <span class="text-bold mensaje_vista_cdr">
                Queremos verte siempre satisfecha con nuestros productos y servicio.
            </span>
            <span class="mensaje_vista_cdr tipografia_lato_regular">
                Si tuviste inconvenientes con algún producto y estás dentro del
                <a href="@Model.UrlPoliticaCdr" class="plazo_permitido" title="Detalle de plazo permitido" target="_blank">
                    plazo permitido
                </a> sigue estos pasos.
            </span>
        </div>
        <div class="contenedor_proceso_registro_cdr">
            <div id="barra_progreso" class="content_pasos">
                <div class="content_pasos_linea">
                    <div class="multimarca-background-color progreso_pasos"></div>
                </div>
                <div class="paso_reclamo paso_reclamo_1 paso_active_reclamo" id="Selector1" data-paso="1"></div>
                <div class="paso_reclamo paso_reclamo_2" id="Selector2" data-paso="2"></div>
                <div class="paso_reclamo paso_reclamo_3" id="Selector3" data-paso="3"></div>
            </div>
            <div id="VistaPaso1y2">
                <div class="text-bold pregunta_inconveniente_producto tipografia_lato Registro1" id="divUltimasSolicitudes">
                    <div class="pregunta_inconveniente_producto_titulo">¿Con qué producto has tenido inconvenientes?</div>
                    <div class="mi_solicitud_cdr">
                        <div class="pestania_ver_mi_solicitud">
                            <img src="@Url.Content("~/Content/Images/mobile/pestania_ver_solicitud.svg")" alt="Ver mi solicitud">
                        </div>
                        <span class="num_solicitudes">0</span>
                        <div class="datos_solicitud_opened">
                            <div>
                                <div class="text-bold titulo_solicitud_opened">
                                    MI SOLICITUD
                                </div>
                                <div class="cant_prod_solicitud_opened tipografia_lato_regular">
                                    <span id="spnCantidadUltimasSolicitadas">0</span> productos agregados
                                </div>
                                <div class="icono_flecha_mi_solicitud ocultar_mi_solicitud">
                                    <img src="@Url.Content("~/Content/Images/mobile/left-arrow.png")" alt="">
                                </div>
                            </div>

                            <div class="listado_productos_agregados UltimasSolicitudes" id="divDetalleUltimasSolicitudes">
                            </div>
                            <div class="enlace_ir_al_final">
                                <div class="icono_flecha_mi_solicitud">
                                    <img src="@Url.Content("~/Content/Images/mobile/left-arrow.png")" alt="">
                                </div>
                                <a href="" class="tipografia_lato_regular" id="btn_ver_solicitudes" title="Ir al final">IR AL FINAL</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="campos_registro_solicitud_cdr Registro1">
                    <div class="formulario_inscripcion_cdr formulario_inscripcion_cdr--paso1">
                        @Html.DropDownListFor(model => model.CampaniaID, new SelectList(Model.ListaCampania, "CampaniaID", "NombreCorto", Model.CampaniaID), new { id = "ddlCampania", @class = "border-radius-4 select_reclamo", @required = "required" })
                        <select class="border-radius-4 elige_num_pedido" id="ddlnumPedido" name="numPedido" required="required" style="display:none;"></select>
                        <input id="txtNumPedido" autocomplete="off" type="text" class="border-radius-4" style="display:none;" />
                        <input id="cuvmobile" autocomplete="off" class="border-radius-4 tipografia_lato tipografia_lato_regular ValidaNumeral ValidaPasteNumeral valid" type="text" value="" placeholder="Código o Descripción del producto" readonly />

                        <div id="DescripcionCuv" class="producto_cdr" style="font-size:13px;display:none;">
                            <span id="txtCuv" class="text-bold codigo_producto_cdr"></span>
                            - <span id="txtDescripcionCuv" class="text-bold nom_producto_cdr"></span>
                            <a id="aCambiarProducto" class="enlace_cambiar_producto tipografia_lato_regular" title="Cambiar producto">MODIFICAR PRODUCTO</a>
                        </div>
                        <div class="contenedor_cantidadProductos contenedor_campo_cantidad_productos">
                            <span class="texto_cantidad_productos tipografia_lato tipografia_lato_regular">Cantidad:</span>
                            <div id="divCantidad" data-cantidad-contenedor="">
                                <input type="tel" value="1" size="2" maxlength="2" id="txtCantidad1" class="rango_cantidad_pedido ValidaNumeral ValidaPasteNumeral"
                                       data-input="cantidad" onkeypress="return FuncionesGenerales.ValidarSoloNumeros(event);">
                                <a class="cantidad_menos_home" onclick="javascript:EstrategiaAgregarModule.DisminuirCantidad(event)"><img src="/Content/Images/Mobile/Esika/menos.png" alt=""></a>
                                <a class="cantidad_mas_home" onclick="javascript:EstrategiaAgregarModule.AdicionarCantidad(event)"><img src="/Content/Images/Mobile/Esika/mas.png" alt=""></a>
                            </div>
                        </div>
                    </div>
                    <a class="btn_agrega_otro_reclamo" href="@Url.Action("Index")" title="Ver solicitudes anteriores">
                        <span class="icono_arrow_left">
                            <img src="@Url.Content("~/Content/Images/mobile/left-arrow.png")" alt="Ver solicitudes anteriores" />
                        </span>
                        <span>VER SOLICITUDES ANTERIORES</span>
                    </a>
                </div>
                <div style="display:none;">
                    <input type="hidden" name="CDRWebID" id="CDRWebID" value="@Model.CDRWebID" />
                    <input type="hidden" id="hdMontoMinimoPedido" value="@Model.MontoMinimo" />
                    <input type="hidden" id="hdPedidoID" value="@Model.PedidoID" />
                    <input type="hidden" id="hdNumeroPedido" value="@Model.NumeroPedido" />
                    <input type="hidden" id="hdParametriaCdr" />
                    <input type="hidden" id="hdParametriaAbsCdr" />
                    <input type="hidden" id="hdCdrWebDatos_Ssic" />
                    <input type="hidden" id="txtPrecioUnidad" />
                    <input type="hidden" id="hdImporteTotalPedido" />
                    <input type="hidden" id="hdCdrWebDatos_Ssic" />
                    <input type="hidden" id="hdCuvPrecio2" />
                    <input type="hidden" id="hdCuvCodigo" />
                    <input type="hidden" id="hdDescripcionCuv" />
                </div>
                <div class="text-bold pregunta_inconveniente_producto tipografia_lato Registro2" style="display:none;">
                    ¿Cuál fue el inconveniente?
                </div>
                <div class="campos_registro_solicitud_cdr Registro2" style="display:none;">
                    <div class="formulario_inscripcion_cdr">
                        <div id="listaMotivos" class="lista_opciones_motivo_cdr">
                        </div>
                    </div>
                    <a class="btn_agrega_otro_reclamo" href="@Url.Action("Index")" title="Ver solicitudes anteriores">
                        <span class="icono_arrow_left">
                            <img src="@Url.Content("~/Content/Images/mobile/left-arrow.png")" alt="Ver solicitudes anteriores" />
                        </span>
                        <span>VER SOLICITUDES ANTERIORES</span>
                    </a>
                </div>
                <div class="text-bold pregunta_inconveniente_producto tipografia_lato mb-29 Registro3" style="display:none;">
                    Escoge una solución
                </div>
                <div class="listado_soluciones_cdr tipografia_lato Registro3" id="divlistado_soluciones_cdr" style="display:none;">
                </div>
                <div id="infoOpcionesDeCambio" style="display:none;">
                    <div id="OpcionCambioPorOtroProducto" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--cambiarPorOtroProducto" data-tipo-confirma="cambio">
                            <p>
                                <input type="hidden" id="hdMontoMinimoReclamo" />
                                Puedes cambiarlo por otro producto(s) cuyo monto sea mayor o igual al que reclamas
                                (<span id="spnSimboloMonedaReclamo">S/.</span><span id="spnMontoMinimoReclamoFormato">15</span>)
                            </p>
                            <p class="text-bold">Búscalo en tus catálogos de Campaña <span id="spnNumeroCampaniaReclamo">15</span>:</p>
                            <div data-detalle-confirma=""></div>
                        </div>
                        <div class="formulario_inscripcion_cdr">
                            <input id="cuvmobile2"
                                   class="border-radius-4 tipografia_lato tipografia_lato_regular ValidaNumeral ValidaPasteNumeral"
                                   type="text"
                                   value=""
                                   data-codigo=""
                                   name="codigo"
                                   maxlength="5"
                                   placeholder="Código del producto" />                           
                        </div>
                        <div id="contenedorCuvTrueque" class="center-block lista_productos_a_cambiar">

                        </div>
                        <div id="MontoTotalProductoACambiar" class="center-block text-bold text-right lista_productos_a_cambiar_monto_total">
                            Total:
                            <span id="spnPrecioTotal"></span>
                            <input type="hidden" id="hdImporteTotal2" />
                        </div>

                    </div>
                    <div id="OpcionCambioMismoProducto" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--cambioMismoProducto">
                            <p class="text-bold">Te reenviaremos el siguiente producto:</p>
                            <p class="text-bold">
                                <span id="spnDescProdDevolucionC" class="text-bold producto_nom">Producto OpcionCambioMismoProducto</span>
                                <span id="spnCantidadC" class="text-bold cantidad_und_producto">x Unidades</span>
                            </p>
                        </div>
                    </div>
                    <div id="OpcionEnvioDelProducto" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--envioProducto">
                            <p class="text-bold">Vamos a enviarte el siguiente producto:</p>
                            <p class="text-bold">
                                <span class="text-bold producto_nom" id="spnDescripcionProductoOpcionF">Producto OpcionEnvioDelProducto</span>
                                <span id="spnCantidadF">x Unidades</span>
                            </p>
                        </div>
                    </div>
                    <div id="OpcionDevolucionDinero" class="opcion_cdr_seleccionada_info_wrapper" style="display:none;">
                        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--devolucionDinero">
                            <p class="text-bold">Vamos a descontar el siguiente producto en tu próximo pedido:</p>
                            <p class="text-bold">
                                <span id="spnDescripcionProductoOpcionG" class="text-bold producto_nom">Producto X OpcionDevolucionDinero</span>
                                <span id="spnCantidadG">x Unidades</span>
                            </p>
                        </div>
                    </div>
                    <div id="OpcionDevolucion" style="display:none;">
                        <div id="divDevolucionSetsOrPack">
                        </div>
                    </div>
                </div>
                <div id="MensajeTenerEncuenta" class="info_importante_cdr tipografia_lato" style="display:none;">
                    <div class="text-uppercase text-bold titulo_info_cdr">
                        Tener en cuenta
                    </div>
                    <div id="spnMensajeTenerCuenta" class="content_info_cdr tipografia_lato_regular">
                    </div>
                </div>
                <div class="eleccion_solucion_cdr tipografia_lato Registro4" id="eleccion" style="display:none;" data-tipo-confirma="canje">
                    <div>
                        <span>Te proponemos la siguiente solución</span>
                        <div data-detalle-confirma=""></div>
                    </div>


                    <a href="#" class="enlace_quiero_ver_otra_alternativa tipografia_lato tipografia_lato_regular" title="Quiero ver otra alternativa">
                        QUIERO VER OTRA ALTERNATIVA
                    </a>
                    <a class="btn_agrega_otro_reclamo" href="@Url.Action("Index")" title="Ver solicitudes anteriores">
                        <span class="icono_arrow_left">
                            <img src="@Url.Content("~/Content/Images/mobile/left-arrow.png")" alt="Ver solicitudes anteriores" />
                        </span>
                        <span>VER SOLICITUDES ANTERIORES</span>
                    </a>
                </div>
                <div class="btn_cta_wrapper">
                    <button id="btnSiguiente1"
                            class="text-uppercase text-bold tipografia_lato border-radius-4 btn_cta_cdr btn_cta_cdr--siguiente">
                        Siguiente
                    </button>
                </div>
            </div>
            <div id="VistaPaso3">
                <div class="text-bold pregunta_inconveniente_producto tipografia_lato mb-23 AceptarSolucion" style="display:none;">
                    <span class="titulo_revision_resumen">Revisa el resumen, finaliza y envía tu solicitud</span>
                    <span class="mensaje_vista_cdr tipografia_lato_regular">
                        Asegúrate de tener todos los inconvenientes registrados porque <span class="text-bold">sólo puedes hacer @Model.CantidadReclamosPorPedido solicitud web por pedido.</span>
                    </span>
                </div>
                <div id="divDetallePaso3" class="AceptarSolucion UltimasSolicitudes" style="display:none;">
                </div>
                @if (Model.TieneCDRExpress)
                {
                    <div id="EleccionTipoEnvio" class="eleccion_tipo_envio text-left">
                        <div class="tipo_envio tipo_envio_regular">
                            <div class="tipo_envio_checkbox">
                                <input type="radio" value="" id="TipoEnvioRegular" name="TipoEnvio" checked />
                                <label for="TipoEnvioRegular">
                                    <span></span>
                                </label>
                            </div>
                            <div id="divDespachoNormal" class="tipo_envio_descripcion">
                                @Model.MensajesExpress.RegularPrincipal
                                <br />
                                @Model.MensajesExpress.RegularAdicional
                            </div>
                        </div>
                        <div class="tipo_envio tipo_envio_express">
                            <div class="tipo_envio_checkbox">
                                <input type="radio" value="" id="TipoEnvioExpress" name="TipoEnvio" />
                                <label for="TipoEnvioExpress">
                                    <span></span>
                                </label>
                            </div>
                            <div id="divDespachoExpress" class="tipo_envio_descripcion">
                                @Model.MensajesExpress.ExpressPrincipal
                                <br />
                                @if (!string.IsNullOrEmpty(Model.MensajesExpress.ExpressFlete))
                                {@Model.MensajesExpress.ExpressFlete}
                                @if (Model.EsConsultoraNueva)
                                {
                                    <br />
                                    <span style="color:red;">@Model.MensajesExpress.Nuevas</span>
                                }
                                <br />
                                @Model.MensajesExpress.ExpressAdicional
                            </div>
                        </div>
                    </div>
                }

                <div style="display:none;">
                    <input type="hidden" id="hdTieneCDRExpress" value="@(Model.TieneCDRExpress ? 1 : 0)" />
                    <input type="hidden" id="hdFleteDespacho" value="@Model.FleteDespacho" />
                </div>

                <div class="validacion_datos tipografia_lato AceptarSolucion" style="display:none;">
                    <div class="validacion_seccion_titulo">
                        <div class="text-bold titulo_validacion_datos">Valida tus datos</div>
                        <div class="mensaje_validacion_datos tipografia_lato_regular">En caso de necesitar contactarnos contigo, lo haremos a través de:</div>
                    </div>
                    <div class="validacion_seccion_datos">
                        <form>
                            <div class="mb-27">
                                <div class="correo_reclamo_error">
                                    <span id="spnEmailError" style="display: none;">
                                        *Correo Electrónico incorrecto
                                    </span>
                                </div>
                                <input type="text" id="txtEmail" value="@Model.Email" />
                                <label class="tipografia_lato_regular">Correo electrónico</label>
                                <input type="hidden" id="hdEmail" value="@Model.Email" />
                            </div>
                            <div class="mb-23">
                                <div class="correo_reclamo_error">
                                    <span id="spnTelefonoError" style="display: none;">
                                        *Teléfono incorrecto
                                    </span>
                                </div>
                                <input type="text" id="txtTelefono" value="@Model.Telefono" />
                                <label class="tipografia_lato_regular">Celular</label>
                                <input type="hidden" id="hdTelefono" value="@Model.Telefono" />
                            </div>
                        </form>
                    </div>
                </div>
                <div class="content_politica_devolucion tipografia_lato AceptarSolucion" style="display:none;">
                    <input type="checkbox" value="" id="politica-devolucion" name="politica-devolucion" />
                    <label for="politica-devolucion">
                        <a href="@Model.UrlPoliticaCdr" target="_blank" class="enlace_politica_devolucion tipografia_lato_regular"
                           title="acepto la política de devolución">
                            Acepto la política de cambios y devoluciones
                        </a>
                        <span></span>
                    </label>
                </div>
                <div class="btn_cta_wrapper">
                    <button id="btnSiguiente4"
                            class="text-uppercase text-bold tipografia_lato border-radius-4 btn_cta_cdr btn_cta_cdr--finalizaSolicitud"
                            style="display:none;">
                        Finaliza y envía tu solicitud
                    </button>
                </div>
                @*<div class="tooltip_btn_reportar_inconveniente tipografia_lato AceptarSolucion" style="display:none;">
                        <span class="icono_alerta_cdr">
                            <img src="@Url.Content("~/Content/Images/Esika/icono_advertencia_notificacion.svg")" alt="reportar inconveniente">
                        </span>
                        <span class="tipografia_lato tipografia_lato_regular texto_tooltip_reportar_inconveniente">
                            Si tuviste otro inconveniente en la misma campaña repórtalo ahora.
                        </span>
                    </div>*@
                <div class="AceptarSolucion listado_soluciones_cdr tipografia_lato" style="display:none;margin-top:15px; margin-bottom:85px;">
                    <a class="text-bold btn_agrega_otro_reclamo solucion_cdr" id="IrSolicitudInicial" title="Agrega otro producto a la solicitud">
                        <span>AGREGA OTRO PRODUCTO A LA SOLICITUD</span>
                    </a>
                </div>
            </div>
            <div class="wrapper_resumen_mobile tipografia_lato bloqueCDRRegistro" id="SolicitudEnviada" style="display:none;">
                <div class="content_mensaje_solicitud_enviada">
                    <div class="icono_solicitud_enviada">
                        <img src="@Url.Content("~/Content/Images/Esika/icono_check_esika.svg")" alt="Solicitud Enviada">
                    </div>
                    <div class="titulo_solicitud_enviada tipografia_lato_regular">
                        ¡SOLICITUD <span class="text-bold">ENVIADA!</span>
                    </div>
                    <div class="mensaje_solicitud_enviada tipografia_lato_regular">
                        Vamos a evaluarla y en un plazo de 30 minutos te enviaremos una respuesta a tu correo electrónico.
                    </div>
                </div>
                <div class="detalle_solicitud_cdr">
                    <div class="text-bold titulo_detalle_solicitud_cdr">
                        Solicitud de Cambio y devolución
                    </div>
                    <div class="text-thin info_detalle_cdr">
                        <div class="info_fecha_solicitud">
                            Fecha: <span class="tipografia_lato_regular" id="spnSolicitudFechaCulminado"></span>
                        </div>
                        <div class="info_num_solicitud">
                            Solicitud: Nº <span class="tipografia_lato_regular" id="spnSolicitudNumeroSolicitud"></span>
                        </div>
                        <div class="info_campania_solicitud">
                            Campaña: <span class="tipografia_lato_regular" id="spnSolicitudCampania"></span>
                        </div>
                    </div>
                    <div class="detalle_solicitud_listado" id="divDetalleEnviar">
                    </div>
                </div>               
            </div>          
        </div>
    </div>
</div>
<button id="btnCambioProducto"
        class="text-bold btn_cta_cdr tipografia_lato"
        style="display:none;">
    CAMBIALO POR ESTE PRODUCTO
</button>
<button id="btnSiguiente3"
        class="text-bold btn_cta_cdr tipografia_lato"
        style="display:none;">
    CONFIRMA TU ELECCIÓN
</button>
<button id="btnAceptarSolucion"
        class="text-bold btn_cta_cdr tipografia_lato"
        data-cambiopaso="3"
        style="display:none;">
    ACEPTAR LA SOLUCIÓN
</button>

<div id="PopupBusquedaCuvDescripcionProductoCdr" class="buscar_producto_cdr_popup d-block w-100" style="display:none;">
    <div class="buscar_producto_cdr_contenido_popup text-center">
        <div class="busqueda_codigo_o_descripcion_wrapper d-block">
            <div class="campo_busqueda_codigo_o_descripcion_producto_wrapper">
                <a href="javascript:;" onclick="javascript: $('#PopupBusquedaCuvDescripcionProductoCdr').fadeOut(100); $('#PopupBusquedaCuvDescripcionProductoCdr').scrollTop(0);" class="d-block enlace_cerrar_popup" title="Cerrar">
                    <img src="@Url.Content("~/Content/Images/icono_volver.svg")" alt="Cerrar" />
                </a>
                <input type="text" value="" id="CampoBusquedaCuvDescripcion" class="campo_busqueda_codigo_o_descripcion_producto" placeholder="Escribe el código o descripción" />
            </div>
            <ul id="ListaCoincidenciasBusquedaProductosCdr" class="lista_coincidencias_busqueda_productos d-block text-left"></ul>
        </div>
    </div>
</div>

@*HD-3412 EINCA*@
<div class="contenedor_popup_general" id="divConfirmEnviarSolicitudCDR" style="display:none;">
    <div class="popup_general">
        <div class="btn_cerrar_popup_general">
            <a href="javascript:;" onclick="misReclamosRegistro.Funciones.CancelarConfirmEnvioSolicitudCDR();">
                <img src="@Url.Content("~/Content/Images/btn_cerrar_popup.svg")" alt="Cerrar" />
                <span class="texto_btn_cerrar">CERRAR</span>
            </a>
        </div>
        <div class="contenido_popUp contenido_popUp_general">
            <span class="mensaje_popup_general">
                Asegúrate de tener todos los incovenientes registrados <strong>porque s&oacute;lo puedes hacer <span id="txtCantidadPedidoConfig"></span> solicitud web por pedido.</strong><br /><br />
                ¿Deseas continuar?
            </span>
            <div class="grupo_botones_popup_general">
                <button type="button" name="btn_accion_secundaria" class="btn_accion_secundaria" onclick="misReclamosRegistro.Funciones.CancelarConfirmEnvioSolicitudCDR();">
                    Cancelar
                </button>
                <button type="button" name="btn_accion_principal" class="btn_accion_principal" onclick="misReclamosRegistro.Funciones.ContinuarConfirmEnvioSolicitudCDR();">
                    Si, continuar
                </button>
            </div>
        </div>
    </div>
</div>

<div id="template-cuv-cambio" class="center-block lista_productos_a_cambiar" style="display:none;">
    <div class="item-producto-cambio producto_a_cambiar">
        <div>
            <div class="text-left producto_a_cambiar_cuv_y_descripcion_wrapper">
                <div class="producto_a_cambiar_cuv">
                    <span data-codigo="" name="codigo"></span>
                </div>
                <div class="producto_a_cambiar_descripcion">
                    <span data-descripcion="" name="descripcion"></span>
                </div>
            </div>
            <div class="contenedor_cantidadProductos contenedor_campo_cantidad_productos">
                <div data-cantidad-contenedor="">
                    <input type="text"
                           value="1"
                           size="2"
                           maxlength="2"
                           data-cantidad="1"
                           class="rango_cantidad_pedido ValidaNumeral ValidaPasteNumeral"
                           data-input="cantidad"
                           name="cantidad"
                           @*onkeypress="return FuncionesGenerales.ValidarSoloNumeros(event);"*@
                           onchange="misReclamosRegistro.Funciones.ActualizarCantidad(event);">
                    <a class="cantidad_menos_home modificarPrecioMenos" onclick="misReclamosRegistro.Funciones.AgregarODisminuirCantidad(event, 2);"><img src="/Content/Images/Mobile/Esika/menos.png" alt=""></a>
                    <a class="cantidad_mas_home modificarPrecioMas" onclick="misReclamosRegistro.Funciones.AgregarODisminuirCantidad(event, 1);"><img src="/Content/Images/Mobile/Esika/mas.png" alt=""></a>
                </div>
            </div>
        </div>
        <div>
            <button type="button" name="Eliminar" class="border-radius-4 btn_eliminar_trueque" onclick="misReclamosRegistro.Funciones.EliminarCUVTrueque(this);">
                <img src="/Content/Images/Esika/icons-trash.svg" alt="Eliminar Cuv Trueque" />
            </button>
            <div class="text-right text-bold producto_a_cambiar_precio">
                <span data-precio="" name="precio"></span>
            </div>
        </div>
    </div>
</div>

<script id="template-pedido" type="text/x-handlebars-template">
    {{#each this as |item|}}
    <a class="pedido_a_seleccionar" data-pedido-id="{{item.PedidoID}}" id="{{item.PedidoID}}" onclick="misReclamosRegistro.Funciones.PopupPedidoSeleccionar(this);">
        <div class="text-bold numero_pedido">
            N° {{item.NumeroPedido}}
        </div>
        <div class="fecha_pedido_a_seleccionar tipografia_lato_regular">
            <span>Fecha : </span> <span>{{DateTimeToStringFormat item.FechaRegistro}}</span>
        </div>
    </a>
    {{/each}}
</script>

<script id="template-motivo" type="text/x-handlebars-template">
    {{#each this as |item|}}
    <div class="motivo_cdr">
        <input id="{{item.CodigoReclamo}}" type="radio" name="motivo-cdr" />
        <label for="{{item.CodigoReclamo}}" class="tipografia_lato_regular">
            <span></span>
            <span style="display:inline-block; vertical-align:middle; width:86%; position:relative; top:-1px;">{{item.DescripcionReclamo}}</span>
        </label>
    </div>
    {{/each}}
</script>
<script id="template-operacion" type="text/x-handlebars-template">
    <ul class="text-center lista_opciones_cdr">
        {{#each this as |item|}}
        <li class="border-radius-4 opcion_cdr {{#if_eq item.CodigoOperacion 'D'}}opcion_cdr--devolucion{{/if_eq}}">
            <a title="{{item.CDRTipoOperacion.DescripcionOperacion}}" data-tipo="{{item.Tipo}}" class="text-center opcion_cdr_enlace">
                <div class="opcion_cdr_icono_wrapper">
                    {{#if_eq item.CodigoOperacion 'D'}}
                    <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'T'}}
                    <img src="@Url.Content("~/Content/Images/opcion_cambio_otro_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'C' }}
                    <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'F' }}
                    <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{else if_eq item.CodigoOperacion 'G' }}
                    <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono" />
                    {{/if_eq}}
                </div>
                <div class="text-bold opcion_cdr_seleccion_wrapper">
                    <input id="{{item.CodigoOperacion}}" style="display:none!important;" type="checkbox" onchange="misReclamosRegistro.Funciones.EscogerSolucion(this,event)" data-tipo="{{item.Tipo}}">
                    {{item.CDRTipoOperacion.DescripcionOperacion}}
                    <label for="{{item.CodigoOperacion}}" class="border-radius-4 opcion_cdr_checkbox">
                    </label>
                </div>
            </a>
        </li>
        @*<a id="{{item.CodigoOperacion}}"
               data-tipo="{{item.Tipo}}"
               class="text-bold solucion_cdr"
               title="{{item.CDRTipoOperacion.DescripcionOperacion}}">
                {{item.CDRTipoOperacion.DescripcionOperacion}}
            </a>*@
        {{/each}}
    </ul>
</script>

<script id="template-detalle-banner" type="text/x-handlebars-template">
    {{#each detalle as |item|}}
    <div class="producto_agregado">
        <span class="cod_producto_agregado tipografia_lato_regular">{{item.CUV}}</span>
        <span class="nom_producto_agregado tipografia_lato_regular">{{item.Descripcion}}</span>
        <span class="cant_producto_agregado tipografia_lato_regular">{{item.Cantidad2}} unidades</span>
        <div class="icono_eliminar_solic_cdr">
            <a class="icono_eliminar_solic_cdr eliminar-solicitud" data-pedidodetalleid="{{item.CDRWebDetalleID}}" data-accion="x"
               style="background-image: url('/Content/Images/mobile/icono-eliminar-cdr.png'); background-repeat:no-repeat; width: 17px; height: 22px; margin: 0 auto; top:4px;"
               title="Eliminar solicitud"></a>
        </div>
    </div>
    {{/each}}
</script>

<script id="template-detalle-paso3" type="text/x-handlebars-template">
    {{#each detalle as |item|}}
    <div class="content_solicitud_cdr tipografia_lato">
        <div class="contenedor_info_cdr">
            <div class="listado_producto_reclamo">
                {{#if_eq item.GrupoID ''}}
                {{else}}
                <div class="text-bold text-center tag_sb tag_sb--standard">Set o Pack</div>
                {{/if_eq}}
                <span class="text-bold d-block">{{item.SolucionSolicitada}} :</span>
                <div>
                    <span class="d-block">{{item.CUV}}</span>
                    <span class="text-bold d-block">{{item.Descripcion}}</span>
                    <span class="d-block">{{item.Cantidad}} unidades</span>
                    <span class="d-block">Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio}}</span>
                </div>
            </div>
            <div class="listado_solicitada_reclamo">
                {{#if_eq CodigoOperacion 'C'}}
                <span class="text-bold d-block">{{item.Solicitud}}</span>
                <span class="d-block">{{item.SolucionSolicitada}}</span>
                {{else if_eq CodigoOperacion 'D'}}
                <span class="text-bold d-block">{{item.Solicitud}}</span>
                <span class="d-block">{{item.SolucionSolicitada}}</span>
                {{else if_eq CodigoOperacion 'F'}}
                <span class="text-bold d-block">{{item.Solicitud}}</span>
                <span class="d-block">{{item.SolucionSolicitada}}</span>
                {{else if_eq CodigoOperacion 'G'}}
                <span class="text-bold d-block">{{item.Solicitud}}</span>
                <span class="d-block">{{item.SolucionSolicitada}}</span>
                {{else if_eq CodigoOperacion 'T'}}
                <div class="listado_solicitud_reclamo">
                    <span class="text-bold d-block">{{item.Solicitud}} :</span>
                </div>
                {{#if item.DetalleReemplazo}}
                {{#each item.DetalleReemplazo as |subItem|}}
                <div>
                    <span class="d-block">{{subItem.CUV}}</span>
                    <span class="text-bold d-block">{{subItem.Descripcion}}</span>
                    <span class="d-block">{{subItem.Cantidad}} unidades</span>
                    <span class="d-block">Costo: {{SimboloMoneda}} {{subItem.PrecioFormato}}</span>
                </div>
                {{/each}}
                <div class="text-bold monto_total_opcion_trueque">Total: {{SimboloMoneda}} {{DecimalToStringFormat item.Total}}</div>
                {{else}}
                <span class="d-block">{{item.CUV2}}</span>
                <span class="text-bold d-block">{{item.Descripcion2}}</span>
                <span class="d-block">{{item.Cantidad2}} unidades</span>
                <span class="d-block">Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio2}}</span>
                {{/if}}
                {{else}}

                {{/if_eq}}
            </div>
            <div class="icono_eliminar_solic_cdr">
                <a class="eliminar-solicitud" href="javascript:void(0);" onclick="misReclamosRegistro.Funciones.PreEliminarDetalle(this);" data-detalle-grupoid="{{item.GrupoID}}" data-pedidodetalleid="{{item.CDRWebDetalleID}}"
                   style="background-image: url('/Content/Images/Esika/icons-trash.svg'); background-repeat:no-repeat; width: 22px; height: 22px; margin: 0 auto;"
                   title="Eliminar solicitud"></a>
            </div>
        </div>
    </div>
    {{/each}}
</script>

<script id="template-detalle-paso3-enviada" type="text/x-handlebars-template">
    {{#each detalle as |item|}}
    <div class="contenedor_info_cdr">
        <div class="listado_producto_reclamo">
            <b>{{item.SolucionSolicitada}}</b><br />
            {{item.CUV}} - {{item.Descripcion}}<br />
            {{item.Cantidad}} unidades<br />
            Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio}}
        </div>
        <div class="listado_solicitud_reclamo">
            {{#if_eq item.GrupoID ''}}
            {{else}}
            <div class="text-bold text-center tag_sb tag_sb--standard">Set o Pack</div><br />
            {{/if_eq}}
            <b>{{item.Solicitud}}</b>
            <div class="opcion_cdr_icono_wrapper">
                {{#if_eq item.CodigoOperacion 'D'}}
                <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono" />
                {{else if_eq item.CodigoOperacion 'T'}}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_otro_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                {{else if_eq item.CodigoOperacion 'C' }}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                {{else if_eq item.CodigoOperacion 'F' }}
                <img src="@Url.Content("~/Content/Images/opcion_cambio_mismo_producto_cdr.svg")" alt="" class="opcion_cdr_icono" />
                {{else if_eq item.CodigoOperacion 'G' }}
                <img src="@Url.Content("~/Content/Images/opcion_devolucion_cdr.svg")" alt="" class="opcion_cdr_icono" />
                {{/if_eq}}
            </div>
        </div>
        <div class="titulo_solicitud_cdr">
            {{#if_eq CodigoOperacion 'C'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'D'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'F'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'G'}}
            {{item.SolucionSolicitada}}
            {{else if_eq CodigoOperacion 'T'}}
            {{#if item.DetalleReemplazo}}
            {{#each item.DetalleReemplazo as |subItem|}}
            <div>
                {{subItem.CUV}}
                <br />
                <b>{{subItem.Descripcion}}</b>
                <br />
                {{subItem.Cantidad}} unidades
                <br />
                Costo: {{SimboloMoneda}} {{subItem.PrecioFormato}}
            </div>
            {{/each}}
            <div class="text-bold">Total: {{SimboloMoneda}} {{DecimalToStringFormat item.Total}}</div>
            {{else}}
            {{item.CUV2}}
            <br />
            <b>{{item.Descripcion2}}</b>
            <br />
            {{item.Cantidad2}} unidades
            <br />
            Costo: {{SimboloMoneda}} {{DecimalToStringFormat item.Precio2}}
            {{/if}}
            {{else}}

            {{/if_eq}}
        </div>
    </div>
    <br />
    {{/each}}
</script>

<script id="template-confirmacion" type="text/x-handlebars-template">
    {{#iff CUV2 '!=' ''}}
    <div class="content_resumen_cambio">
        {{else}}
        <div class="contenedor_producto_cambio_por tipografia_lato">
            {{/iff}}
            <div class="texto_producto_a_cambiar">{{DescripcionConfirma}}:</div>
            <div class="producto_cdr tipografia_lato">
                <span class="text-bold codigo_producto_cdr">
                    {{CUV}}
                </span> - <span class="text-bold nom_producto_cdr">
                    {{DescripcionProd}}
                </span>
                <span class="cantidad_producto tipografia_lato_regular">
                    x<span>{{Cantidad}}</span> unidades
                </span>
            </div>
        </div>
        {{#IsNullOrEmpty CUV2  '!=' }}
        <div class="indicador_reclamo"></div>
        <div class="content_resumen_cambio">
            <div class="titulo_resumen">{{DescripcionConfirma2}}:</div>
            <div class="descri_producto_reclamo">
                {{CUV2}} <br />
                <b>{{DescripcionProd2}}</b><br />
                x{{Cantidad2}} unidades
            </div>
        </div>
        {{/IsNullOrEmpty}}
    </div>
</script>

<script id="template-opcion-devolucion" type="text/x-handlebars-template">
    <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--devolucionCasoSetProducto">
        {{#if DataRespuestaServicio}}
        <p class="text-bold">El producto <span class="text-bold producto_set_nom">{{ProductoSeleccionado.CUV}} - {{ProductoSeleccionado.Descripcion}} (<span id="spnCantidadDVarios">x Unidades</span> </span>) pertenece al pack:</p>
        <p class="text-left producto_set_lista">
            {{#each DataRespuestaServicio as |item|}}
            <span class="text-bold">{{item.cuv}} - {{item.descripcion}}</span>
            {{/each}}
        </p>
        <div class="text-center text-bold opcion_cdr_seleccionada_terminos_entrega_producto_set_wrapper">
            <input id="TerminosEntregaProductoSet" checked style="display:none!important;" type="checkbox" disabled="disabled">
            <label for="TerminosEntregaProductoSet" class="border-radius-4 opcion_cdr_checkbox opcion_cdr_checkbox--terminosEntregaProductoSet">
            </label>
            <span class="text-left default-color opcion_cdr_seleccionada_terminos_entrega_producto_texto">
                Recuerda al devolver el producto se deberá entregar <span class="text-uppercase">todos los productos que contiene el pack </span> mencionado.
            </span>
        </div>
        {{else}}
        <div class="opcion_cdr_seleccionada_info opcion_cdr_seleccionada_info--envioProducto">
            <p class="text-bold">Vas a devolver el siguiente producto:</p>
            <p class="text-bold">
                <span class="text-bold producto_nom" id="spnDescripcionProductoOpcionD">{{ProductoSeleccionado.CUV}} - {{ProductoSeleccionado.Descripcion}}</span>
                <span id="spnCantidadDIndividual">x Unidades</span>
            </p>
        </div>
        {{/if}}
    </div>
</script>

@section scripts{
    <script type="text/javascript">
        var imgCheck = '@Url.Content("~/Content/Images/Esika/paso_realizado.png")';
        var UrlBuscarCuv = '@Url.Action("BuscarCUV", "MisReclamos", new { area = "" })';
        var UrlBuscarMotivo = '@Url.Action("BuscarMotivo", "MisReclamos", new { area = "" })';
        var UrlBuscarOperacion = '@Url.Action("BuscarOperacion", "MisReclamos", new { area = "" })';
        var UrlDetalleGuardar = '@Url.Action("DetalleGuardar", "MisReclamos", new { area = "" })';
        var UrlDetalleCargar = '@Url.Action("DetalleCargar", "MisReclamos", new { area = "" })';
        var UrlValidarPaso1 = '@Url.Action("ValidarPaso1", "MisReclamos", new { area = "" })';
        var UrlObtenerMontosProdcutos = '@Url.Action("ObtenerMontoProductosCdrByCodigoOperacion", "MisReclamos", new { area = "" })';
        var UrlBuscarCuvCambiar = '@Url.Action("BuscarCuvCambiar", "MisReclamos", new { area = "" })';
        var urlRegresar = '@Url.Action("Index", "MisReclamos", new { area = "Mobile" })';
        var UrlSolicitudEnviar = '@Url.Action("SolicitudEnviar", "MisReclamos", new { area = "" })';
        var UrlValidarNoPack = '@Url.Action("ValidarNoPack", "MisReclamos", new { area = "" })';
        var UrlValidarCorreoDuplicado = '@Url.Action("ValidarCorreoDuplicado", "MisReclamos", new { area = "" })';
        var UrlBuscarCdrWebDatos = '@Url.Action("BuscarCdrWebDatos", "MisReclamos", new { area = "" })';
        var UrlObtenerCantidadProductosByCodigoSsic = '@Url.Action("ObtenerCantidadProductosByCodigoSsic", "MisReclamos", new { area = "" })';
        var UrlBuscarPropuesta = '@Url.Action("BuscarPropuesta", "MisReclamos", new { area = "" })';
        var UrlBuscarParametria = '@Url.Action("BuscarParametria", "MisReclamos", new { area = "" })';
        var UrlValidaTelefono = '@Url.Action("ValidadTelefonoConsultora", "MisReclamos", new { area = "" })';
        var UrlDetalleEliminar = '@Url.Action("DetalleEliminar", "MisReclamos", new { area = "" })';
        var UrlObtenerListarNumPedido = '@Url.Action("ObtenerNumeroPedidos", "Misreclamos", new { area = ""})';
        var UrlObtenerDatosCuv = '@Url.Action("ObtenerDatosCuv", "Misreclamos", new { area = ""})';
        var UrlGetMisReclamos = '@Url.Action("GetReclamos","MisReclamos", new { area = "mobile"})';
        var UrlVistaSolicitudesRegistradas = '@Url.Action("Index","MisReclamos", new { area = "mobile"})';
        var urlValidarCargaDetalle = '@Url.Action("ValidarCargaDetalle", "MisReclamos", new { area = "Mobile" })';
        var urlReclamo = '@Url.Action("Reclamo", "MisReclamos", new { area = "Mobile" } )';
        var mensajeGestionCdrInhabilitada = '@Html.Raw(Model.MensajeGestionCdrInhabilitada)';
        var mostrarTab = '@Html.Raw(Model.MostrarTab)';
        var mensajeCdrFueraDeFechaCompleto = '@Html.Raw(Constantes.CdrWebMensajes.FueraDeFecha)';
        var mensajeChatEnLinea = '@Html.Raw(Constantes.CdrWebMensajes.ContactateChatEnLinea)';
        var flagAppMobile = @(!mobileConfiguracion.EsAppMobile ? 0 : 1);
        if (flagAppMobile == 0) mensajeCdrFueraDeFechaCompleto = mensajeCdrFueraDeFechaCompleto + " " + mensajeChatEnLinea;
        var CantidadReclamosPorPedidoConfig = '@Html.Raw(Model.CantidadReclamosPorPedido)';
        var OrigenCDR = true;

    </script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/Mobile/MisReclamos/Reclamo.js")?v5"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/PortalConsultoras/EstrategiaAgregar/EstrategiaAgregar.js")?v1"></script>
}

