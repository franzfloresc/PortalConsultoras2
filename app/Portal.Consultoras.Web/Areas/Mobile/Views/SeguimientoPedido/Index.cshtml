@using Portal.Consultoras.Web.Areas.Mobile.Models
@using Portal.Consultoras.Web.Helpers
@model SeguimientoMobileModel
@{
    var layout = ViewContext.MobileLayout();
    Layout = string.Format("~/Areas/Mobile/Views/Shared/{0}.cshtml", layout);
    var mobileConfiguracion = Html.MobileAppConfiguracion();
}

@section styles{
    <style type="text/css">
        body {
            background: #FFF !important;
        }
    </style>
}
@{
    if (!mobileConfiguracion.EsAppMobile)
    {
        <div class="titulo_mobile">
            <a href="@Request.UrlReferrer" class="enlace_regresar catalogosR" title="Regresar"></a>
            &nbsp;&nbsp;&nbsp;&nbsp;SEGUIMIENTO A TU PEDIDO
        </div>
    }
}
@if (Model.ListaEstadoSeguimiento.Count == 0)
{
    <div class="">
        @if (!mobileConfiguracion.EsAppMobile)
        {
            <div class="pestana_esika"></div>
            <div class="pestana_lbel"></div>
        }
        <div class="col-xs-12">
            <div class="icono_alerta exclamacion_icono_mobile"></div>
            <div class="mensaje_alerta">Hasta el momento no tienes ningún pedido facturado.</div>
        </div>
    </div>
}
else
{
    <div class="fondo_f2f2f2">
        @if (!mobileConfiguracion.EsAppMobile)
        {
            <div class="pestana_esika"></div>
            <div class="pestana_lbel"></div>
        }
        <div class="tabs-link tab-primary upper">
            @for (int i = 0; i < Model.ListaEstadoSeguimiento.Count; i++)
            {
                var pedidoCliente = Model.ListaEstadoSeguimiento[i];
                var activo = (Model.Campana == pedidoCliente.Campana && (Model.NumeroPedido ?? "") == (pedidoCliente.NumeroPedido ?? "")) ? "active" : "";

                <a href="javascript:;" class="mytab @activo" data-campania="@pedidoCliente.Campana" data-nroPedido="@pedidoCliente.NumeroPedido" style="width: @(100.00 / Model.ListaEstadoSeguimiento.Count)%">
                    <small>Campaña</small>
                    <br />
                    <b>@pedidoCliente.Campana.ToString().Substring(4)</b>
                    @pedidoCliente.Campana.ToString().Substring(0, 4)
                </a>
            }
        </div>
        @for (int i = 0; i < Model.ListaEstadoSeguimiento.Count; i++)
        {
            <div class="col-xs-12">
                <div id="divListaPedidoDetalle_@(Model.ListaEstadoSeguimiento[i].Campana)_@(Model.ListaEstadoSeguimiento[i].NumeroPedido)" style="display:none">
                </div>
            </div>
        }
    </div>
}


@section scripts{
    @System.Web.Optimization.Scripts.Render("~/Scripts/PortalConsultoras/Mobile/SeguimientoPedido/Index.js")

    <script type="text/javascript">
        var urlDetalle = '@Url.Action("Detalle", "SeguimientoPedido", new {area = "Mobile"})';
    </script>
}